var gT=Object.defineProperty;var E1=l=>{throw TypeError(l)};var mT=(l,e,t)=>e in l?gT(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var ee=(l,e,t)=>mT(l,typeof e!="symbol"?e+"":e,t),ly=(l,e,t)=>e.has(l)||E1("Cannot "+t);var u=(l,e,t)=>(ly(l,e,"read from private field"),t?t.call(l):e.get(l)),k=(l,e,t)=>e.has(l)?E1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(l):e.set(l,t),S=(l,e,t,s)=>(ly(l,e,"write to private field"),s?s.call(l,t):e.set(l,t),t),C=(l,e,t)=>(ly(l,e,"access private method"),t);var Cs=(l,e,t,s)=>({set _(n){S(l,e,n,t)},get _(){return u(l,e,s)}});function vT(l,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in l)){const i=Object.getOwnPropertyDescriptor(s,n);i&&Object.defineProperty(l,n,i.get?i:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();function lx(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function yT(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var e=l.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(l).forEach(function(s){var n=Object.getOwnPropertyDescriptor(l,s);Object.defineProperty(t,s,n.get?n:{enumerable:!0,get:function(){return l[s]}})}),t}var cy={exports:{}},Xh={},uy={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1;function wT(){if(k1)return De;k1=1;var l=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function w($){return $===null||typeof $!="object"?null:($=m&&$[m]||$["@@iterator"],typeof $=="function"?$:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,_={};function E($,V,le){this.props=$,this.context=V,this.refs=_,this.updater=le||b}E.prototype.isReactComponent={},E.prototype.setState=function($,V){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,V,"setState")},E.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function T(){}T.prototype=E.prototype;function R($,V,le){this.props=$,this.context=V,this.refs=_,this.updater=le||b}var N=R.prototype=new T;N.constructor=R,A(N,E.prototype),N.isPureReactComponent=!0;var j=Array.isArray,I=Object.prototype.hasOwnProperty,F={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function W($,V,le){var Se,ke={},Ce=null,ye=null;if(V!=null)for(Se in V.ref!==void 0&&(ye=V.ref),V.key!==void 0&&(Ce=""+V.key),V)I.call(V,Se)&&!B.hasOwnProperty(Se)&&(ke[Se]=V[Se]);var Le=arguments.length-2;if(Le===1)ke.children=le;else if(1<Le){for(var ze=Array(Le),Me=0;Me<Le;Me++)ze[Me]=arguments[Me+2];ke.children=ze}if($&&$.defaultProps)for(Se in Le=$.defaultProps,Le)ke[Se]===void 0&&(ke[Se]=Le[Se]);return{$$typeof:l,type:$,key:Ce,ref:ye,props:ke,_owner:F.current}}function K($,V){return{$$typeof:l,type:$.type,key:V,ref:$.ref,props:$.props,_owner:$._owner}}function te($){return typeof $=="object"&&$!==null&&$.$$typeof===l}function Q($){var V={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(le){return V[le]})}var _e=/\/+/g;function we($,V){return typeof $=="object"&&$!==null&&$.key!=null?Q(""+$.key):V.toString(36)}function pe($,V,le,Se,ke){var Ce=typeof $;(Ce==="undefined"||Ce==="boolean")&&($=null);var ye=!1;if($===null)ye=!0;else switch(Ce){case"string":case"number":ye=!0;break;case"object":switch($.$$typeof){case l:case e:ye=!0}}if(ye)return ye=$,ke=ke(ye),$=Se===""?"."+we(ye,0):Se,j(ke)?(le="",$!=null&&(le=$.replace(_e,"$&/")+"/"),pe(ke,V,le,"",function(Me){return Me})):ke!=null&&(te(ke)&&(ke=K(ke,le+(!ke.key||ye&&ye.key===ke.key?"":(""+ke.key).replace(_e,"$&/")+"/")+$)),V.push(ke)),1;if(ye=0,Se=Se===""?".":Se+":",j($))for(var Le=0;Le<$.length;Le++){Ce=$[Le];var ze=Se+we(Ce,Le);ye+=pe(Ce,V,le,ze,ke)}else if(ze=w($),typeof ze=="function")for($=ze.call($),Le=0;!(Ce=$.next()).done;)Ce=Ce.value,ze=Se+we(Ce,Le++),ye+=pe(Ce,V,le,ze,ke);else if(Ce==="object")throw V=String($),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return ye}function Ee($,V,le){if($==null)return $;var Se=[],ke=0;return pe($,Se,"","",function(Ce){return V.call(le,Ce,ke++)}),Se}function Z($){if($._status===-1){var V=$._result;V=V(),V.then(function(le){($._status===0||$._status===-1)&&($._status=1,$._result=le)},function(le){($._status===0||$._status===-1)&&($._status=2,$._result=le)}),$._status===-1&&($._status=0,$._result=V)}if($._status===1)return $._result.default;throw $._result}var X={current:null},Y={transition:null},oe={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:Y,ReactCurrentOwner:F};function ne(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:Ee,forEach:function($,V,le){Ee($,function(){V.apply(this,arguments)},le)},count:function($){var V=0;return Ee($,function(){V++}),V},toArray:function($){return Ee($,function(V){return V})||[]},only:function($){if(!te($))throw Error("React.Children.only expected to receive a single React element child.");return $}},De.Component=E,De.Fragment=t,De.Profiler=n,De.PureComponent=R,De.StrictMode=s,De.Suspense=d,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,De.act=ne,De.cloneElement=function($,V,le){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var Se=A({},$.props),ke=$.key,Ce=$.ref,ye=$._owner;if(V!=null){if(V.ref!==void 0&&(Ce=V.ref,ye=F.current),V.key!==void 0&&(ke=""+V.key),$.type&&$.type.defaultProps)var Le=$.type.defaultProps;for(ze in V)I.call(V,ze)&&!B.hasOwnProperty(ze)&&(Se[ze]=V[ze]===void 0&&Le!==void 0?Le[ze]:V[ze])}var ze=arguments.length-2;if(ze===1)Se.children=le;else if(1<ze){Le=Array(ze);for(var Me=0;Me<ze;Me++)Le[Me]=arguments[Me+2];Se.children=Le}return{$$typeof:l,type:$.type,key:ke,ref:Ce,props:Se,_owner:ye}},De.createContext=function($){return $={$$typeof:o,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:i,_context:$},$.Consumer=$},De.createElement=W,De.createFactory=function($){var V=W.bind(null,$);return V.type=$,V},De.createRef=function(){return{current:null}},De.forwardRef=function($){return{$$typeof:c,render:$}},De.isValidElement=te,De.lazy=function($){return{$$typeof:p,_payload:{_status:-1,_result:$},_init:Z}},De.memo=function($,V){return{$$typeof:f,type:$,compare:V===void 0?null:V}},De.startTransition=function($){var V=Y.transition;Y.transition={};try{$()}finally{Y.transition=V}},De.unstable_act=ne,De.useCallback=function($,V){return X.current.useCallback($,V)},De.useContext=function($){return X.current.useContext($)},De.useDebugValue=function(){},De.useDeferredValue=function($){return X.current.useDeferredValue($)},De.useEffect=function($,V){return X.current.useEffect($,V)},De.useId=function(){return X.current.useId()},De.useImperativeHandle=function($,V,le){return X.current.useImperativeHandle($,V,le)},De.useInsertionEffect=function($,V){return X.current.useInsertionEffect($,V)},De.useLayoutEffect=function($,V){return X.current.useLayoutEffect($,V)},De.useMemo=function($,V){return X.current.useMemo($,V)},De.useReducer=function($,V,le){return X.current.useReducer($,V,le)},De.useRef=function($){return X.current.useRef($)},De.useState=function($){return X.current.useState($)},De.useSyncExternalStore=function($,V,le){return X.current.useSyncExternalStore($,V,le)},De.useTransition=function(){return X.current.useTransition()},De.version="18.3.1",De}var C1;function cx(){return C1||(C1=1,uy.exports=wT()),uy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1;function xT(){if(P1)return Xh;P1=1;var l=cx(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,n=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(c,d,f){var p,m={},w=null,b=null;f!==void 0&&(w=""+f),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(b=d.ref);for(p in d)s.call(d,p)&&!i.hasOwnProperty(p)&&(m[p]=d[p]);if(c&&c.defaultProps)for(p in d=c.defaultProps,d)m[p]===void 0&&(m[p]=d[p]);return{$$typeof:e,type:c,key:w,ref:b,props:m,_owner:n.current}}return Xh.Fragment=t,Xh.jsx=o,Xh.jsxs=o,Xh}var T1;function bT(){return T1||(T1=1,cy.exports=xT()),cy.exports}var y=bT(),D=cx();const tA=lx(D),_T=vT({__proto__:null,default:tA},[D]);var Dg={},hy={exports:{}},Vs={},dy={exports:{}},fy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1;function ST(){return N1||(N1=1,function(l){function e(Y,oe){var ne=Y.length;Y.push(oe);e:for(;0<ne;){var $=ne-1>>>1,V=Y[$];if(0<n(V,oe))Y[$]=oe,Y[ne]=V,ne=$;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var oe=Y[0],ne=Y.pop();if(ne!==oe){Y[0]=ne;e:for(var $=0,V=Y.length,le=V>>>1;$<le;){var Se=2*($+1)-1,ke=Y[Se],Ce=Se+1,ye=Y[Ce];if(0>n(ke,ne))Ce<V&&0>n(ye,ke)?(Y[$]=ye,Y[Ce]=ne,$=Ce):(Y[$]=ke,Y[Se]=ne,$=Se);else if(Ce<V&&0>n(ye,ne))Y[$]=ye,Y[Ce]=ne,$=Ce;else break e}}return oe}function n(Y,oe){var ne=Y.sortIndex-oe.sortIndex;return ne!==0?ne:Y.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;l.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();l.unstable_now=function(){return o.now()-c}}var d=[],f=[],p=1,m=null,w=3,b=!1,A=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(Y){for(var oe=t(f);oe!==null;){if(oe.callback===null)s(f);else if(oe.startTime<=Y)s(f),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=t(f)}}function j(Y){if(_=!1,N(Y),!A)if(t(d)!==null)A=!0,Z(I);else{var oe=t(f);oe!==null&&X(j,oe.startTime-Y)}}function I(Y,oe){A=!1,_&&(_=!1,T(W),W=-1),b=!0;var ne=w;try{for(N(oe),m=t(d);m!==null&&(!(m.expirationTime>oe)||Y&&!Q());){var $=m.callback;if(typeof $=="function"){m.callback=null,w=m.priorityLevel;var V=$(m.expirationTime<=oe);oe=l.unstable_now(),typeof V=="function"?m.callback=V:m===t(d)&&s(d),N(oe)}else s(d);m=t(d)}if(m!==null)var le=!0;else{var Se=t(f);Se!==null&&X(j,Se.startTime-oe),le=!1}return le}finally{m=null,w=ne,b=!1}}var F=!1,B=null,W=-1,K=5,te=-1;function Q(){return!(l.unstable_now()-te<K)}function _e(){if(B!==null){var Y=l.unstable_now();te=Y;var oe=!0;try{oe=B(!0,Y)}finally{oe?we():(F=!1,B=null)}}else F=!1}var we;if(typeof R=="function")we=function(){R(_e)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Ee=pe.port2;pe.port1.onmessage=_e,we=function(){Ee.postMessage(null)}}else we=function(){E(_e,0)};function Z(Y){B=Y,F||(F=!0,we())}function X(Y,oe){W=E(function(){Y(l.unstable_now())},oe)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(Y){Y.callback=null},l.unstable_continueExecution=function(){A||b||(A=!0,Z(I))},l.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<Y?Math.floor(1e3/Y):5},l.unstable_getCurrentPriorityLevel=function(){return w},l.unstable_getFirstCallbackNode=function(){return t(d)},l.unstable_next=function(Y){switch(w){case 1:case 2:case 3:var oe=3;break;default:oe=w}var ne=w;w=oe;try{return Y()}finally{w=ne}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(Y,oe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ne=w;w=Y;try{return oe()}finally{w=ne}},l.unstable_scheduleCallback=function(Y,oe,ne){var $=l.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?$+ne:$):ne=$,Y){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ne+V,Y={id:p++,callback:oe,priorityLevel:Y,startTime:ne,expirationTime:V,sortIndex:-1},ne>$?(Y.sortIndex=ne,e(f,Y),t(d)===null&&Y===t(f)&&(_?(T(W),W=-1):_=!0,X(j,ne-$))):(Y.sortIndex=V,e(d,Y),A||b||(A=!0,Z(I))),Y},l.unstable_shouldYield=Q,l.unstable_wrapCallback=function(Y){var oe=w;return function(){var ne=w;w=oe;try{return Y.apply(this,arguments)}finally{w=ne}}}}(fy)),fy}var R1;function AT(){return R1||(R1=1,dy.exports=ST()),dy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j1;function ET(){if(j1)return Vs;j1=1;var l=cx(),e=AT();function t(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,h=1;h<arguments.length;h++)a+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,n={};function i(r,a){o(r,a),o(r+"Capture",a)}function o(r,a){for(n[r]=a,r=0;r<a.length;r++)s.add(a[r])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function w(r){return d.call(m,r)?!0:d.call(p,r)?!1:f.test(r)?m[r]=!0:(p[r]=!0,!1)}function b(r,a,h,g){if(h!==null&&h.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function A(r,a,h,g){if(a===null||typeof a>"u"||b(r,a,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function _(r,a,h,g,v,x,P){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=g,this.attributeNamespace=v,this.mustUseProperty=h,this.propertyName=r,this.type=a,this.sanitizeURL=x,this.removeEmptyString=P}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){E[r]=new _(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];E[a]=new _(a,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){E[r]=new _(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){E[r]=new _(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){E[r]=new _(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){E[r]=new _(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){E[r]=new _(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){E[r]=new _(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){E[r]=new _(r,5,!1,r.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function R(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(T,R);E[a]=new _(a,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(T,R);E[a]=new _(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(T,R);E[a]=new _(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){E[r]=new _(r,1,!1,r.toLowerCase(),null,!1,!1)}),E.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){E[r]=new _(r,1,!1,r.toLowerCase(),null,!0,!0)});function N(r,a,h,g){var v=E.hasOwnProperty(a)?E[a]:null;(v!==null?v.type!==0:g||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(A(a,h,v,g)&&(h=null),g||v===null?w(a)&&(h===null?r.removeAttribute(a):r.setAttribute(a,""+h)):v.mustUseProperty?r[v.propertyName]=h===null?v.type===3?!1:"":h:(a=v.attributeName,g=v.attributeNamespace,h===null?r.removeAttribute(a):(v=v.type,h=v===3||v===4&&h===!0?"":""+h,g?r.setAttributeNS(g,a,h):r.setAttribute(a,h))))}var j=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),F=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),Q=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),Y=Symbol.iterator;function oe(r){return r===null||typeof r!="object"?null:(r=Y&&r[Y]||r["@@iterator"],typeof r=="function"?r:null)}var ne=Object.assign,$;function V(r){if($===void 0)try{throw Error()}catch(h){var a=h.stack.trim().match(/\n( *(at )?)/);$=a&&a[1]||""}return`
`+$+r}var le=!1;function Se(r,a){if(!r||le)return"";le=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(H){var g=H}Reflect.construct(r,[],a)}else{try{a.call()}catch(H){g=H}r.call(a.prototype)}else{try{throw Error()}catch(H){g=H}r()}}catch(H){if(H&&g&&typeof H.stack=="string"){for(var v=H.stack.split(`
`),x=g.stack.split(`
`),P=v.length-1,L=x.length-1;1<=P&&0<=L&&v[P]!==x[L];)L--;for(;1<=P&&0<=L;P--,L--)if(v[P]!==x[L]){if(P!==1||L!==1)do if(P--,L--,0>L||v[P]!==x[L]){var M=`
`+v[P].replace(" at new "," at ");return r.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",r.displayName)),M}while(1<=P&&0<=L);break}}}finally{le=!1,Error.prepareStackTrace=h}return(r=r?r.displayName||r.name:"")?V(r):""}function ke(r){switch(r.tag){case 5:return V(r.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return r=Se(r.type,!1),r;case 11:return r=Se(r.type.render,!1),r;case 1:return r=Se(r.type,!0),r;default:return""}}function Ce(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case B:return"Fragment";case F:return"Portal";case K:return"Profiler";case W:return"StrictMode";case we:return"Suspense";case pe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Q:return(r.displayName||"Context")+".Consumer";case te:return(r._context.displayName||"Context")+".Provider";case _e:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ee:return a=r.displayName||null,a!==null?a:Ce(r.type)||"Memo";case Z:a=r._payload,r=r._init;try{return Ce(r(a))}catch{}}return null}function ye(r){var a=r.type;switch(r.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=a.render,r=r.displayName||r.name||"",a.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(a);case 8:return a===W?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Le(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ze(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Me(r){var a=ze(r)?"checked":"value",h=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),g=""+r[a];if(!r.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,x=h.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return v.call(this)},set:function(P){g=""+P,x.call(this,P)}}),Object.defineProperty(r,a,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(P){g=""+P},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Fs(r){r._valueTracker||(r._valueTracker=Me(r))}function bn(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var h=a.getValue(),g="";return r&&(g=ze(r)?r.checked?"true":"false":r.value),r=g,r!==h?(a.setValue(r),!0):!1}function jt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Xe(r,a){var h=a.checked;return ne({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??r._wrapperState.initialChecked})}function St(r,a){var h=a.defaultValue==null?"":a.defaultValue,g=a.checked!=null?a.checked:a.defaultChecked;h=Le(a.value!=null?a.value:h),r._wrapperState={initialChecked:g,initialValue:h,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ht(r,a){a=a.checked,a!=null&&N(r,"checked",a,!1)}function _n(r,a){ht(r,a);var h=Le(a.value),g=a.type;if(h!=null)g==="number"?(h===0&&r.value===""||r.value!=h)&&(r.value=""+h):r.value!==""+h&&(r.value=""+h);else if(g==="submit"||g==="reset"){r.removeAttribute("value");return}a.hasOwnProperty("value")?Gr(r,a.type,h):a.hasOwnProperty("defaultValue")&&Gr(r,a.type,Le(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function Wr(r,a,h){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var g=a.type;if(!(g!=="submit"&&g!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,h||a===r.value||(r.value=a),r.defaultValue=a}h=r.name,h!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,h!==""&&(r.name=h)}function Gr(r,a,h){(a!=="number"||jt(r.ownerDocument)!==r)&&(h==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+h&&(r.defaultValue=""+h))}var fo=Array.isArray;function Vn(r,a,h,g){if(r=r.options,a){a={};for(var v=0;v<h.length;v++)a["$"+h[v]]=!0;for(h=0;h<r.length;h++)v=a.hasOwnProperty("$"+r[h].value),r[h].selected!==v&&(r[h].selected=v),v&&g&&(r[h].defaultSelected=!0)}else{for(h=""+Le(h),a=null,v=0;v<r.length;v++){if(r[v].value===h){r[v].selected=!0,g&&(r[v].defaultSelected=!0);return}a!==null||r[v].disabled||(a=r[v])}a!==null&&(a.selected=!0)}}function hh(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ep(r,a){var h=a.value;if(h==null){if(h=a.children,a=a.defaultValue,h!=null){if(a!=null)throw Error(t(92));if(fo(h)){if(1<h.length)throw Error(t(93));h=h[0]}a=h}a==null&&(a=""),h=a}r._wrapperState={initialValue:Le(h)}}function kp(r,a){var h=Le(a.value),g=Le(a.defaultValue);h!=null&&(h=""+h,h!==r.value&&(r.value=h),a.defaultValue==null&&r.defaultValue!==h&&(r.defaultValue=h)),g!=null&&(r.defaultValue=""+g)}function Cp(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}function Pp(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vr(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?Pp(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var qr,po=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,h,g,v){MSApp.execUnsafeLocalFunction(function(){return r(a,h,g,v)})}:r}(function(r,a){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=a;else{for(qr=qr||document.createElement("div"),qr.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=qr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}});function Kr(r,a){if(a){var h=r.firstChild;if(h&&h===r.lastChild&&h.nodeType===3){h.nodeValue=a;return}}r.textContent=a}var dh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wC=["Webkit","ms","Moz","O"];Object.keys(dh).forEach(function(r){wC.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),dh[a]=dh[r]})});function Bx(r,a,h){return a==null||typeof a=="boolean"||a===""?"":h||typeof a!="number"||a===0||dh.hasOwnProperty(r)&&dh[r]?(""+a).trim():a+"px"}function Ux(r,a){r=r.style;for(var h in a)if(a.hasOwnProperty(h)){var g=h.indexOf("--")===0,v=Bx(h,a[h],g);h==="float"&&(h="cssFloat"),g?r.setProperty(h,v):r[h]=v}}var xC=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function x0(r,a){if(a){if(xC[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function b0(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _0=null;function S0(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var A0=null,sc=null,nc=null;function zx(r){if(r=Ih(r)){if(typeof A0!="function")throw Error(t(280));var a=r.stateNode;a&&(a=Jp(a),A0(r.stateNode,r.type,a))}}function Hx(r){sc?nc?nc.push(r):nc=[r]:sc=r}function Vx(){if(sc){var r=sc,a=nc;if(nc=sc=null,zx(r),a)for(r=0;r<a.length;r++)zx(a[r])}}function Wx(r,a){return r(a)}function Gx(){}var E0=!1;function qx(r,a,h){if(E0)return r(a,h);E0=!0;try{return Wx(r,a,h)}finally{E0=!1,(sc!==null||nc!==null)&&(Gx(),Vx())}}function fh(r,a){var h=r.stateNode;if(h===null)return null;var g=Jp(h);if(g===null)return null;h=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(r=r.type,g=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!g;break e;default:r=!1}if(r)return null;if(h&&typeof h!="function")throw Error(t(231,a,typeof h));return h}var k0=!1;if(c)try{var ph={};Object.defineProperty(ph,"passive",{get:function(){k0=!0}}),window.addEventListener("test",ph,ph),window.removeEventListener("test",ph,ph)}catch{k0=!1}function bC(r,a,h,g,v,x,P,L,M){var H=Array.prototype.slice.call(arguments,3);try{a.apply(h,H)}catch(q){this.onError(q)}}var gh=!1,Tp=null,Np=!1,C0=null,_C={onError:function(r){gh=!0,Tp=r}};function SC(r,a,h,g,v,x,P,L,M){gh=!1,Tp=null,bC.apply(_C,arguments)}function AC(r,a,h,g,v,x,P,L,M){if(SC.apply(this,arguments),gh){if(gh){var H=Tp;gh=!1,Tp=null}else throw Error(t(198));Np||(Np=!0,C0=H)}}function go(r){var a=r,h=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(h=a.return),r=a.return;while(r)}return a.tag===3?h:null}function Kx(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function Xx(r){if(go(r)!==r)throw Error(t(188))}function EC(r){var a=r.alternate;if(!a){if(a=go(r),a===null)throw Error(t(188));return a!==r?null:r}for(var h=r,g=a;;){var v=h.return;if(v===null)break;var x=v.alternate;if(x===null){if(g=v.return,g!==null){h=g;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===h)return Xx(v),r;if(x===g)return Xx(v),a;x=x.sibling}throw Error(t(188))}if(h.return!==g.return)h=v,g=x;else{for(var P=!1,L=v.child;L;){if(L===h){P=!0,h=v,g=x;break}if(L===g){P=!0,g=v,h=x;break}L=L.sibling}if(!P){for(L=x.child;L;){if(L===h){P=!0,h=x,g=v;break}if(L===g){P=!0,g=x,h=v;break}L=L.sibling}if(!P)throw Error(t(189))}}if(h.alternate!==g)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?r:a}function Yx(r){return r=EC(r),r!==null?Jx(r):null}function Jx(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var a=Jx(r);if(a!==null)return a;r=r.sibling}return null}var Qx=e.unstable_scheduleCallback,Zx=e.unstable_cancelCallback,kC=e.unstable_shouldYield,CC=e.unstable_requestPaint,At=e.unstable_now,PC=e.unstable_getCurrentPriorityLevel,P0=e.unstable_ImmediatePriority,eb=e.unstable_UserBlockingPriority,Rp=e.unstable_NormalPriority,TC=e.unstable_LowPriority,tb=e.unstable_IdlePriority,jp=null,yr=null;function NC(r){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(jp,r,void 0,(r.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:LC,RC=Math.log,jC=Math.LN2;function LC(r){return r>>>=0,r===0?32:31-(RC(r)/jC|0)|0}var Lp=64,Ip=4194304;function mh(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Mp(r,a){var h=r.pendingLanes;if(h===0)return 0;var g=0,v=r.suspendedLanes,x=r.pingedLanes,P=h&268435455;if(P!==0){var L=P&~v;L!==0?g=mh(L):(x&=P,x!==0&&(g=mh(x)))}else P=h&~v,P!==0?g=mh(P):x!==0&&(g=mh(x));if(g===0)return 0;if(a!==0&&a!==g&&(a&v)===0&&(v=g&-g,x=a&-a,v>=x||v===16&&(x&4194240)!==0))return a;if((g&4)!==0&&(g|=h&16),a=r.entangledLanes,a!==0)for(r=r.entanglements,a&=g;0<a;)h=31-Wn(a),v=1<<h,g|=r[h],a&=~v;return g}function IC(r,a){switch(r){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MC(r,a){for(var h=r.suspendedLanes,g=r.pingedLanes,v=r.expirationTimes,x=r.pendingLanes;0<x;){var P=31-Wn(x),L=1<<P,M=v[P];M===-1?((L&h)===0||(L&g)!==0)&&(v[P]=IC(L,a)):M<=a&&(r.expiredLanes|=L),x&=~L}}function T0(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function sb(){var r=Lp;return Lp<<=1,(Lp&4194240)===0&&(Lp=64),r}function N0(r){for(var a=[],h=0;31>h;h++)a.push(r);return a}function vh(r,a,h){r.pendingLanes|=a,a!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,a=31-Wn(a),r[a]=h}function DC(r,a){var h=r.pendingLanes&~a;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=a,r.mutableReadLanes&=a,r.entangledLanes&=a,a=r.entanglements;var g=r.eventTimes;for(r=r.expirationTimes;0<h;){var v=31-Wn(h),x=1<<v;a[v]=0,g[v]=-1,r[v]=-1,h&=~x}}function R0(r,a){var h=r.entangledLanes|=a;for(r=r.entanglements;h;){var g=31-Wn(h),v=1<<g;v&a|r[g]&a&&(r[g]|=a),h&=~v}}var Je=0;function nb(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var rb,j0,ib,ab,ob,L0=!1,Dp=[],qi=null,Ki=null,Xi=null,yh=new Map,wh=new Map,Yi=[],OC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lb(r,a){switch(r){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Ki=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":yh.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":wh.delete(a.pointerId)}}function xh(r,a,h,g,v,x){return r===null||r.nativeEvent!==x?(r={blockedOn:a,domEventName:h,eventSystemFlags:g,nativeEvent:x,targetContainers:[v]},a!==null&&(a=Ih(a),a!==null&&j0(a)),r):(r.eventSystemFlags|=g,a=r.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),r)}function FC(r,a,h,g,v){switch(a){case"focusin":return qi=xh(qi,r,a,h,g,v),!0;case"dragenter":return Ki=xh(Ki,r,a,h,g,v),!0;case"mouseover":return Xi=xh(Xi,r,a,h,g,v),!0;case"pointerover":var x=v.pointerId;return yh.set(x,xh(yh.get(x)||null,r,a,h,g,v)),!0;case"gotpointercapture":return x=v.pointerId,wh.set(x,xh(wh.get(x)||null,r,a,h,g,v)),!0}return!1}function cb(r){var a=mo(r.target);if(a!==null){var h=go(a);if(h!==null){if(a=h.tag,a===13){if(a=Kx(h),a!==null){r.blockedOn=a,ob(r.priority,function(){ib(h)});return}}else if(a===3&&h.stateNode.current.memoizedState.isDehydrated){r.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Op(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var h=M0(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(h===null){h=r.nativeEvent;var g=new h.constructor(h.type,h);_0=g,h.target.dispatchEvent(g),_0=null}else return a=Ih(h),a!==null&&j0(a),r.blockedOn=h,!1;a.shift()}return!0}function ub(r,a,h){Op(r)&&h.delete(a)}function $C(){L0=!1,qi!==null&&Op(qi)&&(qi=null),Ki!==null&&Op(Ki)&&(Ki=null),Xi!==null&&Op(Xi)&&(Xi=null),yh.forEach(ub),wh.forEach(ub)}function bh(r,a){r.blockedOn===a&&(r.blockedOn=null,L0||(L0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$C)))}function _h(r){function a(v){return bh(v,r)}if(0<Dp.length){bh(Dp[0],r);for(var h=1;h<Dp.length;h++){var g=Dp[h];g.blockedOn===r&&(g.blockedOn=null)}}for(qi!==null&&bh(qi,r),Ki!==null&&bh(Ki,r),Xi!==null&&bh(Xi,r),yh.forEach(a),wh.forEach(a),h=0;h<Yi.length;h++)g=Yi[h],g.blockedOn===r&&(g.blockedOn=null);for(;0<Yi.length&&(h=Yi[0],h.blockedOn===null);)cb(h),h.blockedOn===null&&Yi.shift()}var rc=j.ReactCurrentBatchConfig,Fp=!0;function BC(r,a,h,g){var v=Je,x=rc.transition;rc.transition=null;try{Je=1,I0(r,a,h,g)}finally{Je=v,rc.transition=x}}function UC(r,a,h,g){var v=Je,x=rc.transition;rc.transition=null;try{Je=4,I0(r,a,h,g)}finally{Je=v,rc.transition=x}}function I0(r,a,h,g){if(Fp){var v=M0(r,a,h,g);if(v===null)Q0(r,a,g,$p,h),lb(r,g);else if(FC(v,r,a,h,g))g.stopPropagation();else if(lb(r,g),a&4&&-1<OC.indexOf(r)){for(;v!==null;){var x=Ih(v);if(x!==null&&rb(x),x=M0(r,a,h,g),x===null&&Q0(r,a,g,$p,h),x===v)break;v=x}v!==null&&g.stopPropagation()}else Q0(r,a,g,null,h)}}var $p=null;function M0(r,a,h,g){if($p=null,r=S0(g),r=mo(r),r!==null)if(a=go(r),a===null)r=null;else if(h=a.tag,h===13){if(r=Kx(a),r!==null)return r;r=null}else if(h===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null);return $p=r,null}function hb(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PC()){case P0:return 1;case eb:return 4;case Rp:case TC:return 16;case tb:return 536870912;default:return 16}default:return 16}}var Ji=null,D0=null,Bp=null;function db(){if(Bp)return Bp;var r,a=D0,h=a.length,g,v="value"in Ji?Ji.value:Ji.textContent,x=v.length;for(r=0;r<h&&a[r]===v[r];r++);var P=h-r;for(g=1;g<=P&&a[h-g]===v[x-g];g++);return Bp=v.slice(r,1<g?1-g:void 0)}function Up(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function zp(){return!0}function fb(){return!1}function Qs(r){function a(h,g,v,x,P){this._reactName=h,this._targetInst=v,this.type=g,this.nativeEvent=x,this.target=P,this.currentTarget=null;for(var L in r)r.hasOwnProperty(L)&&(h=r[L],this[L]=h?h(x):x[L]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?zp:fb,this.isPropagationStopped=fb,this}return ne(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=zp)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=zp)},persist:function(){},isPersistent:zp}),a}var ic={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},O0=Qs(ic),Sh=ne({},ic,{view:0,detail:0}),zC=Qs(Sh),F0,$0,Ah,Hp=ne({},Sh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U0,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ah&&(Ah&&r.type==="mousemove"?(F0=r.screenX-Ah.screenX,$0=r.screenY-Ah.screenY):$0=F0=0,Ah=r),F0)},movementY:function(r){return"movementY"in r?r.movementY:$0}}),pb=Qs(Hp),HC=ne({},Hp,{dataTransfer:0}),VC=Qs(HC),WC=ne({},Sh,{relatedTarget:0}),B0=Qs(WC),GC=ne({},ic,{animationName:0,elapsedTime:0,pseudoElement:0}),qC=Qs(GC),KC=ne({},ic,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),XC=Qs(KC),YC=ne({},ic,{data:0}),gb=Qs(YC),JC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eP(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=ZC[r])?!!a[r]:!1}function U0(){return eP}var tP=ne({},Sh,{key:function(r){if(r.key){var a=JC[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Up(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?QC[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U0,charCode:function(r){return r.type==="keypress"?Up(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Up(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),sP=Qs(tP),nP=ne({},Hp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mb=Qs(nP),rP=ne({},Sh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U0}),iP=Qs(rP),aP=ne({},ic,{propertyName:0,elapsedTime:0,pseudoElement:0}),oP=Qs(aP),lP=ne({},Hp,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),cP=Qs(lP),uP=[9,13,27,32],z0=c&&"CompositionEvent"in window,Eh=null;c&&"documentMode"in document&&(Eh=document.documentMode);var hP=c&&"TextEvent"in window&&!Eh,vb=c&&(!z0||Eh&&8<Eh&&11>=Eh),yb=" ",wb=!1;function xb(r,a){switch(r){case"keyup":return uP.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bb(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ac=!1;function dP(r,a){switch(r){case"compositionend":return bb(a);case"keypress":return a.which!==32?null:(wb=!0,yb);case"textInput":return r=a.data,r===yb&&wb?null:r;default:return null}}function fP(r,a){if(ac)return r==="compositionend"||!z0&&xb(r,a)?(r=db(),Bp=D0=Ji=null,ac=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vb&&a.locale!=="ko"?null:a.data;default:return null}}var pP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _b(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!pP[r.type]:a==="textarea"}function Sb(r,a,h,g){Hx(g),a=Kp(a,"onChange"),0<a.length&&(h=new O0("onChange","change",null,h,g),r.push({event:h,listeners:a}))}var kh=null,Ch=null;function gP(r){Ub(r,0)}function Vp(r){var a=hc(r);if(bn(a))return r}function mP(r,a){if(r==="change")return a}var Ab=!1;if(c){var H0;if(c){var V0="oninput"in document;if(!V0){var Eb=document.createElement("div");Eb.setAttribute("oninput","return;"),V0=typeof Eb.oninput=="function"}H0=V0}else H0=!1;Ab=H0&&(!document.documentMode||9<document.documentMode)}function kb(){kh&&(kh.detachEvent("onpropertychange",Cb),Ch=kh=null)}function Cb(r){if(r.propertyName==="value"&&Vp(Ch)){var a=[];Sb(a,Ch,r,S0(r)),qx(gP,a)}}function vP(r,a,h){r==="focusin"?(kb(),kh=a,Ch=h,kh.attachEvent("onpropertychange",Cb)):r==="focusout"&&kb()}function yP(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Vp(Ch)}function wP(r,a){if(r==="click")return Vp(a)}function xP(r,a){if(r==="input"||r==="change")return Vp(a)}function bP(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Gn=typeof Object.is=="function"?Object.is:bP;function Ph(r,a){if(Gn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var h=Object.keys(r),g=Object.keys(a);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var v=h[g];if(!d.call(a,v)||!Gn(r[v],a[v]))return!1}return!0}function Pb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Tb(r,a){var h=Pb(r);r=0;for(var g;h;){if(h.nodeType===3){if(g=r+h.textContent.length,r<=a&&g>=a)return{node:h,offset:a-r};r=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Pb(h)}}function Nb(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Nb(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Rb(){for(var r=window,a=jt();a instanceof r.HTMLIFrameElement;){try{var h=typeof a.contentWindow.location.href=="string"}catch{h=!1}if(h)r=a.contentWindow;else break;a=jt(r.document)}return a}function W0(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function _P(r){var a=Rb(),h=r.focusedElem,g=r.selectionRange;if(a!==h&&h&&h.ownerDocument&&Nb(h.ownerDocument.documentElement,h)){if(g!==null&&W0(h)){if(a=g.start,r=g.end,r===void 0&&(r=a),"selectionStart"in h)h.selectionStart=a,h.selectionEnd=Math.min(r,h.value.length);else if(r=(a=h.ownerDocument||document)&&a.defaultView||window,r.getSelection){r=r.getSelection();var v=h.textContent.length,x=Math.min(g.start,v);g=g.end===void 0?x:Math.min(g.end,v),!r.extend&&x>g&&(v=g,g=x,x=v),v=Tb(h,x);var P=Tb(h,g);v&&P&&(r.rangeCount!==1||r.anchorNode!==v.node||r.anchorOffset!==v.offset||r.focusNode!==P.node||r.focusOffset!==P.offset)&&(a=a.createRange(),a.setStart(v.node,v.offset),r.removeAllRanges(),x>g?(r.addRange(a),r.extend(P.node,P.offset)):(a.setEnd(P.node,P.offset),r.addRange(a)))}}for(a=[],r=h;r=r.parentNode;)r.nodeType===1&&a.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<a.length;h++)r=a[h],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var SP=c&&"documentMode"in document&&11>=document.documentMode,oc=null,G0=null,Th=null,q0=!1;function jb(r,a,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;q0||oc==null||oc!==jt(g)||(g=oc,"selectionStart"in g&&W0(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Th&&Ph(Th,g)||(Th=g,g=Kp(G0,"onSelect"),0<g.length&&(a=new O0("onSelect","select",null,a,h),r.push({event:a,listeners:g}),a.target=oc)))}function Wp(r,a){var h={};return h[r.toLowerCase()]=a.toLowerCase(),h["Webkit"+r]="webkit"+a,h["Moz"+r]="moz"+a,h}var lc={animationend:Wp("Animation","AnimationEnd"),animationiteration:Wp("Animation","AnimationIteration"),animationstart:Wp("Animation","AnimationStart"),transitionend:Wp("Transition","TransitionEnd")},K0={},Lb={};c&&(Lb=document.createElement("div").style,"AnimationEvent"in window||(delete lc.animationend.animation,delete lc.animationiteration.animation,delete lc.animationstart.animation),"TransitionEvent"in window||delete lc.transitionend.transition);function Gp(r){if(K0[r])return K0[r];if(!lc[r])return r;var a=lc[r],h;for(h in a)if(a.hasOwnProperty(h)&&h in Lb)return K0[r]=a[h];return r}var Ib=Gp("animationend"),Mb=Gp("animationiteration"),Db=Gp("animationstart"),Ob=Gp("transitionend"),Fb=new Map,$b="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qi(r,a){Fb.set(r,a),i(a,[r])}for(var X0=0;X0<$b.length;X0++){var Y0=$b[X0],AP=Y0.toLowerCase(),EP=Y0[0].toUpperCase()+Y0.slice(1);Qi(AP,"on"+EP)}Qi(Ib,"onAnimationEnd"),Qi(Mb,"onAnimationIteration"),Qi(Db,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(Ob,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nh));function Bb(r,a,h){var g=r.type||"unknown-event";r.currentTarget=h,AC(g,a,void 0,r),r.currentTarget=null}function Ub(r,a){a=(a&4)!==0;for(var h=0;h<r.length;h++){var g=r[h],v=g.event;g=g.listeners;e:{var x=void 0;if(a)for(var P=g.length-1;0<=P;P--){var L=g[P],M=L.instance,H=L.currentTarget;if(L=L.listener,M!==x&&v.isPropagationStopped())break e;Bb(v,L,H),x=M}else for(P=0;P<g.length;P++){if(L=g[P],M=L.instance,H=L.currentTarget,L=L.listener,M!==x&&v.isPropagationStopped())break e;Bb(v,L,H),x=M}}}if(Np)throw r=C0,Np=!1,C0=null,r}function lt(r,a){var h=a[rv];h===void 0&&(h=a[rv]=new Set);var g=r+"__bubble";h.has(g)||(zb(a,r,2,!1),h.add(g))}function J0(r,a,h){var g=0;a&&(g|=4),zb(h,r,g,a)}var qp="_reactListening"+Math.random().toString(36).slice(2);function Rh(r){if(!r[qp]){r[qp]=!0,s.forEach(function(h){h!=="selectionchange"&&(kP.has(h)||J0(h,!1,r),J0(h,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[qp]||(a[qp]=!0,J0("selectionchange",!1,a))}}function zb(r,a,h,g){switch(hb(a)){case 1:var v=BC;break;case 4:v=UC;break;default:v=I0}h=v.bind(null,a,h,r),v=void 0,!k0||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),g?v!==void 0?r.addEventListener(a,h,{capture:!0,passive:v}):r.addEventListener(a,h,!0):v!==void 0?r.addEventListener(a,h,{passive:v}):r.addEventListener(a,h,!1)}function Q0(r,a,h,g,v){var x=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var P=g.tag;if(P===3||P===4){var L=g.stateNode.containerInfo;if(L===v||L.nodeType===8&&L.parentNode===v)break;if(P===4)for(P=g.return;P!==null;){var M=P.tag;if((M===3||M===4)&&(M=P.stateNode.containerInfo,M===v||M.nodeType===8&&M.parentNode===v))return;P=P.return}for(;L!==null;){if(P=mo(L),P===null)return;if(M=P.tag,M===5||M===6){g=x=P;continue e}L=L.parentNode}}g=g.return}qx(function(){var H=x,q=S0(h),J=[];e:{var G=Fb.get(r);if(G!==void 0){var ie=O0,de=r;switch(r){case"keypress":if(Up(h)===0)break e;case"keydown":case"keyup":ie=sP;break;case"focusin":de="focus",ie=B0;break;case"focusout":de="blur",ie=B0;break;case"beforeblur":case"afterblur":ie=B0;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=pb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=VC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=iP;break;case Ib:case Mb:case Db:ie=qC;break;case Ob:ie=oP;break;case"scroll":ie=zC;break;case"wheel":ie=cP;break;case"copy":case"cut":case"paste":ie=XC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=mb}var fe=(a&4)!==0,Et=!fe&&r==="scroll",U=fe?G!==null?G+"Capture":null:G;fe=[];for(var O=H,z;O!==null;){z=O;var se=z.stateNode;if(z.tag===5&&se!==null&&(z=se,U!==null&&(se=fh(O,U),se!=null&&fe.push(jh(O,se,z)))),Et)break;O=O.return}0<fe.length&&(G=new ie(G,de,null,h,q),J.push({event:G,listeners:fe}))}}if((a&7)===0){e:{if(G=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",G&&h!==_0&&(de=h.relatedTarget||h.fromElement)&&(mo(de)||de[Xr]))break e;if((ie||G)&&(G=q.window===q?q:(G=q.ownerDocument)?G.defaultView||G.parentWindow:window,ie?(de=h.relatedTarget||h.toElement,ie=H,de=de?mo(de):null,de!==null&&(Et=go(de),de!==Et||de.tag!==5&&de.tag!==6)&&(de=null)):(ie=null,de=H),ie!==de)){if(fe=pb,se="onMouseLeave",U="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(fe=mb,se="onPointerLeave",U="onPointerEnter",O="pointer"),Et=ie==null?G:hc(ie),z=de==null?G:hc(de),G=new fe(se,O+"leave",ie,h,q),G.target=Et,G.relatedTarget=z,se=null,mo(q)===H&&(fe=new fe(U,O+"enter",de,h,q),fe.target=z,fe.relatedTarget=Et,se=fe),Et=se,ie&&de)t:{for(fe=ie,U=de,O=0,z=fe;z;z=cc(z))O++;for(z=0,se=U;se;se=cc(se))z++;for(;0<O-z;)fe=cc(fe),O--;for(;0<z-O;)U=cc(U),z--;for(;O--;){if(fe===U||U!==null&&fe===U.alternate)break t;fe=cc(fe),U=cc(U)}fe=null}else fe=null;ie!==null&&Hb(J,G,ie,fe,!1),de!==null&&Et!==null&&Hb(J,Et,de,fe,!0)}}e:{if(G=H?hc(H):window,ie=G.nodeName&&G.nodeName.toLowerCase(),ie==="select"||ie==="input"&&G.type==="file")var ge=mP;else if(_b(G))if(Ab)ge=xP;else{ge=yP;var xe=vP}else(ie=G.nodeName)&&ie.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(ge=wP);if(ge&&(ge=ge(r,H))){Sb(J,ge,h,q);break e}xe&&xe(r,G,H),r==="focusout"&&(xe=G._wrapperState)&&xe.controlled&&G.type==="number"&&Gr(G,"number",G.value)}switch(xe=H?hc(H):window,r){case"focusin":(_b(xe)||xe.contentEditable==="true")&&(oc=xe,G0=H,Th=null);break;case"focusout":Th=G0=oc=null;break;case"mousedown":q0=!0;break;case"contextmenu":case"mouseup":case"dragend":q0=!1,jb(J,h,q);break;case"selectionchange":if(SP)break;case"keydown":case"keyup":jb(J,h,q)}var be;if(z0)e:{switch(r){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else ac?xb(r,h)&&(Pe="onCompositionEnd"):r==="keydown"&&h.keyCode===229&&(Pe="onCompositionStart");Pe&&(vb&&h.locale!=="ko"&&(ac||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&ac&&(be=db()):(Ji=q,D0="value"in Ji?Ji.value:Ji.textContent,ac=!0)),xe=Kp(H,Pe),0<xe.length&&(Pe=new gb(Pe,r,null,h,q),J.push({event:Pe,listeners:xe}),be?Pe.data=be:(be=bb(h),be!==null&&(Pe.data=be)))),(be=hP?dP(r,h):fP(r,h))&&(H=Kp(H,"onBeforeInput"),0<H.length&&(q=new gb("onBeforeInput","beforeinput",null,h,q),J.push({event:q,listeners:H}),q.data=be))}Ub(J,a)})}function jh(r,a,h){return{instance:r,listener:a,currentTarget:h}}function Kp(r,a){for(var h=a+"Capture",g=[];r!==null;){var v=r,x=v.stateNode;v.tag===5&&x!==null&&(v=x,x=fh(r,h),x!=null&&g.unshift(jh(r,x,v)),x=fh(r,a),x!=null&&g.push(jh(r,x,v))),r=r.return}return g}function cc(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Hb(r,a,h,g,v){for(var x=a._reactName,P=[];h!==null&&h!==g;){var L=h,M=L.alternate,H=L.stateNode;if(M!==null&&M===g)break;L.tag===5&&H!==null&&(L=H,v?(M=fh(h,x),M!=null&&P.unshift(jh(h,M,L))):v||(M=fh(h,x),M!=null&&P.push(jh(h,M,L)))),h=h.return}P.length!==0&&r.push({event:a,listeners:P})}var CP=/\r\n?/g,PP=/\u0000|\uFFFD/g;function Vb(r){return(typeof r=="string"?r:""+r).replace(CP,`
`).replace(PP,"")}function Xp(r,a,h){if(a=Vb(a),Vb(r)!==a&&h)throw Error(t(425))}function Yp(){}var Z0=null,ev=null;function tv(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var sv=typeof setTimeout=="function"?setTimeout:void 0,TP=typeof clearTimeout=="function"?clearTimeout:void 0,Wb=typeof Promise=="function"?Promise:void 0,NP=typeof queueMicrotask=="function"?queueMicrotask:typeof Wb<"u"?function(r){return Wb.resolve(null).then(r).catch(RP)}:sv;function RP(r){setTimeout(function(){throw r})}function nv(r,a){var h=a,g=0;do{var v=h.nextSibling;if(r.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(g===0){r.removeChild(v),_h(a);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=v}while(h);_h(a)}function Zi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return r}function Gb(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var h=r.data;if(h==="$"||h==="$!"||h==="$?"){if(a===0)return r;a--}else h==="/$"&&a++}r=r.previousSibling}return null}var uc=Math.random().toString(36).slice(2),wr="__reactFiber$"+uc,Lh="__reactProps$"+uc,Xr="__reactContainer$"+uc,rv="__reactEvents$"+uc,jP="__reactListeners$"+uc,LP="__reactHandles$"+uc;function mo(r){var a=r[wr];if(a)return a;for(var h=r.parentNode;h;){if(a=h[Xr]||h[wr]){if(h=a.alternate,a.child!==null||h!==null&&h.child!==null)for(r=Gb(r);r!==null;){if(h=r[wr])return h;r=Gb(r)}return a}r=h,h=r.parentNode}return null}function Ih(r){return r=r[wr]||r[Xr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function hc(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Jp(r){return r[Lh]||null}var iv=[],dc=-1;function ea(r){return{current:r}}function ct(r){0>dc||(r.current=iv[dc],iv[dc]=null,dc--)}function rt(r,a){dc++,iv[dc]=r.current,r.current=a}var ta={},ds=ea(ta),$s=ea(!1),vo=ta;function fc(r,a){var h=r.type.contextTypes;if(!h)return ta;var g=r.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===a)return g.__reactInternalMemoizedMaskedChildContext;var v={},x;for(x in h)v[x]=a[x];return g&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=v),v}function Bs(r){return r=r.childContextTypes,r!=null}function Qp(){ct($s),ct(ds)}function qb(r,a,h){if(ds.current!==ta)throw Error(t(168));rt(ds,a),rt($s,h)}function Kb(r,a,h){var g=r.stateNode;if(a=a.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var v in g)if(!(v in a))throw Error(t(108,ye(r)||"Unknown",v));return ne({},h,g)}function Zp(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ta,vo=ds.current,rt(ds,r),rt($s,$s.current),!0}function Xb(r,a,h){var g=r.stateNode;if(!g)throw Error(t(169));h?(r=Kb(r,a,vo),g.__reactInternalMemoizedMergedChildContext=r,ct($s),ct(ds),rt(ds,r)):ct($s),rt($s,h)}var Yr=null,eg=!1,av=!1;function Yb(r){Yr===null?Yr=[r]:Yr.push(r)}function IP(r){eg=!0,Yb(r)}function sa(){if(!av&&Yr!==null){av=!0;var r=0,a=Je;try{var h=Yr;for(Je=1;r<h.length;r++){var g=h[r];do g=g(!0);while(g!==null)}Yr=null,eg=!1}catch(v){throw Yr!==null&&(Yr=Yr.slice(r+1)),Qx(P0,sa),v}finally{Je=a,av=!1}}return null}var pc=[],gc=0,tg=null,sg=0,Sn=[],An=0,yo=null,Jr=1,Qr="";function wo(r,a){pc[gc++]=sg,pc[gc++]=tg,tg=r,sg=a}function Jb(r,a,h){Sn[An++]=Jr,Sn[An++]=Qr,Sn[An++]=yo,yo=r;var g=Jr;r=Qr;var v=32-Wn(g)-1;g&=~(1<<v),h+=1;var x=32-Wn(a)+v;if(30<x){var P=v-v%5;x=(g&(1<<P)-1).toString(32),g>>=P,v-=P,Jr=1<<32-Wn(a)+v|h<<v|g,Qr=x+r}else Jr=1<<x|h<<v|g,Qr=r}function ov(r){r.return!==null&&(wo(r,1),Jb(r,1,0))}function lv(r){for(;r===tg;)tg=pc[--gc],pc[gc]=null,sg=pc[--gc],pc[gc]=null;for(;r===yo;)yo=Sn[--An],Sn[An]=null,Qr=Sn[--An],Sn[An]=null,Jr=Sn[--An],Sn[An]=null}var Zs=null,en=null,dt=!1,qn=null;function Qb(r,a){var h=Pn(5,null,null,0);h.elementType="DELETED",h.stateNode=a,h.return=r,a=r.deletions,a===null?(r.deletions=[h],r.flags|=16):a.push(h)}function Zb(r,a){switch(r.tag){case 5:var h=r.type;return a=a.nodeType!==1||h.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(r.stateNode=a,Zs=r,en=Zi(a.firstChild),!0):!1;case 6:return a=r.pendingProps===""||a.nodeType!==3?null:a,a!==null?(r.stateNode=a,Zs=r,en=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(h=yo!==null?{id:Jr,overflow:Qr}:null,r.memoizedState={dehydrated:a,treeContext:h,retryLane:1073741824},h=Pn(18,null,null,0),h.stateNode=a,h.return=r,r.child=h,Zs=r,en=null,!0):!1;default:return!1}}function cv(r){return(r.mode&1)!==0&&(r.flags&128)===0}function uv(r){if(dt){var a=en;if(a){var h=a;if(!Zb(r,a)){if(cv(r))throw Error(t(418));a=Zi(h.nextSibling);var g=Zs;a&&Zb(r,a)?Qb(g,h):(r.flags=r.flags&-4097|2,dt=!1,Zs=r)}}else{if(cv(r))throw Error(t(418));r.flags=r.flags&-4097|2,dt=!1,Zs=r}}}function e_(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Zs=r}function ng(r){if(r!==Zs)return!1;if(!dt)return e_(r),dt=!0,!1;var a;if((a=r.tag!==3)&&!(a=r.tag!==5)&&(a=r.type,a=a!=="head"&&a!=="body"&&!tv(r.type,r.memoizedProps)),a&&(a=en)){if(cv(r))throw t_(),Error(t(418));for(;a;)Qb(r,a),a=Zi(a.nextSibling)}if(e_(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var h=r.data;if(h==="/$"){if(a===0){en=Zi(r.nextSibling);break e}a--}else h!=="$"&&h!=="$!"&&h!=="$?"||a++}r=r.nextSibling}en=null}}else en=Zs?Zi(r.stateNode.nextSibling):null;return!0}function t_(){for(var r=en;r;)r=Zi(r.nextSibling)}function mc(){en=Zs=null,dt=!1}function hv(r){qn===null?qn=[r]:qn.push(r)}var MP=j.ReactCurrentBatchConfig;function Mh(r,a,h){if(r=h.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var g=h.stateNode}if(!g)throw Error(t(147,r));var v=g,x=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===x?a.ref:(a=function(P){var L=v.refs;P===null?delete L[x]:L[x]=P},a._stringRef=x,a)}if(typeof r!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,r))}return r}function rg(r,a){throw r=Object.prototype.toString.call(a),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r))}function s_(r){var a=r._init;return a(r._payload)}function n_(r){function a(U,O){if(r){var z=U.deletions;z===null?(U.deletions=[O],U.flags|=16):z.push(O)}}function h(U,O){if(!r)return null;for(;O!==null;)a(U,O),O=O.sibling;return null}function g(U,O){for(U=new Map;O!==null;)O.key!==null?U.set(O.key,O):U.set(O.index,O),O=O.sibling;return U}function v(U,O){return U=ua(U,O),U.index=0,U.sibling=null,U}function x(U,O,z){return U.index=z,r?(z=U.alternate,z!==null?(z=z.index,z<O?(U.flags|=2,O):z):(U.flags|=2,O)):(U.flags|=1048576,O)}function P(U){return r&&U.alternate===null&&(U.flags|=2),U}function L(U,O,z,se){return O===null||O.tag!==6?(O=sy(z,U.mode,se),O.return=U,O):(O=v(O,z),O.return=U,O)}function M(U,O,z,se){var ge=z.type;return ge===B?q(U,O,z.props.children,se,z.key):O!==null&&(O.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Z&&s_(ge)===O.type)?(se=v(O,z.props),se.ref=Mh(U,O,z),se.return=U,se):(se=Pg(z.type,z.key,z.props,null,U.mode,se),se.ref=Mh(U,O,z),se.return=U,se)}function H(U,O,z,se){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=ny(z,U.mode,se),O.return=U,O):(O=v(O,z.children||[]),O.return=U,O)}function q(U,O,z,se,ge){return O===null||O.tag!==7?(O=Co(z,U.mode,se,ge),O.return=U,O):(O=v(O,z),O.return=U,O)}function J(U,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return O=sy(""+O,U.mode,z),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case I:return z=Pg(O.type,O.key,O.props,null,U.mode,z),z.ref=Mh(U,null,O),z.return=U,z;case F:return O=ny(O,U.mode,z),O.return=U,O;case Z:var se=O._init;return J(U,se(O._payload),z)}if(fo(O)||oe(O))return O=Co(O,U.mode,z,null),O.return=U,O;rg(U,O)}return null}function G(U,O,z,se){var ge=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ge!==null?null:L(U,O,""+z,se);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case I:return z.key===ge?M(U,O,z,se):null;case F:return z.key===ge?H(U,O,z,se):null;case Z:return ge=z._init,G(U,O,ge(z._payload),se)}if(fo(z)||oe(z))return ge!==null?null:q(U,O,z,se,null);rg(U,z)}return null}function ie(U,O,z,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number")return U=U.get(z)||null,L(O,U,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case I:return U=U.get(se.key===null?z:se.key)||null,M(O,U,se,ge);case F:return U=U.get(se.key===null?z:se.key)||null,H(O,U,se,ge);case Z:var xe=se._init;return ie(U,O,z,xe(se._payload),ge)}if(fo(se)||oe(se))return U=U.get(z)||null,q(O,U,se,ge,null);rg(O,se)}return null}function de(U,O,z,se){for(var ge=null,xe=null,be=O,Pe=O=0,Gt=null;be!==null&&Pe<z.length;Pe++){be.index>Pe?(Gt=be,be=null):Gt=be.sibling;var qe=G(U,be,z[Pe],se);if(qe===null){be===null&&(be=Gt);break}r&&be&&qe.alternate===null&&a(U,be),O=x(qe,O,Pe),xe===null?ge=qe:xe.sibling=qe,xe=qe,be=Gt}if(Pe===z.length)return h(U,be),dt&&wo(U,Pe),ge;if(be===null){for(;Pe<z.length;Pe++)be=J(U,z[Pe],se),be!==null&&(O=x(be,O,Pe),xe===null?ge=be:xe.sibling=be,xe=be);return dt&&wo(U,Pe),ge}for(be=g(U,be);Pe<z.length;Pe++)Gt=ie(be,U,Pe,z[Pe],se),Gt!==null&&(r&&Gt.alternate!==null&&be.delete(Gt.key===null?Pe:Gt.key),O=x(Gt,O,Pe),xe===null?ge=Gt:xe.sibling=Gt,xe=Gt);return r&&be.forEach(function(ha){return a(U,ha)}),dt&&wo(U,Pe),ge}function fe(U,O,z,se){var ge=oe(z);if(typeof ge!="function")throw Error(t(150));if(z=ge.call(z),z==null)throw Error(t(151));for(var xe=ge=null,be=O,Pe=O=0,Gt=null,qe=z.next();be!==null&&!qe.done;Pe++,qe=z.next()){be.index>Pe?(Gt=be,be=null):Gt=be.sibling;var ha=G(U,be,qe.value,se);if(ha===null){be===null&&(be=Gt);break}r&&be&&ha.alternate===null&&a(U,be),O=x(ha,O,Pe),xe===null?ge=ha:xe.sibling=ha,xe=ha,be=Gt}if(qe.done)return h(U,be),dt&&wo(U,Pe),ge;if(be===null){for(;!qe.done;Pe++,qe=z.next())qe=J(U,qe.value,se),qe!==null&&(O=x(qe,O,Pe),xe===null?ge=qe:xe.sibling=qe,xe=qe);return dt&&wo(U,Pe),ge}for(be=g(U,be);!qe.done;Pe++,qe=z.next())qe=ie(be,U,Pe,qe.value,se),qe!==null&&(r&&qe.alternate!==null&&be.delete(qe.key===null?Pe:qe.key),O=x(qe,O,Pe),xe===null?ge=qe:xe.sibling=qe,xe=qe);return r&&be.forEach(function(pT){return a(U,pT)}),dt&&wo(U,Pe),ge}function Et(U,O,z,se){if(typeof z=="object"&&z!==null&&z.type===B&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case I:e:{for(var ge=z.key,xe=O;xe!==null;){if(xe.key===ge){if(ge=z.type,ge===B){if(xe.tag===7){h(U,xe.sibling),O=v(xe,z.props.children),O.return=U,U=O;break e}}else if(xe.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Z&&s_(ge)===xe.type){h(U,xe.sibling),O=v(xe,z.props),O.ref=Mh(U,xe,z),O.return=U,U=O;break e}h(U,xe);break}else a(U,xe);xe=xe.sibling}z.type===B?(O=Co(z.props.children,U.mode,se,z.key),O.return=U,U=O):(se=Pg(z.type,z.key,z.props,null,U.mode,se),se.ref=Mh(U,O,z),se.return=U,U=se)}return P(U);case F:e:{for(xe=z.key;O!==null;){if(O.key===xe)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){h(U,O.sibling),O=v(O,z.children||[]),O.return=U,U=O;break e}else{h(U,O);break}else a(U,O);O=O.sibling}O=ny(z,U.mode,se),O.return=U,U=O}return P(U);case Z:return xe=z._init,Et(U,O,xe(z._payload),se)}if(fo(z))return de(U,O,z,se);if(oe(z))return fe(U,O,z,se);rg(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,O!==null&&O.tag===6?(h(U,O.sibling),O=v(O,z),O.return=U,U=O):(h(U,O),O=sy(z,U.mode,se),O.return=U,U=O),P(U)):h(U,O)}return Et}var vc=n_(!0),r_=n_(!1),ig=ea(null),ag=null,yc=null,dv=null;function fv(){dv=yc=ag=null}function pv(r){var a=ig.current;ct(ig),r._currentValue=a}function gv(r,a,h){for(;r!==null;){var g=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),r===h)break;r=r.return}}function wc(r,a){ag=r,dv=yc=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&a)!==0&&(Us=!0),r.firstContext=null)}function En(r){var a=r._currentValue;if(dv!==r)if(r={context:r,memoizedValue:a,next:null},yc===null){if(ag===null)throw Error(t(308));yc=r,ag.dependencies={lanes:0,firstContext:r}}else yc=yc.next=r;return a}var xo=null;function mv(r){xo===null?xo=[r]:xo.push(r)}function i_(r,a,h,g){var v=a.interleaved;return v===null?(h.next=h,mv(a)):(h.next=v.next,v.next=h),a.interleaved=h,Zr(r,g)}function Zr(r,a){r.lanes|=a;var h=r.alternate;for(h!==null&&(h.lanes|=a),h=r,r=r.return;r!==null;)r.childLanes|=a,h=r.alternate,h!==null&&(h.childLanes|=a),h=r,r=r.return;return h.tag===3?h.stateNode:null}var na=!1;function vv(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a_(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ei(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function ra(r,a,h){var g=r.updateQueue;if(g===null)return null;if(g=g.shared,(Ve&2)!==0){var v=g.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),g.pending=a,Zr(r,h)}return v=g.interleaved,v===null?(a.next=a,mv(g)):(a.next=v.next,v.next=a),g.interleaved=a,Zr(r,h)}function og(r,a,h){if(a=a.updateQueue,a!==null&&(a=a.shared,(h&4194240)!==0)){var g=a.lanes;g&=r.pendingLanes,h|=g,a.lanes=h,R0(r,h)}}function o_(r,a){var h=r.updateQueue,g=r.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var v=null,x=null;if(h=h.firstBaseUpdate,h!==null){do{var P={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};x===null?v=x=P:x=x.next=P,h=h.next}while(h!==null);x===null?v=x=a:x=x.next=a}else v=x=a;h={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:g.shared,effects:g.effects},r.updateQueue=h;return}r=h.lastBaseUpdate,r===null?h.firstBaseUpdate=a:r.next=a,h.lastBaseUpdate=a}function lg(r,a,h,g){var v=r.updateQueue;na=!1;var x=v.firstBaseUpdate,P=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var M=L,H=M.next;M.next=null,P===null?x=H:P.next=H,P=M;var q=r.alternate;q!==null&&(q=q.updateQueue,L=q.lastBaseUpdate,L!==P&&(L===null?q.firstBaseUpdate=H:L.next=H,q.lastBaseUpdate=M))}if(x!==null){var J=v.baseState;P=0,q=H=M=null,L=x;do{var G=L.lane,ie=L.eventTime;if((g&G)===G){q!==null&&(q=q.next={eventTime:ie,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var de=r,fe=L;switch(G=a,ie=h,fe.tag){case 1:if(de=fe.payload,typeof de=="function"){J=de.call(ie,J,G);break e}J=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=fe.payload,G=typeof de=="function"?de.call(ie,J,G):de,G==null)break e;J=ne({},J,G);break e;case 2:na=!0}}L.callback!==null&&L.lane!==0&&(r.flags|=64,G=v.effects,G===null?v.effects=[L]:G.push(L))}else ie={eventTime:ie,lane:G,tag:L.tag,payload:L.payload,callback:L.callback,next:null},q===null?(H=q=ie,M=J):q=q.next=ie,P|=G;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;G=L,L=G.next,G.next=null,v.lastBaseUpdate=G,v.shared.pending=null}}while(!0);if(q===null&&(M=J),v.baseState=M,v.firstBaseUpdate=H,v.lastBaseUpdate=q,a=v.shared.interleaved,a!==null){v=a;do P|=v.lane,v=v.next;while(v!==a)}else x===null&&(v.shared.lanes=0);So|=P,r.lanes=P,r.memoizedState=J}}function l_(r,a,h){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var g=r[a],v=g.callback;if(v!==null){if(g.callback=null,g=h,typeof v!="function")throw Error(t(191,v));v.call(g)}}}var Dh={},xr=ea(Dh),Oh=ea(Dh),Fh=ea(Dh);function bo(r){if(r===Dh)throw Error(t(174));return r}function yv(r,a){switch(rt(Fh,a),rt(Oh,r),rt(xr,Dh),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:vr(null,"");break;default:r=r===8?a.parentNode:a,a=r.namespaceURI||null,r=r.tagName,a=vr(a,r)}ct(xr),rt(xr,a)}function xc(){ct(xr),ct(Oh),ct(Fh)}function c_(r){bo(Fh.current);var a=bo(xr.current),h=vr(a,r.type);a!==h&&(rt(Oh,r),rt(xr,h))}function wv(r){Oh.current===r&&(ct(xr),ct(Oh))}var mt=ea(0);function cg(r){for(var a=r;a!==null;){if(a.tag===13){var h=a.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var xv=[];function bv(){for(var r=0;r<xv.length;r++)xv[r]._workInProgressVersionPrimary=null;xv.length=0}var ug=j.ReactCurrentDispatcher,_v=j.ReactCurrentBatchConfig,_o=0,vt=null,Ot=null,Vt=null,hg=!1,$h=!1,Bh=0,DP=0;function fs(){throw Error(t(321))}function Sv(r,a){if(a===null)return!1;for(var h=0;h<a.length&&h<r.length;h++)if(!Gn(r[h],a[h]))return!1;return!0}function Av(r,a,h,g,v,x){if(_o=x,vt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ug.current=r===null||r.memoizedState===null?BP:UP,r=h(g,v),$h){x=0;do{if($h=!1,Bh=0,25<=x)throw Error(t(301));x+=1,Vt=Ot=null,a.updateQueue=null,ug.current=zP,r=h(g,v)}while($h)}if(ug.current=pg,a=Ot!==null&&Ot.next!==null,_o=0,Vt=Ot=vt=null,hg=!1,a)throw Error(t(300));return r}function Ev(){var r=Bh!==0;return Bh=0,r}function br(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?vt.memoizedState=Vt=r:Vt=Vt.next=r,Vt}function kn(){if(Ot===null){var r=vt.alternate;r=r!==null?r.memoizedState:null}else r=Ot.next;var a=Vt===null?vt.memoizedState:Vt.next;if(a!==null)Vt=a,Ot=r;else{if(r===null)throw Error(t(310));Ot=r,r={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Vt===null?vt.memoizedState=Vt=r:Vt=Vt.next=r}return Vt}function Uh(r,a){return typeof a=="function"?a(r):a}function kv(r){var a=kn(),h=a.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=r;var g=Ot,v=g.baseQueue,x=h.pending;if(x!==null){if(v!==null){var P=v.next;v.next=x.next,x.next=P}g.baseQueue=v=x,h.pending=null}if(v!==null){x=v.next,g=g.baseState;var L=P=null,M=null,H=x;do{var q=H.lane;if((_o&q)===q)M!==null&&(M=M.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),g=H.hasEagerState?H.eagerState:r(g,H.action);else{var J={lane:q,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};M===null?(L=M=J,P=g):M=M.next=J,vt.lanes|=q,So|=q}H=H.next}while(H!==null&&H!==x);M===null?P=g:M.next=L,Gn(g,a.memoizedState)||(Us=!0),a.memoizedState=g,a.baseState=P,a.baseQueue=M,h.lastRenderedState=g}if(r=h.interleaved,r!==null){v=r;do x=v.lane,vt.lanes|=x,So|=x,v=v.next;while(v!==r)}else v===null&&(h.lanes=0);return[a.memoizedState,h.dispatch]}function Cv(r){var a=kn(),h=a.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=r;var g=h.dispatch,v=h.pending,x=a.memoizedState;if(v!==null){h.pending=null;var P=v=v.next;do x=r(x,P.action),P=P.next;while(P!==v);Gn(x,a.memoizedState)||(Us=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),h.lastRenderedState=x}return[x,g]}function u_(){}function h_(r,a){var h=vt,g=kn(),v=a(),x=!Gn(g.memoizedState,v);if(x&&(g.memoizedState=v,Us=!0),g=g.queue,Pv(p_.bind(null,h,g,r),[r]),g.getSnapshot!==a||x||Vt!==null&&Vt.memoizedState.tag&1){if(h.flags|=2048,zh(9,f_.bind(null,h,g,v,a),void 0,null),Wt===null)throw Error(t(349));(_o&30)!==0||d_(h,a,v)}return v}function d_(r,a,h){r.flags|=16384,r={getSnapshot:a,value:h},a=vt.updateQueue,a===null?(a={lastEffect:null,stores:null},vt.updateQueue=a,a.stores=[r]):(h=a.stores,h===null?a.stores=[r]:h.push(r))}function f_(r,a,h,g){a.value=h,a.getSnapshot=g,g_(a)&&m_(r)}function p_(r,a,h){return h(function(){g_(a)&&m_(r)})}function g_(r){var a=r.getSnapshot;r=r.value;try{var h=a();return!Gn(r,h)}catch{return!0}}function m_(r){var a=Zr(r,1);a!==null&&Jn(a,r,1,-1)}function v_(r){var a=br();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uh,lastRenderedState:r},a.queue=r,r=r.dispatch=$P.bind(null,vt,r),[a.memoizedState,r]}function zh(r,a,h,g){return r={tag:r,create:a,destroy:h,deps:g,next:null},a=vt.updateQueue,a===null?(a={lastEffect:null,stores:null},vt.updateQueue=a,a.lastEffect=r.next=r):(h=a.lastEffect,h===null?a.lastEffect=r.next=r:(g=h.next,h.next=r,r.next=g,a.lastEffect=r)),r}function y_(){return kn().memoizedState}function dg(r,a,h,g){var v=br();vt.flags|=r,v.memoizedState=zh(1|a,h,void 0,g===void 0?null:g)}function fg(r,a,h,g){var v=kn();g=g===void 0?null:g;var x=void 0;if(Ot!==null){var P=Ot.memoizedState;if(x=P.destroy,g!==null&&Sv(g,P.deps)){v.memoizedState=zh(a,h,x,g);return}}vt.flags|=r,v.memoizedState=zh(1|a,h,x,g)}function w_(r,a){return dg(8390656,8,r,a)}function Pv(r,a){return fg(2048,8,r,a)}function x_(r,a){return fg(4,2,r,a)}function b_(r,a){return fg(4,4,r,a)}function __(r,a){if(typeof a=="function")return r=r(),a(r),function(){a(null)};if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function S_(r,a,h){return h=h!=null?h.concat([r]):null,fg(4,4,__.bind(null,a,r),h)}function Tv(){}function A_(r,a){var h=kn();a=a===void 0?null:a;var g=h.memoizedState;return g!==null&&a!==null&&Sv(a,g[1])?g[0]:(h.memoizedState=[r,a],r)}function E_(r,a){var h=kn();a=a===void 0?null:a;var g=h.memoizedState;return g!==null&&a!==null&&Sv(a,g[1])?g[0]:(r=r(),h.memoizedState=[r,a],r)}function k_(r,a,h){return(_o&21)===0?(r.baseState&&(r.baseState=!1,Us=!0),r.memoizedState=h):(Gn(h,a)||(h=sb(),vt.lanes|=h,So|=h,r.baseState=!0),a)}function OP(r,a){var h=Je;Je=h!==0&&4>h?h:4,r(!0);var g=_v.transition;_v.transition={};try{r(!1),a()}finally{Je=h,_v.transition=g}}function C_(){return kn().memoizedState}function FP(r,a,h){var g=la(r);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},P_(r))T_(a,h);else if(h=i_(r,a,h,g),h!==null){var v=ks();Jn(h,r,g,v),N_(h,a,g)}}function $P(r,a,h){var g=la(r),v={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(P_(r))T_(a,v);else{var x=r.alternate;if(r.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var P=a.lastRenderedState,L=x(P,h);if(v.hasEagerState=!0,v.eagerState=L,Gn(L,P)){var M=a.interleaved;M===null?(v.next=v,mv(a)):(v.next=M.next,M.next=v),a.interleaved=v;return}}catch{}finally{}h=i_(r,a,v,g),h!==null&&(v=ks(),Jn(h,r,g,v),N_(h,a,g))}}function P_(r){var a=r.alternate;return r===vt||a!==null&&a===vt}function T_(r,a){$h=hg=!0;var h=r.pending;h===null?a.next=a:(a.next=h.next,h.next=a),r.pending=a}function N_(r,a,h){if((h&4194240)!==0){var g=a.lanes;g&=r.pendingLanes,h|=g,a.lanes=h,R0(r,h)}}var pg={readContext:En,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},BP={readContext:En,useCallback:function(r,a){return br().memoizedState=[r,a===void 0?null:a],r},useContext:En,useEffect:w_,useImperativeHandle:function(r,a,h){return h=h!=null?h.concat([r]):null,dg(4194308,4,__.bind(null,a,r),h)},useLayoutEffect:function(r,a){return dg(4194308,4,r,a)},useInsertionEffect:function(r,a){return dg(4,2,r,a)},useMemo:function(r,a){var h=br();return a=a===void 0?null:a,r=r(),h.memoizedState=[r,a],r},useReducer:function(r,a,h){var g=br();return a=h!==void 0?h(a):a,g.memoizedState=g.baseState=a,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},g.queue=r,r=r.dispatch=FP.bind(null,vt,r),[g.memoizedState,r]},useRef:function(r){var a=br();return r={current:r},a.memoizedState=r},useState:v_,useDebugValue:Tv,useDeferredValue:function(r){return br().memoizedState=r},useTransition:function(){var r=v_(!1),a=r[0];return r=OP.bind(null,r[1]),br().memoizedState=r,[a,r]},useMutableSource:function(){},useSyncExternalStore:function(r,a,h){var g=vt,v=br();if(dt){if(h===void 0)throw Error(t(407));h=h()}else{if(h=a(),Wt===null)throw Error(t(349));(_o&30)!==0||d_(g,a,h)}v.memoizedState=h;var x={value:h,getSnapshot:a};return v.queue=x,w_(p_.bind(null,g,x,r),[r]),g.flags|=2048,zh(9,f_.bind(null,g,x,h,a),void 0,null),h},useId:function(){var r=br(),a=Wt.identifierPrefix;if(dt){var h=Qr,g=Jr;h=(g&~(1<<32-Wn(g)-1)).toString(32)+h,a=":"+a+"R"+h,h=Bh++,0<h&&(a+="H"+h.toString(32)),a+=":"}else h=DP++,a=":"+a+"r"+h.toString(32)+":";return r.memoizedState=a},unstable_isNewReconciler:!1},UP={readContext:En,useCallback:A_,useContext:En,useEffect:Pv,useImperativeHandle:S_,useInsertionEffect:x_,useLayoutEffect:b_,useMemo:E_,useReducer:kv,useRef:y_,useState:function(){return kv(Uh)},useDebugValue:Tv,useDeferredValue:function(r){var a=kn();return k_(a,Ot.memoizedState,r)},useTransition:function(){var r=kv(Uh)[0],a=kn().memoizedState;return[r,a]},useMutableSource:u_,useSyncExternalStore:h_,useId:C_,unstable_isNewReconciler:!1},zP={readContext:En,useCallback:A_,useContext:En,useEffect:Pv,useImperativeHandle:S_,useInsertionEffect:x_,useLayoutEffect:b_,useMemo:E_,useReducer:Cv,useRef:y_,useState:function(){return Cv(Uh)},useDebugValue:Tv,useDeferredValue:function(r){var a=kn();return Ot===null?a.memoizedState=r:k_(a,Ot.memoizedState,r)},useTransition:function(){var r=Cv(Uh)[0],a=kn().memoizedState;return[r,a]},useMutableSource:u_,useSyncExternalStore:h_,useId:C_,unstable_isNewReconciler:!1};function Kn(r,a){if(r&&r.defaultProps){a=ne({},a),r=r.defaultProps;for(var h in r)a[h]===void 0&&(a[h]=r[h]);return a}return a}function Nv(r,a,h,g){a=r.memoizedState,h=h(g,a),h=h==null?a:ne({},a,h),r.memoizedState=h,r.lanes===0&&(r.updateQueue.baseState=h)}var gg={isMounted:function(r){return(r=r._reactInternals)?go(r)===r:!1},enqueueSetState:function(r,a,h){r=r._reactInternals;var g=ks(),v=la(r),x=ei(g,v);x.payload=a,h!=null&&(x.callback=h),a=ra(r,x,v),a!==null&&(Jn(a,r,v,g),og(a,r,v))},enqueueReplaceState:function(r,a,h){r=r._reactInternals;var g=ks(),v=la(r),x=ei(g,v);x.tag=1,x.payload=a,h!=null&&(x.callback=h),a=ra(r,x,v),a!==null&&(Jn(a,r,v,g),og(a,r,v))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var h=ks(),g=la(r),v=ei(h,g);v.tag=2,a!=null&&(v.callback=a),a=ra(r,v,g),a!==null&&(Jn(a,r,g,h),og(a,r,g))}};function R_(r,a,h,g,v,x,P){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(g,x,P):a.prototype&&a.prototype.isPureReactComponent?!Ph(h,g)||!Ph(v,x):!0}function j_(r,a,h){var g=!1,v=ta,x=a.contextType;return typeof x=="object"&&x!==null?x=En(x):(v=Bs(a)?vo:ds.current,g=a.contextTypes,x=(g=g!=null)?fc(r,v):ta),a=new a(h,x),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=gg,r.stateNode=a,a._reactInternals=r,g&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=v,r.__reactInternalMemoizedMaskedChildContext=x),a}function L_(r,a,h,g){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(h,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(h,g),a.state!==r&&gg.enqueueReplaceState(a,a.state,null)}function Rv(r,a,h,g){var v=r.stateNode;v.props=h,v.state=r.memoizedState,v.refs={},vv(r);var x=a.contextType;typeof x=="object"&&x!==null?v.context=En(x):(x=Bs(a)?vo:ds.current,v.context=fc(r,x)),v.state=r.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(Nv(r,a,x,h),v.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(a=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),a!==v.state&&gg.enqueueReplaceState(v,v.state,null),lg(r,h,v,g),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308)}function bc(r,a){try{var h="",g=a;do h+=ke(g),g=g.return;while(g);var v=h}catch(x){v=`
Error generating stack: `+x.message+`
`+x.stack}return{value:r,source:a,stack:v,digest:null}}function jv(r,a,h){return{value:r,source:null,stack:h??null,digest:a??null}}function Lv(r,a){try{console.error(a.value)}catch(h){setTimeout(function(){throw h})}}var HP=typeof WeakMap=="function"?WeakMap:Map;function I_(r,a,h){h=ei(-1,h),h.tag=3,h.payload={element:null};var g=a.value;return h.callback=function(){_g||(_g=!0,Kv=g),Lv(r,a)},h}function M_(r,a,h){h=ei(-1,h),h.tag=3;var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var v=a.value;h.payload=function(){return g(v)},h.callback=function(){Lv(r,a)}}var x=r.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(h.callback=function(){Lv(r,a),typeof g!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var P=a.stack;this.componentDidCatch(a.value,{componentStack:P!==null?P:""})}),h}function D_(r,a,h){var g=r.pingCache;if(g===null){g=r.pingCache=new HP;var v=new Set;g.set(a,v)}else v=g.get(a),v===void 0&&(v=new Set,g.set(a,v));v.has(h)||(v.add(h),r=nT.bind(null,r,a,h),a.then(r,r))}function O_(r){do{var a;if((a=r.tag===13)&&(a=r.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return r;r=r.return}while(r!==null);return null}function F_(r,a,h,g,v){return(r.mode&1)===0?(r===a?r.flags|=65536:(r.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(a=ei(-1,1),a.tag=2,ra(h,a,1))),h.lanes|=1),r):(r.flags|=65536,r.lanes=v,r)}var VP=j.ReactCurrentOwner,Us=!1;function Es(r,a,h,g){a.child=r===null?r_(a,null,h,g):vc(a,r.child,h,g)}function $_(r,a,h,g,v){h=h.render;var x=a.ref;return wc(a,v),g=Av(r,a,h,g,x,v),h=Ev(),r!==null&&!Us?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~v,ti(r,a,v)):(dt&&h&&ov(a),a.flags|=1,Es(r,a,g,v),a.child)}function B_(r,a,h,g,v){if(r===null){var x=h.type;return typeof x=="function"&&!ty(x)&&x.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(a.tag=15,a.type=x,U_(r,a,x,g,v)):(r=Pg(h.type,null,g,a,a.mode,v),r.ref=a.ref,r.return=a,a.child=r)}if(x=r.child,(r.lanes&v)===0){var P=x.memoizedProps;if(h=h.compare,h=h!==null?h:Ph,h(P,g)&&r.ref===a.ref)return ti(r,a,v)}return a.flags|=1,r=ua(x,g),r.ref=a.ref,r.return=a,a.child=r}function U_(r,a,h,g,v){if(r!==null){var x=r.memoizedProps;if(Ph(x,g)&&r.ref===a.ref)if(Us=!1,a.pendingProps=g=x,(r.lanes&v)!==0)(r.flags&131072)!==0&&(Us=!0);else return a.lanes=r.lanes,ti(r,a,v)}return Iv(r,a,h,g,v)}function z_(r,a,h){var g=a.pendingProps,v=g.children,x=r!==null?r.memoizedState:null;if(g.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Sc,tn),tn|=h;else{if((h&1073741824)===0)return r=x!==null?x.baseLanes|h:h,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r,cachePool:null,transitions:null},a.updateQueue=null,rt(Sc,tn),tn|=r,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=x!==null?x.baseLanes:h,rt(Sc,tn),tn|=g}else x!==null?(g=x.baseLanes|h,a.memoizedState=null):g=h,rt(Sc,tn),tn|=g;return Es(r,a,v,h),a.child}function H_(r,a){var h=a.ref;(r===null&&h!==null||r!==null&&r.ref!==h)&&(a.flags|=512,a.flags|=2097152)}function Iv(r,a,h,g,v){var x=Bs(h)?vo:ds.current;return x=fc(a,x),wc(a,v),h=Av(r,a,h,g,x,v),g=Ev(),r!==null&&!Us?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~v,ti(r,a,v)):(dt&&g&&ov(a),a.flags|=1,Es(r,a,h,v),a.child)}function V_(r,a,h,g,v){if(Bs(h)){var x=!0;Zp(a)}else x=!1;if(wc(a,v),a.stateNode===null)vg(r,a),j_(a,h,g),Rv(a,h,g,v),g=!0;else if(r===null){var P=a.stateNode,L=a.memoizedProps;P.props=L;var M=P.context,H=h.contextType;typeof H=="object"&&H!==null?H=En(H):(H=Bs(h)?vo:ds.current,H=fc(a,H));var q=h.getDerivedStateFromProps,J=typeof q=="function"||typeof P.getSnapshotBeforeUpdate=="function";J||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(L!==g||M!==H)&&L_(a,P,g,H),na=!1;var G=a.memoizedState;P.state=G,lg(a,g,P,v),M=a.memoizedState,L!==g||G!==M||$s.current||na?(typeof q=="function"&&(Nv(a,h,q,g),M=a.memoizedState),(L=na||R_(a,h,L,g,G,M,H))?(J||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(a.flags|=4194308)):(typeof P.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=M),P.props=g,P.state=M,P.context=H,g=L):(typeof P.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{P=a.stateNode,a_(r,a),L=a.memoizedProps,H=a.type===a.elementType?L:Kn(a.type,L),P.props=H,J=a.pendingProps,G=P.context,M=h.contextType,typeof M=="object"&&M!==null?M=En(M):(M=Bs(h)?vo:ds.current,M=fc(a,M));var ie=h.getDerivedStateFromProps;(q=typeof ie=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(L!==J||G!==M)&&L_(a,P,g,M),na=!1,G=a.memoizedState,P.state=G,lg(a,g,P,v);var de=a.memoizedState;L!==J||G!==de||$s.current||na?(typeof ie=="function"&&(Nv(a,h,ie,g),de=a.memoizedState),(H=na||R_(a,h,H,g,G,de,M)||!1)?(q||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(g,de,M),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(g,de,M)),typeof P.componentDidUpdate=="function"&&(a.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof P.componentDidUpdate!="function"||L===r.memoizedProps&&G===r.memoizedState||(a.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&G===r.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=de),P.props=g,P.state=de,P.context=M,g=H):(typeof P.componentDidUpdate!="function"||L===r.memoizedProps&&G===r.memoizedState||(a.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&G===r.memoizedState||(a.flags|=1024),g=!1)}return Mv(r,a,h,g,x,v)}function Mv(r,a,h,g,v,x){H_(r,a);var P=(a.flags&128)!==0;if(!g&&!P)return v&&Xb(a,h,!1),ti(r,a,x);g=a.stateNode,VP.current=a;var L=P&&typeof h.getDerivedStateFromError!="function"?null:g.render();return a.flags|=1,r!==null&&P?(a.child=vc(a,r.child,null,x),a.child=vc(a,null,L,x)):Es(r,a,L,x),a.memoizedState=g.state,v&&Xb(a,h,!0),a.child}function W_(r){var a=r.stateNode;a.pendingContext?qb(r,a.pendingContext,a.pendingContext!==a.context):a.context&&qb(r,a.context,!1),yv(r,a.containerInfo)}function G_(r,a,h,g,v){return mc(),hv(v),a.flags|=256,Es(r,a,h,g),a.child}var Dv={dehydrated:null,treeContext:null,retryLane:0};function Ov(r){return{baseLanes:r,cachePool:null,transitions:null}}function q_(r,a,h){var g=a.pendingProps,v=mt.current,x=!1,P=(a.flags&128)!==0,L;if((L=P)||(L=r!==null&&r.memoizedState===null?!1:(v&2)!==0),L?(x=!0,a.flags&=-129):(r===null||r.memoizedState!==null)&&(v|=1),rt(mt,v&1),r===null)return uv(a),r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((a.mode&1)===0?a.lanes=1:r.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(P=g.children,r=g.fallback,x?(g=a.mode,x=a.child,P={mode:"hidden",children:P},(g&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=P):x=Tg(P,g,0,null),r=Co(r,g,h,null),x.return=a,r.return=a,x.sibling=r,a.child=x,a.child.memoizedState=Ov(h),a.memoizedState=Dv,r):Fv(a,P));if(v=r.memoizedState,v!==null&&(L=v.dehydrated,L!==null))return WP(r,a,P,g,L,v,h);if(x){x=g.fallback,P=a.mode,v=r.child,L=v.sibling;var M={mode:"hidden",children:g.children};return(P&1)===0&&a.child!==v?(g=a.child,g.childLanes=0,g.pendingProps=M,a.deletions=null):(g=ua(v,M),g.subtreeFlags=v.subtreeFlags&14680064),L!==null?x=ua(L,x):(x=Co(x,P,h,null),x.flags|=2),x.return=a,g.return=a,g.sibling=x,a.child=g,g=x,x=a.child,P=r.child.memoizedState,P=P===null?Ov(h):{baseLanes:P.baseLanes|h,cachePool:null,transitions:P.transitions},x.memoizedState=P,x.childLanes=r.childLanes&~h,a.memoizedState=Dv,g}return x=r.child,r=x.sibling,g=ua(x,{mode:"visible",children:g.children}),(a.mode&1)===0&&(g.lanes=h),g.return=a,g.sibling=null,r!==null&&(h=a.deletions,h===null?(a.deletions=[r],a.flags|=16):h.push(r)),a.child=g,a.memoizedState=null,g}function Fv(r,a){return a=Tg({mode:"visible",children:a},r.mode,0,null),a.return=r,r.child=a}function mg(r,a,h,g){return g!==null&&hv(g),vc(a,r.child,null,h),r=Fv(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function WP(r,a,h,g,v,x,P){if(h)return a.flags&256?(a.flags&=-257,g=jv(Error(t(422))),mg(r,a,P,g)):a.memoizedState!==null?(a.child=r.child,a.flags|=128,null):(x=g.fallback,v=a.mode,g=Tg({mode:"visible",children:g.children},v,0,null),x=Co(x,v,P,null),x.flags|=2,g.return=a,x.return=a,g.sibling=x,a.child=g,(a.mode&1)!==0&&vc(a,r.child,null,P),a.child.memoizedState=Ov(P),a.memoizedState=Dv,x);if((a.mode&1)===0)return mg(r,a,P,null);if(v.data==="$!"){if(g=v.nextSibling&&v.nextSibling.dataset,g)var L=g.dgst;return g=L,x=Error(t(419)),g=jv(x,g,void 0),mg(r,a,P,g)}if(L=(P&r.childLanes)!==0,Us||L){if(g=Wt,g!==null){switch(P&-P){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(g.suspendedLanes|P))!==0?0:v,v!==0&&v!==x.retryLane&&(x.retryLane=v,Zr(r,v),Jn(g,r,v,-1))}return ey(),g=jv(Error(t(421))),mg(r,a,P,g)}return v.data==="$?"?(a.flags|=128,a.child=r.child,a=rT.bind(null,r),v._reactRetry=a,null):(r=x.treeContext,en=Zi(v.nextSibling),Zs=a,dt=!0,qn=null,r!==null&&(Sn[An++]=Jr,Sn[An++]=Qr,Sn[An++]=yo,Jr=r.id,Qr=r.overflow,yo=a),a=Fv(a,g.children),a.flags|=4096,a)}function K_(r,a,h){r.lanes|=a;var g=r.alternate;g!==null&&(g.lanes|=a),gv(r.return,a,h)}function $v(r,a,h,g,v){var x=r.memoizedState;x===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:v}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=g,x.tail=h,x.tailMode=v)}function X_(r,a,h){var g=a.pendingProps,v=g.revealOrder,x=g.tail;if(Es(r,a,g.children,h),g=mt.current,(g&2)!==0)g=g&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&K_(r,h,a);else if(r.tag===19)K_(r,h,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}g&=1}if(rt(mt,g),(a.mode&1)===0)a.memoizedState=null;else switch(v){case"forwards":for(h=a.child,v=null;h!==null;)r=h.alternate,r!==null&&cg(r)===null&&(v=h),h=h.sibling;h=v,h===null?(v=a.child,a.child=null):(v=h.sibling,h.sibling=null),$v(a,!1,v,h,x);break;case"backwards":for(h=null,v=a.child,a.child=null;v!==null;){if(r=v.alternate,r!==null&&cg(r)===null){a.child=v;break}r=v.sibling,v.sibling=h,h=v,v=r}$v(a,!0,h,null,x);break;case"together":$v(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function vg(r,a){(a.mode&1)===0&&r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2)}function ti(r,a,h){if(r!==null&&(a.dependencies=r.dependencies),So|=a.lanes,(h&a.childLanes)===0)return null;if(r!==null&&a.child!==r.child)throw Error(t(153));if(a.child!==null){for(r=a.child,h=ua(r,r.pendingProps),a.child=h,h.return=a;r.sibling!==null;)r=r.sibling,h=h.sibling=ua(r,r.pendingProps),h.return=a;h.sibling=null}return a.child}function GP(r,a,h){switch(a.tag){case 3:W_(a),mc();break;case 5:c_(a);break;case 1:Bs(a.type)&&Zp(a);break;case 4:yv(a,a.stateNode.containerInfo);break;case 10:var g=a.type._context,v=a.memoizedProps.value;rt(ig,g._currentValue),g._currentValue=v;break;case 13:if(g=a.memoizedState,g!==null)return g.dehydrated!==null?(rt(mt,mt.current&1),a.flags|=128,null):(h&a.child.childLanes)!==0?q_(r,a,h):(rt(mt,mt.current&1),r=ti(r,a,h),r!==null?r.sibling:null);rt(mt,mt.current&1);break;case 19:if(g=(h&a.childLanes)!==0,(r.flags&128)!==0){if(g)return X_(r,a,h);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),rt(mt,mt.current),g)break;return null;case 22:case 23:return a.lanes=0,z_(r,a,h)}return ti(r,a,h)}var Y_,Bv,J_,Q_;Y_=function(r,a){for(var h=a.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===a)break;for(;h.sibling===null;){if(h.return===null||h.return===a)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Bv=function(){},J_=function(r,a,h,g){var v=r.memoizedProps;if(v!==g){r=a.stateNode,bo(xr.current);var x=null;switch(h){case"input":v=Xe(r,v),g=Xe(r,g),x=[];break;case"select":v=ne({},v,{value:void 0}),g=ne({},g,{value:void 0}),x=[];break;case"textarea":v=hh(r,v),g=hh(r,g),x=[];break;default:typeof v.onClick!="function"&&typeof g.onClick=="function"&&(r.onclick=Yp)}x0(h,g);var P;h=null;for(H in v)if(!g.hasOwnProperty(H)&&v.hasOwnProperty(H)&&v[H]!=null)if(H==="style"){var L=v[H];for(P in L)L.hasOwnProperty(P)&&(h||(h={}),h[P]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(n.hasOwnProperty(H)?x||(x=[]):(x=x||[]).push(H,null));for(H in g){var M=g[H];if(L=v!=null?v[H]:void 0,g.hasOwnProperty(H)&&M!==L&&(M!=null||L!=null))if(H==="style")if(L){for(P in L)!L.hasOwnProperty(P)||M&&M.hasOwnProperty(P)||(h||(h={}),h[P]="");for(P in M)M.hasOwnProperty(P)&&L[P]!==M[P]&&(h||(h={}),h[P]=M[P])}else h||(x||(x=[]),x.push(H,h)),h=M;else H==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,L=L?L.__html:void 0,M!=null&&L!==M&&(x=x||[]).push(H,M)):H==="children"?typeof M!="string"&&typeof M!="number"||(x=x||[]).push(H,""+M):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(n.hasOwnProperty(H)?(M!=null&&H==="onScroll"&&lt("scroll",r),x||L===M||(x=[])):(x=x||[]).push(H,M))}h&&(x=x||[]).push("style",h);var H=x;(a.updateQueue=H)&&(a.flags|=4)}},Q_=function(r,a,h,g){h!==g&&(a.flags|=4)};function Hh(r,a){if(!dt)switch(r.tailMode){case"hidden":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?r.tail=null:h.sibling=null;break;case"collapsed":h=r.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:g.sibling=null}}function ps(r){var a=r.alternate!==null&&r.alternate.child===r.child,h=0,g=0;if(a)for(var v=r.child;v!==null;)h|=v.lanes|v.childLanes,g|=v.subtreeFlags&14680064,g|=v.flags&14680064,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)h|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=g,r.childLanes=h,a}function qP(r,a,h){var g=a.pendingProps;switch(lv(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ps(a),null;case 1:return Bs(a.type)&&Qp(),ps(a),null;case 3:return g=a.stateNode,xc(),ct($s),ct(ds),bv(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(r===null||r.child===null)&&(ng(a)?a.flags|=4:r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,qn!==null&&(Jv(qn),qn=null))),Bv(r,a),ps(a),null;case 5:wv(a);var v=bo(Fh.current);if(h=a.type,r!==null&&a.stateNode!=null)J_(r,a,h,g,v),r.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!g){if(a.stateNode===null)throw Error(t(166));return ps(a),null}if(r=bo(xr.current),ng(a)){g=a.stateNode,h=a.type;var x=a.memoizedProps;switch(g[wr]=a,g[Lh]=x,r=(a.mode&1)!==0,h){case"dialog":lt("cancel",g),lt("close",g);break;case"iframe":case"object":case"embed":lt("load",g);break;case"video":case"audio":for(v=0;v<Nh.length;v++)lt(Nh[v],g);break;case"source":lt("error",g);break;case"img":case"image":case"link":lt("error",g),lt("load",g);break;case"details":lt("toggle",g);break;case"input":St(g,x),lt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!x.multiple},lt("invalid",g);break;case"textarea":Ep(g,x),lt("invalid",g)}x0(h,x),v=null;for(var P in x)if(x.hasOwnProperty(P)){var L=x[P];P==="children"?typeof L=="string"?g.textContent!==L&&(x.suppressHydrationWarning!==!0&&Xp(g.textContent,L,r),v=["children",L]):typeof L=="number"&&g.textContent!==""+L&&(x.suppressHydrationWarning!==!0&&Xp(g.textContent,L,r),v=["children",""+L]):n.hasOwnProperty(P)&&L!=null&&P==="onScroll"&&lt("scroll",g)}switch(h){case"input":Fs(g),Wr(g,x,!0);break;case"textarea":Fs(g),Cp(g);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(g.onclick=Yp)}g=v,a.updateQueue=g,g!==null&&(a.flags|=4)}else{P=v.nodeType===9?v:v.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Pp(h)),r==="http://www.w3.org/1999/xhtml"?h==="script"?(r=P.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof g.is=="string"?r=P.createElement(h,{is:g.is}):(r=P.createElement(h),h==="select"&&(P=r,g.multiple?P.multiple=!0:g.size&&(P.size=g.size))):r=P.createElementNS(r,h),r[wr]=a,r[Lh]=g,Y_(r,a,!1,!1),a.stateNode=r;e:{switch(P=b0(h,g),h){case"dialog":lt("cancel",r),lt("close",r),v=g;break;case"iframe":case"object":case"embed":lt("load",r),v=g;break;case"video":case"audio":for(v=0;v<Nh.length;v++)lt(Nh[v],r);v=g;break;case"source":lt("error",r),v=g;break;case"img":case"image":case"link":lt("error",r),lt("load",r),v=g;break;case"details":lt("toggle",r),v=g;break;case"input":St(r,g),v=Xe(r,g),lt("invalid",r);break;case"option":v=g;break;case"select":r._wrapperState={wasMultiple:!!g.multiple},v=ne({},g,{value:void 0}),lt("invalid",r);break;case"textarea":Ep(r,g),v=hh(r,g),lt("invalid",r);break;default:v=g}x0(h,v),L=v;for(x in L)if(L.hasOwnProperty(x)){var M=L[x];x==="style"?Ux(r,M):x==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&po(r,M)):x==="children"?typeof M=="string"?(h!=="textarea"||M!=="")&&Kr(r,M):typeof M=="number"&&Kr(r,""+M):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(n.hasOwnProperty(x)?M!=null&&x==="onScroll"&&lt("scroll",r):M!=null&&N(r,x,M,P))}switch(h){case"input":Fs(r),Wr(r,g,!1);break;case"textarea":Fs(r),Cp(r);break;case"option":g.value!=null&&r.setAttribute("value",""+Le(g.value));break;case"select":r.multiple=!!g.multiple,x=g.value,x!=null?Vn(r,!!g.multiple,x,!1):g.defaultValue!=null&&Vn(r,!!g.multiple,g.defaultValue,!0);break;default:typeof v.onClick=="function"&&(r.onclick=Yp)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return ps(a),null;case 6:if(r&&a.stateNode!=null)Q_(r,a,r.memoizedProps,g);else{if(typeof g!="string"&&a.stateNode===null)throw Error(t(166));if(h=bo(Fh.current),bo(xr.current),ng(a)){if(g=a.stateNode,h=a.memoizedProps,g[wr]=a,(x=g.nodeValue!==h)&&(r=Zs,r!==null))switch(r.tag){case 3:Xp(g.nodeValue,h,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Xp(g.nodeValue,h,(r.mode&1)!==0)}x&&(a.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[wr]=a,a.stateNode=g}return ps(a),null;case 13:if(ct(mt),g=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(dt&&en!==null&&(a.mode&1)!==0&&(a.flags&128)===0)t_(),mc(),a.flags|=98560,x=!1;else if(x=ng(a),g!==null&&g.dehydrated!==null){if(r===null){if(!x)throw Error(t(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[wr]=a}else mc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ps(a),x=!1}else qn!==null&&(Jv(qn),qn=null),x=!0;if(!x)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=h,a):(g=g!==null,g!==(r!==null&&r.memoizedState!==null)&&g&&(a.child.flags|=8192,(a.mode&1)!==0&&(r===null||(mt.current&1)!==0?Ft===0&&(Ft=3):ey())),a.updateQueue!==null&&(a.flags|=4),ps(a),null);case 4:return xc(),Bv(r,a),r===null&&Rh(a.stateNode.containerInfo),ps(a),null;case 10:return pv(a.type._context),ps(a),null;case 17:return Bs(a.type)&&Qp(),ps(a),null;case 19:if(ct(mt),x=a.memoizedState,x===null)return ps(a),null;if(g=(a.flags&128)!==0,P=x.rendering,P===null)if(g)Hh(x,!1);else{if(Ft!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(P=cg(r),P!==null){for(a.flags|=128,Hh(x,!1),g=P.updateQueue,g!==null&&(a.updateQueue=g,a.flags|=4),a.subtreeFlags=0,g=h,h=a.child;h!==null;)x=h,r=g,x.flags&=14680066,P=x.alternate,P===null?(x.childLanes=0,x.lanes=r,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=P.childLanes,x.lanes=P.lanes,x.child=P.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=P.memoizedProps,x.memoizedState=P.memoizedState,x.updateQueue=P.updateQueue,x.type=P.type,r=P.dependencies,x.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),h=h.sibling;return rt(mt,mt.current&1|2),a.child}r=r.sibling}x.tail!==null&&At()>Ac&&(a.flags|=128,g=!0,Hh(x,!1),a.lanes=4194304)}else{if(!g)if(r=cg(P),r!==null){if(a.flags|=128,g=!0,h=r.updateQueue,h!==null&&(a.updateQueue=h,a.flags|=4),Hh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!P.alternate&&!dt)return ps(a),null}else 2*At()-x.renderingStartTime>Ac&&h!==1073741824&&(a.flags|=128,g=!0,Hh(x,!1),a.lanes=4194304);x.isBackwards?(P.sibling=a.child,a.child=P):(h=x.last,h!==null?h.sibling=P:a.child=P,x.last=P)}return x.tail!==null?(a=x.tail,x.rendering=a,x.tail=a.sibling,x.renderingStartTime=At(),a.sibling=null,h=mt.current,rt(mt,g?h&1|2:h&1),a):(ps(a),null);case 22:case 23:return Zv(),g=a.memoizedState!==null,r!==null&&r.memoizedState!==null!==g&&(a.flags|=8192),g&&(a.mode&1)!==0?(tn&1073741824)!==0&&(ps(a),a.subtreeFlags&6&&(a.flags|=8192)):ps(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function KP(r,a){switch(lv(a),a.tag){case 1:return Bs(a.type)&&Qp(),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return xc(),ct($s),ct(ds),bv(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 5:return wv(a),null;case 13:if(ct(mt),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(t(340));mc()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return ct(mt),null;case 4:return xc(),null;case 10:return pv(a.type._context),null;case 22:case 23:return Zv(),null;case 24:return null;default:return null}}var yg=!1,gs=!1,XP=typeof WeakSet=="function"?WeakSet:Set,ue=null;function _c(r,a){var h=r.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){xt(r,a,g)}else h.current=null}function Uv(r,a,h){try{h()}catch(g){xt(r,a,g)}}var Z_=!1;function YP(r,a){if(Z0=Fp,r=Rb(),W0(r)){if("selectionStart"in r)var h={start:r.selectionStart,end:r.selectionEnd};else e:{h=(h=r.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var v=g.anchorOffset,x=g.focusNode;g=g.focusOffset;try{h.nodeType,x.nodeType}catch{h=null;break e}var P=0,L=-1,M=-1,H=0,q=0,J=r,G=null;t:for(;;){for(var ie;J!==h||v!==0&&J.nodeType!==3||(L=P+v),J!==x||g!==0&&J.nodeType!==3||(M=P+g),J.nodeType===3&&(P+=J.nodeValue.length),(ie=J.firstChild)!==null;)G=J,J=ie;for(;;){if(J===r)break t;if(G===h&&++H===v&&(L=P),G===x&&++q===g&&(M=P),(ie=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=ie}h=L===-1||M===-1?null:{start:L,end:M}}else h=null}h=h||{start:0,end:0}}else h=null;for(ev={focusedElem:r,selectionRange:h},Fp=!1,ue=a;ue!==null;)if(a=ue,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,ue=r;else for(;ue!==null;){a=ue;try{var de=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var fe=de.memoizedProps,Et=de.memoizedState,U=a.stateNode,O=U.getSnapshotBeforeUpdate(a.elementType===a.type?fe:Kn(a.type,fe),Et);U.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var z=a.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){xt(a,a.return,se)}if(r=a.sibling,r!==null){r.return=a.return,ue=r;break}ue=a.return}return de=Z_,Z_=!1,de}function Vh(r,a,h){var g=a.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var v=g=g.next;do{if((v.tag&r)===r){var x=v.destroy;v.destroy=void 0,x!==void 0&&Uv(a,h,x)}v=v.next}while(v!==g)}}function wg(r,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var h=a=a.next;do{if((h.tag&r)===r){var g=h.create;h.destroy=g()}h=h.next}while(h!==a)}}function zv(r){var a=r.ref;if(a!==null){var h=r.stateNode;switch(r.tag){case 5:r=h;break;default:r=h}typeof a=="function"?a(r):a.current=r}}function e1(r){var a=r.alternate;a!==null&&(r.alternate=null,e1(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&(delete a[wr],delete a[Lh],delete a[rv],delete a[jP],delete a[LP])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function t1(r){return r.tag===5||r.tag===3||r.tag===4}function s1(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||t1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Hv(r,a,h){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?h.nodeType===8?h.parentNode.insertBefore(r,a):h.insertBefore(r,a):(h.nodeType===8?(a=h.parentNode,a.insertBefore(r,h)):(a=h,a.appendChild(r)),h=h._reactRootContainer,h!=null||a.onclick!==null||(a.onclick=Yp));else if(g!==4&&(r=r.child,r!==null))for(Hv(r,a,h),r=r.sibling;r!==null;)Hv(r,a,h),r=r.sibling}function Vv(r,a,h){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?h.insertBefore(r,a):h.appendChild(r);else if(g!==4&&(r=r.child,r!==null))for(Vv(r,a,h),r=r.sibling;r!==null;)Vv(r,a,h),r=r.sibling}var ss=null,Xn=!1;function ia(r,a,h){for(h=h.child;h!==null;)n1(r,a,h),h=h.sibling}function n1(r,a,h){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(jp,h)}catch{}switch(h.tag){case 5:gs||_c(h,a);case 6:var g=ss,v=Xn;ss=null,ia(r,a,h),ss=g,Xn=v,ss!==null&&(Xn?(r=ss,h=h.stateNode,r.nodeType===8?r.parentNode.removeChild(h):r.removeChild(h)):ss.removeChild(h.stateNode));break;case 18:ss!==null&&(Xn?(r=ss,h=h.stateNode,r.nodeType===8?nv(r.parentNode,h):r.nodeType===1&&nv(r,h),_h(r)):nv(ss,h.stateNode));break;case 4:g=ss,v=Xn,ss=h.stateNode.containerInfo,Xn=!0,ia(r,a,h),ss=g,Xn=v;break;case 0:case 11:case 14:case 15:if(!gs&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){v=g=g.next;do{var x=v,P=x.destroy;x=x.tag,P!==void 0&&((x&2)!==0||(x&4)!==0)&&Uv(h,a,P),v=v.next}while(v!==g)}ia(r,a,h);break;case 1:if(!gs&&(_c(h,a),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(L){xt(h,a,L)}ia(r,a,h);break;case 21:ia(r,a,h);break;case 22:h.mode&1?(gs=(g=gs)||h.memoizedState!==null,ia(r,a,h),gs=g):ia(r,a,h);break;default:ia(r,a,h)}}function r1(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var h=r.stateNode;h===null&&(h=r.stateNode=new XP),a.forEach(function(g){var v=iT.bind(null,r,g);h.has(g)||(h.add(g),g.then(v,v))})}}function Yn(r,a){var h=a.deletions;if(h!==null)for(var g=0;g<h.length;g++){var v=h[g];try{var x=r,P=a,L=P;e:for(;L!==null;){switch(L.tag){case 5:ss=L.stateNode,Xn=!1;break e;case 3:ss=L.stateNode.containerInfo,Xn=!0;break e;case 4:ss=L.stateNode.containerInfo,Xn=!0;break e}L=L.return}if(ss===null)throw Error(t(160));n1(x,P,v),ss=null,Xn=!1;var M=v.alternate;M!==null&&(M.return=null),v.return=null}catch(H){xt(v,a,H)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)i1(a,r),a=a.sibling}function i1(r,a){var h=r.alternate,g=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Yn(a,r),_r(r),g&4){try{Vh(3,r,r.return),wg(3,r)}catch(fe){xt(r,r.return,fe)}try{Vh(5,r,r.return)}catch(fe){xt(r,r.return,fe)}}break;case 1:Yn(a,r),_r(r),g&512&&h!==null&&_c(h,h.return);break;case 5:if(Yn(a,r),_r(r),g&512&&h!==null&&_c(h,h.return),r.flags&32){var v=r.stateNode;try{Kr(v,"")}catch(fe){xt(r,r.return,fe)}}if(g&4&&(v=r.stateNode,v!=null)){var x=r.memoizedProps,P=h!==null?h.memoizedProps:x,L=r.type,M=r.updateQueue;if(r.updateQueue=null,M!==null)try{L==="input"&&x.type==="radio"&&x.name!=null&&ht(v,x),b0(L,P);var H=b0(L,x);for(P=0;P<M.length;P+=2){var q=M[P],J=M[P+1];q==="style"?Ux(v,J):q==="dangerouslySetInnerHTML"?po(v,J):q==="children"?Kr(v,J):N(v,q,J,H)}switch(L){case"input":_n(v,x);break;case"textarea":kp(v,x);break;case"select":var G=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!x.multiple;var ie=x.value;ie!=null?Vn(v,!!x.multiple,ie,!1):G!==!!x.multiple&&(x.defaultValue!=null?Vn(v,!!x.multiple,x.defaultValue,!0):Vn(v,!!x.multiple,x.multiple?[]:"",!1))}v[Lh]=x}catch(fe){xt(r,r.return,fe)}}break;case 6:if(Yn(a,r),_r(r),g&4){if(r.stateNode===null)throw Error(t(162));v=r.stateNode,x=r.memoizedProps;try{v.nodeValue=x}catch(fe){xt(r,r.return,fe)}}break;case 3:if(Yn(a,r),_r(r),g&4&&h!==null&&h.memoizedState.isDehydrated)try{_h(a.containerInfo)}catch(fe){xt(r,r.return,fe)}break;case 4:Yn(a,r),_r(r);break;case 13:Yn(a,r),_r(r),v=r.child,v.flags&8192&&(x=v.memoizedState!==null,v.stateNode.isHidden=x,!x||v.alternate!==null&&v.alternate.memoizedState!==null||(qv=At())),g&4&&r1(r);break;case 22:if(q=h!==null&&h.memoizedState!==null,r.mode&1?(gs=(H=gs)||q,Yn(a,r),gs=H):Yn(a,r),_r(r),g&8192){if(H=r.memoizedState!==null,(r.stateNode.isHidden=H)&&!q&&(r.mode&1)!==0)for(ue=r,q=r.child;q!==null;){for(J=ue=q;ue!==null;){switch(G=ue,ie=G.child,G.tag){case 0:case 11:case 14:case 15:Vh(4,G,G.return);break;case 1:_c(G,G.return);var de=G.stateNode;if(typeof de.componentWillUnmount=="function"){g=G,h=G.return;try{a=g,de.props=a.memoizedProps,de.state=a.memoizedState,de.componentWillUnmount()}catch(fe){xt(g,h,fe)}}break;case 5:_c(G,G.return);break;case 22:if(G.memoizedState!==null){l1(J);continue}}ie!==null?(ie.return=G,ue=ie):l1(J)}q=q.sibling}e:for(q=null,J=r;;){if(J.tag===5){if(q===null){q=J;try{v=J.stateNode,H?(x=v.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(L=J.stateNode,M=J.memoizedProps.style,P=M!=null&&M.hasOwnProperty("display")?M.display:null,L.style.display=Bx("display",P))}catch(fe){xt(r,r.return,fe)}}}else if(J.tag===6){if(q===null)try{J.stateNode.nodeValue=H?"":J.memoizedProps}catch(fe){xt(r,r.return,fe)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===r)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===r)break e;for(;J.sibling===null;){if(J.return===null||J.return===r)break e;q===J&&(q=null),J=J.return}q===J&&(q=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Yn(a,r),_r(r),g&4&&r1(r);break;case 21:break;default:Yn(a,r),_r(r)}}function _r(r){var a=r.flags;if(a&2){try{e:{for(var h=r.return;h!==null;){if(t1(h)){var g=h;break e}h=h.return}throw Error(t(160))}switch(g.tag){case 5:var v=g.stateNode;g.flags&32&&(Kr(v,""),g.flags&=-33);var x=s1(r);Vv(r,x,v);break;case 3:case 4:var P=g.stateNode.containerInfo,L=s1(r);Hv(r,L,P);break;default:throw Error(t(161))}}catch(M){xt(r,r.return,M)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function JP(r,a,h){ue=r,a1(r)}function a1(r,a,h){for(var g=(r.mode&1)!==0;ue!==null;){var v=ue,x=v.child;if(v.tag===22&&g){var P=v.memoizedState!==null||yg;if(!P){var L=v.alternate,M=L!==null&&L.memoizedState!==null||gs;L=yg;var H=gs;if(yg=P,(gs=M)&&!H)for(ue=v;ue!==null;)P=ue,M=P.child,P.tag===22&&P.memoizedState!==null?c1(v):M!==null?(M.return=P,ue=M):c1(v);for(;x!==null;)ue=x,a1(x),x=x.sibling;ue=v,yg=L,gs=H}o1(r)}else(v.subtreeFlags&8772)!==0&&x!==null?(x.return=v,ue=x):o1(r)}}function o1(r){for(;ue!==null;){var a=ue;if((a.flags&8772)!==0){var h=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:gs||wg(5,a);break;case 1:var g=a.stateNode;if(a.flags&4&&!gs)if(h===null)g.componentDidMount();else{var v=a.elementType===a.type?h.memoizedProps:Kn(a.type,h.memoizedProps);g.componentDidUpdate(v,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var x=a.updateQueue;x!==null&&l_(a,x,g);break;case 3:var P=a.updateQueue;if(P!==null){if(h=null,a.child!==null)switch(a.child.tag){case 5:h=a.child.stateNode;break;case 1:h=a.child.stateNode}l_(a,P,h)}break;case 5:var L=a.stateNode;if(h===null&&a.flags&4){h=L;var M=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&h.focus();break;case"img":M.src&&(h.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var H=a.alternate;if(H!==null){var q=H.memoizedState;if(q!==null){var J=q.dehydrated;J!==null&&_h(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}gs||a.flags&512&&zv(a)}catch(G){xt(a,a.return,G)}}if(a===r){ue=null;break}if(h=a.sibling,h!==null){h.return=a.return,ue=h;break}ue=a.return}}function l1(r){for(;ue!==null;){var a=ue;if(a===r){ue=null;break}var h=a.sibling;if(h!==null){h.return=a.return,ue=h;break}ue=a.return}}function c1(r){for(;ue!==null;){var a=ue;try{switch(a.tag){case 0:case 11:case 15:var h=a.return;try{wg(4,a)}catch(M){xt(a,h,M)}break;case 1:var g=a.stateNode;if(typeof g.componentDidMount=="function"){var v=a.return;try{g.componentDidMount()}catch(M){xt(a,v,M)}}var x=a.return;try{zv(a)}catch(M){xt(a,x,M)}break;case 5:var P=a.return;try{zv(a)}catch(M){xt(a,P,M)}}}catch(M){xt(a,a.return,M)}if(a===r){ue=null;break}var L=a.sibling;if(L!==null){L.return=a.return,ue=L;break}ue=a.return}}var QP=Math.ceil,xg=j.ReactCurrentDispatcher,Wv=j.ReactCurrentOwner,Cn=j.ReactCurrentBatchConfig,Ve=0,Wt=null,Lt=null,ns=0,tn=0,Sc=ea(0),Ft=0,Wh=null,So=0,bg=0,Gv=0,Gh=null,zs=null,qv=0,Ac=1/0,si=null,_g=!1,Kv=null,aa=null,Sg=!1,oa=null,Ag=0,qh=0,Xv=null,Eg=-1,kg=0;function ks(){return(Ve&6)!==0?At():Eg!==-1?Eg:Eg=At()}function la(r){return(r.mode&1)===0?1:(Ve&2)!==0&&ns!==0?ns&-ns:MP.transition!==null?(kg===0&&(kg=sb()),kg):(r=Je,r!==0||(r=window.event,r=r===void 0?16:hb(r.type)),r)}function Jn(r,a,h,g){if(50<qh)throw qh=0,Xv=null,Error(t(185));vh(r,h,g),((Ve&2)===0||r!==Wt)&&(r===Wt&&((Ve&2)===0&&(bg|=h),Ft===4&&ca(r,ns)),Hs(r,g),h===1&&Ve===0&&(a.mode&1)===0&&(Ac=At()+500,eg&&sa()))}function Hs(r,a){var h=r.callbackNode;MC(r,a);var g=Mp(r,r===Wt?ns:0);if(g===0)h!==null&&Zx(h),r.callbackNode=null,r.callbackPriority=0;else if(a=g&-g,r.callbackPriority!==a){if(h!=null&&Zx(h),a===1)r.tag===0?IP(h1.bind(null,r)):Yb(h1.bind(null,r)),NP(function(){(Ve&6)===0&&sa()}),h=null;else{switch(nb(g)){case 1:h=P0;break;case 4:h=eb;break;case 16:h=Rp;break;case 536870912:h=tb;break;default:h=Rp}h=w1(h,u1.bind(null,r))}r.callbackPriority=a,r.callbackNode=h}}function u1(r,a){if(Eg=-1,kg=0,(Ve&6)!==0)throw Error(t(327));var h=r.callbackNode;if(Ec()&&r.callbackNode!==h)return null;var g=Mp(r,r===Wt?ns:0);if(g===0)return null;if((g&30)!==0||(g&r.expiredLanes)!==0||a)a=Cg(r,g);else{a=g;var v=Ve;Ve|=2;var x=f1();(Wt!==r||ns!==a)&&(si=null,Ac=At()+500,Eo(r,a));do try{tT();break}catch(L){d1(r,L)}while(!0);fv(),xg.current=x,Ve=v,Lt!==null?a=0:(Wt=null,ns=0,a=Ft)}if(a!==0){if(a===2&&(v=T0(r),v!==0&&(g=v,a=Yv(r,v))),a===1)throw h=Wh,Eo(r,0),ca(r,g),Hs(r,At()),h;if(a===6)ca(r,g);else{if(v=r.current.alternate,(g&30)===0&&!ZP(v)&&(a=Cg(r,g),a===2&&(x=T0(r),x!==0&&(g=x,a=Yv(r,x))),a===1))throw h=Wh,Eo(r,0),ca(r,g),Hs(r,At()),h;switch(r.finishedWork=v,r.finishedLanes=g,a){case 0:case 1:throw Error(t(345));case 2:ko(r,zs,si);break;case 3:if(ca(r,g),(g&130023424)===g&&(a=qv+500-At(),10<a)){if(Mp(r,0)!==0)break;if(v=r.suspendedLanes,(v&g)!==g){ks(),r.pingedLanes|=r.suspendedLanes&v;break}r.timeoutHandle=sv(ko.bind(null,r,zs,si),a);break}ko(r,zs,si);break;case 4:if(ca(r,g),(g&4194240)===g)break;for(a=r.eventTimes,v=-1;0<g;){var P=31-Wn(g);x=1<<P,P=a[P],P>v&&(v=P),g&=~x}if(g=v,g=At()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*QP(g/1960))-g,10<g){r.timeoutHandle=sv(ko.bind(null,r,zs,si),g);break}ko(r,zs,si);break;case 5:ko(r,zs,si);break;default:throw Error(t(329))}}}return Hs(r,At()),r.callbackNode===h?u1.bind(null,r):null}function Yv(r,a){var h=Gh;return r.current.memoizedState.isDehydrated&&(Eo(r,a).flags|=256),r=Cg(r,a),r!==2&&(a=zs,zs=h,a!==null&&Jv(a)),r}function Jv(r){zs===null?zs=r:zs.push.apply(zs,r)}function ZP(r){for(var a=r;;){if(a.flags&16384){var h=a.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var v=h[g],x=v.getSnapshot;v=v.value;try{if(!Gn(x(),v))return!1}catch{return!1}}}if(h=a.child,a.subtreeFlags&16384&&h!==null)h.return=a,a=h;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ca(r,a){for(a&=~Gv,a&=~bg,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var h=31-Wn(a),g=1<<h;r[h]=-1,a&=~g}}function h1(r){if((Ve&6)!==0)throw Error(t(327));Ec();var a=Mp(r,0);if((a&1)===0)return Hs(r,At()),null;var h=Cg(r,a);if(r.tag!==0&&h===2){var g=T0(r);g!==0&&(a=g,h=Yv(r,g))}if(h===1)throw h=Wh,Eo(r,0),ca(r,a),Hs(r,At()),h;if(h===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=a,ko(r,zs,si),Hs(r,At()),null}function Qv(r,a){var h=Ve;Ve|=1;try{return r(a)}finally{Ve=h,Ve===0&&(Ac=At()+500,eg&&sa())}}function Ao(r){oa!==null&&oa.tag===0&&(Ve&6)===0&&Ec();var a=Ve;Ve|=1;var h=Cn.transition,g=Je;try{if(Cn.transition=null,Je=1,r)return r()}finally{Je=g,Cn.transition=h,Ve=a,(Ve&6)===0&&sa()}}function Zv(){tn=Sc.current,ct(Sc)}function Eo(r,a){r.finishedWork=null,r.finishedLanes=0;var h=r.timeoutHandle;if(h!==-1&&(r.timeoutHandle=-1,TP(h)),Lt!==null)for(h=Lt.return;h!==null;){var g=h;switch(lv(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Qp();break;case 3:xc(),ct($s),ct(ds),bv();break;case 5:wv(g);break;case 4:xc();break;case 13:ct(mt);break;case 19:ct(mt);break;case 10:pv(g.type._context);break;case 22:case 23:Zv()}h=h.return}if(Wt=r,Lt=r=ua(r.current,null),ns=tn=a,Ft=0,Wh=null,Gv=bg=So=0,zs=Gh=null,xo!==null){for(a=0;a<xo.length;a++)if(h=xo[a],g=h.interleaved,g!==null){h.interleaved=null;var v=g.next,x=h.pending;if(x!==null){var P=x.next;x.next=v,g.next=P}h.pending=g}xo=null}return r}function d1(r,a){do{var h=Lt;try{if(fv(),ug.current=pg,hg){for(var g=vt.memoizedState;g!==null;){var v=g.queue;v!==null&&(v.pending=null),g=g.next}hg=!1}if(_o=0,Vt=Ot=vt=null,$h=!1,Bh=0,Wv.current=null,h===null||h.return===null){Ft=1,Wh=a,Lt=null;break}e:{var x=r,P=h.return,L=h,M=a;if(a=ns,L.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var H=M,q=L,J=q.tag;if((q.mode&1)===0&&(J===0||J===11||J===15)){var G=q.alternate;G?(q.updateQueue=G.updateQueue,q.memoizedState=G.memoizedState,q.lanes=G.lanes):(q.updateQueue=null,q.memoizedState=null)}var ie=O_(P);if(ie!==null){ie.flags&=-257,F_(ie,P,L,x,a),ie.mode&1&&D_(x,H,a),a=ie,M=H;var de=a.updateQueue;if(de===null){var fe=new Set;fe.add(M),a.updateQueue=fe}else de.add(M);break e}else{if((a&1)===0){D_(x,H,a),ey();break e}M=Error(t(426))}}else if(dt&&L.mode&1){var Et=O_(P);if(Et!==null){(Et.flags&65536)===0&&(Et.flags|=256),F_(Et,P,L,x,a),hv(bc(M,L));break e}}x=M=bc(M,L),Ft!==4&&(Ft=2),Gh===null?Gh=[x]:Gh.push(x),x=P;do{switch(x.tag){case 3:x.flags|=65536,a&=-a,x.lanes|=a;var U=I_(x,M,a);o_(x,U);break e;case 1:L=M;var O=x.type,z=x.stateNode;if((x.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(aa===null||!aa.has(z)))){x.flags|=65536,a&=-a,x.lanes|=a;var se=M_(x,L,a);o_(x,se);break e}}x=x.return}while(x!==null)}g1(h)}catch(ge){a=ge,Lt===h&&h!==null&&(Lt=h=h.return);continue}break}while(!0)}function f1(){var r=xg.current;return xg.current=pg,r===null?pg:r}function ey(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Wt===null||(So&268435455)===0&&(bg&268435455)===0||ca(Wt,ns)}function Cg(r,a){var h=Ve;Ve|=2;var g=f1();(Wt!==r||ns!==a)&&(si=null,Eo(r,a));do try{eT();break}catch(v){d1(r,v)}while(!0);if(fv(),Ve=h,xg.current=g,Lt!==null)throw Error(t(261));return Wt=null,ns=0,Ft}function eT(){for(;Lt!==null;)p1(Lt)}function tT(){for(;Lt!==null&&!kC();)p1(Lt)}function p1(r){var a=y1(r.alternate,r,tn);r.memoizedProps=r.pendingProps,a===null?g1(r):Lt=a,Wv.current=null}function g1(r){var a=r;do{var h=a.alternate;if(r=a.return,(a.flags&32768)===0){if(h=qP(h,a,tn),h!==null){Lt=h;return}}else{if(h=KP(h,a),h!==null){h.flags&=32767,Lt=h;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Ft=6,Lt=null;return}}if(a=a.sibling,a!==null){Lt=a;return}Lt=a=r}while(a!==null);Ft===0&&(Ft=5)}function ko(r,a,h){var g=Je,v=Cn.transition;try{Cn.transition=null,Je=1,sT(r,a,h,g)}finally{Cn.transition=v,Je=g}return null}function sT(r,a,h,g){do Ec();while(oa!==null);if((Ve&6)!==0)throw Error(t(327));h=r.finishedWork;var v=r.finishedLanes;if(h===null)return null;if(r.finishedWork=null,r.finishedLanes=0,h===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var x=h.lanes|h.childLanes;if(DC(r,x),r===Wt&&(Lt=Wt=null,ns=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Sg||(Sg=!0,w1(Rp,function(){return Ec(),null})),x=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||x){x=Cn.transition,Cn.transition=null;var P=Je;Je=1;var L=Ve;Ve|=4,Wv.current=null,YP(r,h),i1(h,r),_P(ev),Fp=!!Z0,ev=Z0=null,r.current=h,JP(h),CC(),Ve=L,Je=P,Cn.transition=x}else r.current=h;if(Sg&&(Sg=!1,oa=r,Ag=v),x=r.pendingLanes,x===0&&(aa=null),NC(h.stateNode),Hs(r,At()),a!==null)for(g=r.onRecoverableError,h=0;h<a.length;h++)v=a[h],g(v.value,{componentStack:v.stack,digest:v.digest});if(_g)throw _g=!1,r=Kv,Kv=null,r;return(Ag&1)!==0&&r.tag!==0&&Ec(),x=r.pendingLanes,(x&1)!==0?r===Xv?qh++:(qh=0,Xv=r):qh=0,sa(),null}function Ec(){if(oa!==null){var r=nb(Ag),a=Cn.transition,h=Je;try{if(Cn.transition=null,Je=16>r?16:r,oa===null)var g=!1;else{if(r=oa,oa=null,Ag=0,(Ve&6)!==0)throw Error(t(331));var v=Ve;for(Ve|=4,ue=r.current;ue!==null;){var x=ue,P=x.child;if((ue.flags&16)!==0){var L=x.deletions;if(L!==null){for(var M=0;M<L.length;M++){var H=L[M];for(ue=H;ue!==null;){var q=ue;switch(q.tag){case 0:case 11:case 15:Vh(8,q,x)}var J=q.child;if(J!==null)J.return=q,ue=J;else for(;ue!==null;){q=ue;var G=q.sibling,ie=q.return;if(e1(q),q===H){ue=null;break}if(G!==null){G.return=ie,ue=G;break}ue=ie}}}var de=x.alternate;if(de!==null){var fe=de.child;if(fe!==null){de.child=null;do{var Et=fe.sibling;fe.sibling=null,fe=Et}while(fe!==null)}}ue=x}}if((x.subtreeFlags&2064)!==0&&P!==null)P.return=x,ue=P;else e:for(;ue!==null;){if(x=ue,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:Vh(9,x,x.return)}var U=x.sibling;if(U!==null){U.return=x.return,ue=U;break e}ue=x.return}}var O=r.current;for(ue=O;ue!==null;){P=ue;var z=P.child;if((P.subtreeFlags&2064)!==0&&z!==null)z.return=P,ue=z;else e:for(P=O;ue!==null;){if(L=ue,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:wg(9,L)}}catch(ge){xt(L,L.return,ge)}if(L===P){ue=null;break e}var se=L.sibling;if(se!==null){se.return=L.return,ue=se;break e}ue=L.return}}if(Ve=v,sa(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(jp,r)}catch{}g=!0}return g}finally{Je=h,Cn.transition=a}}return!1}function m1(r,a,h){a=bc(h,a),a=I_(r,a,1),r=ra(r,a,1),a=ks(),r!==null&&(vh(r,1,a),Hs(r,a))}function xt(r,a,h){if(r.tag===3)m1(r,r,h);else for(;a!==null;){if(a.tag===3){m1(a,r,h);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(aa===null||!aa.has(g))){r=bc(h,r),r=M_(a,r,1),a=ra(a,r,1),r=ks(),a!==null&&(vh(a,1,r),Hs(a,r));break}}a=a.return}}function nT(r,a,h){var g=r.pingCache;g!==null&&g.delete(a),a=ks(),r.pingedLanes|=r.suspendedLanes&h,Wt===r&&(ns&h)===h&&(Ft===4||Ft===3&&(ns&130023424)===ns&&500>At()-qv?Eo(r,0):Gv|=h),Hs(r,a)}function v1(r,a){a===0&&((r.mode&1)===0?a=1:(a=Ip,Ip<<=1,(Ip&130023424)===0&&(Ip=4194304)));var h=ks();r=Zr(r,a),r!==null&&(vh(r,a,h),Hs(r,h))}function rT(r){var a=r.memoizedState,h=0;a!==null&&(h=a.retryLane),v1(r,h)}function iT(r,a){var h=0;switch(r.tag){case 13:var g=r.stateNode,v=r.memoizedState;v!==null&&(h=v.retryLane);break;case 19:g=r.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(a),v1(r,h)}var y1;y1=function(r,a,h){if(r!==null)if(r.memoizedProps!==a.pendingProps||$s.current)Us=!0;else{if((r.lanes&h)===0&&(a.flags&128)===0)return Us=!1,GP(r,a,h);Us=(r.flags&131072)!==0}else Us=!1,dt&&(a.flags&1048576)!==0&&Jb(a,sg,a.index);switch(a.lanes=0,a.tag){case 2:var g=a.type;vg(r,a),r=a.pendingProps;var v=fc(a,ds.current);wc(a,h),v=Av(null,a,g,r,v,h);var x=Ev();return a.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Bs(g)?(x=!0,Zp(a)):x=!1,a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,vv(a),v.updater=gg,a.stateNode=v,v._reactInternals=a,Rv(a,g,r,h),a=Mv(null,a,g,!0,x,h)):(a.tag=0,dt&&x&&ov(a),Es(null,a,v,h),a=a.child),a;case 16:g=a.elementType;e:{switch(vg(r,a),r=a.pendingProps,v=g._init,g=v(g._payload),a.type=g,v=a.tag=oT(g),r=Kn(g,r),v){case 0:a=Iv(null,a,g,r,h);break e;case 1:a=V_(null,a,g,r,h);break e;case 11:a=$_(null,a,g,r,h);break e;case 14:a=B_(null,a,g,Kn(g.type,r),h);break e}throw Error(t(306,g,""))}return a;case 0:return g=a.type,v=a.pendingProps,v=a.elementType===g?v:Kn(g,v),Iv(r,a,g,v,h);case 1:return g=a.type,v=a.pendingProps,v=a.elementType===g?v:Kn(g,v),V_(r,a,g,v,h);case 3:e:{if(W_(a),r===null)throw Error(t(387));g=a.pendingProps,x=a.memoizedState,v=x.element,a_(r,a),lg(a,g,null,h);var P=a.memoizedState;if(g=P.element,x.isDehydrated)if(x={element:g,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){v=bc(Error(t(423)),a),a=G_(r,a,g,h,v);break e}else if(g!==v){v=bc(Error(t(424)),a),a=G_(r,a,g,h,v);break e}else for(en=Zi(a.stateNode.containerInfo.firstChild),Zs=a,dt=!0,qn=null,h=r_(a,null,g,h),a.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(mc(),g===v){a=ti(r,a,h);break e}Es(r,a,g,h)}a=a.child}return a;case 5:return c_(a),r===null&&uv(a),g=a.type,v=a.pendingProps,x=r!==null?r.memoizedProps:null,P=v.children,tv(g,v)?P=null:x!==null&&tv(g,x)&&(a.flags|=32),H_(r,a),Es(r,a,P,h),a.child;case 6:return r===null&&uv(a),null;case 13:return q_(r,a,h);case 4:return yv(a,a.stateNode.containerInfo),g=a.pendingProps,r===null?a.child=vc(a,null,g,h):Es(r,a,g,h),a.child;case 11:return g=a.type,v=a.pendingProps,v=a.elementType===g?v:Kn(g,v),$_(r,a,g,v,h);case 7:return Es(r,a,a.pendingProps,h),a.child;case 8:return Es(r,a,a.pendingProps.children,h),a.child;case 12:return Es(r,a,a.pendingProps.children,h),a.child;case 10:e:{if(g=a.type._context,v=a.pendingProps,x=a.memoizedProps,P=v.value,rt(ig,g._currentValue),g._currentValue=P,x!==null)if(Gn(x.value,P)){if(x.children===v.children&&!$s.current){a=ti(r,a,h);break e}}else for(x=a.child,x!==null&&(x.return=a);x!==null;){var L=x.dependencies;if(L!==null){P=x.child;for(var M=L.firstContext;M!==null;){if(M.context===g){if(x.tag===1){M=ei(-1,h&-h),M.tag=2;var H=x.updateQueue;if(H!==null){H=H.shared;var q=H.pending;q===null?M.next=M:(M.next=q.next,q.next=M),H.pending=M}}x.lanes|=h,M=x.alternate,M!==null&&(M.lanes|=h),gv(x.return,h,a),L.lanes|=h;break}M=M.next}}else if(x.tag===10)P=x.type===a.type?null:x.child;else if(x.tag===18){if(P=x.return,P===null)throw Error(t(341));P.lanes|=h,L=P.alternate,L!==null&&(L.lanes|=h),gv(P,h,a),P=x.sibling}else P=x.child;if(P!==null)P.return=x;else for(P=x;P!==null;){if(P===a){P=null;break}if(x=P.sibling,x!==null){x.return=P.return,P=x;break}P=P.return}x=P}Es(r,a,v.children,h),a=a.child}return a;case 9:return v=a.type,g=a.pendingProps.children,wc(a,h),v=En(v),g=g(v),a.flags|=1,Es(r,a,g,h),a.child;case 14:return g=a.type,v=Kn(g,a.pendingProps),v=Kn(g.type,v),B_(r,a,g,v,h);case 15:return U_(r,a,a.type,a.pendingProps,h);case 17:return g=a.type,v=a.pendingProps,v=a.elementType===g?v:Kn(g,v),vg(r,a),a.tag=1,Bs(g)?(r=!0,Zp(a)):r=!1,wc(a,h),j_(a,g,v),Rv(a,g,v,h),Mv(null,a,g,!0,r,h);case 19:return X_(r,a,h);case 22:return z_(r,a,h)}throw Error(t(156,a.tag))};function w1(r,a){return Qx(r,a)}function aT(r,a,h,g){this.tag=r,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(r,a,h,g){return new aT(r,a,h,g)}function ty(r){return r=r.prototype,!(!r||!r.isReactComponent)}function oT(r){if(typeof r=="function")return ty(r)?1:0;if(r!=null){if(r=r.$$typeof,r===_e)return 11;if(r===Ee)return 14}return 2}function ua(r,a){var h=r.alternate;return h===null?(h=Pn(r.tag,a,r.key,r.mode),h.elementType=r.elementType,h.type=r.type,h.stateNode=r.stateNode,h.alternate=r,r.alternate=h):(h.pendingProps=a,h.type=r.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=r.flags&14680064,h.childLanes=r.childLanes,h.lanes=r.lanes,h.child=r.child,h.memoizedProps=r.memoizedProps,h.memoizedState=r.memoizedState,h.updateQueue=r.updateQueue,a=r.dependencies,h.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},h.sibling=r.sibling,h.index=r.index,h.ref=r.ref,h}function Pg(r,a,h,g,v,x){var P=2;if(g=r,typeof r=="function")ty(r)&&(P=1);else if(typeof r=="string")P=5;else e:switch(r){case B:return Co(h.children,v,x,a);case W:P=8,v|=8;break;case K:return r=Pn(12,h,a,v|2),r.elementType=K,r.lanes=x,r;case we:return r=Pn(13,h,a,v),r.elementType=we,r.lanes=x,r;case pe:return r=Pn(19,h,a,v),r.elementType=pe,r.lanes=x,r;case X:return Tg(h,v,x,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case te:P=10;break e;case Q:P=9;break e;case _e:P=11;break e;case Ee:P=14;break e;case Z:P=16,g=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return a=Pn(P,h,a,v),a.elementType=r,a.type=g,a.lanes=x,a}function Co(r,a,h,g){return r=Pn(7,r,g,a),r.lanes=h,r}function Tg(r,a,h,g){return r=Pn(22,r,g,a),r.elementType=X,r.lanes=h,r.stateNode={isHidden:!1},r}function sy(r,a,h){return r=Pn(6,r,null,a),r.lanes=h,r}function ny(r,a,h){return a=Pn(4,r.children!==null?r.children:[],r.key,a),a.lanes=h,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function lT(r,a,h,g,v){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=N0(0),this.expirationTimes=N0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N0(0),this.identifierPrefix=g,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function ry(r,a,h,g,v,x,P,L,M){return r=new lT(r,a,h,L,M),a===1?(a=1,x===!0&&(a|=8)):a=0,x=Pn(3,null,null,a),r.current=x,x.stateNode=r,x.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},vv(x),r}function cT(r,a,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:g==null?null:""+g,children:r,containerInfo:a,implementation:h}}function x1(r){if(!r)return ta;r=r._reactInternals;e:{if(go(r)!==r||r.tag!==1)throw Error(t(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Bs(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(r.tag===1){var h=r.type;if(Bs(h))return Kb(r,h,a)}return a}function b1(r,a,h,g,v,x,P,L,M){return r=ry(h,g,!0,r,v,x,P,L,M),r.context=x1(null),h=r.current,g=ks(),v=la(h),x=ei(g,v),x.callback=a??null,ra(h,x,v),r.current.lanes=v,vh(r,v,g),Hs(r,g),r}function Ng(r,a,h,g){var v=a.current,x=ks(),P=la(v);return h=x1(h),a.context===null?a.context=h:a.pendingContext=h,a=ei(x,P),a.payload={element:r},g=g===void 0?null:g,g!==null&&(a.callback=g),r=ra(v,a,P),r!==null&&(Jn(r,v,P,x),og(r,v,P)),P}function Rg(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function _1(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var h=r.retryLane;r.retryLane=h!==0&&h<a?h:a}}function iy(r,a){_1(r,a),(r=r.alternate)&&_1(r,a)}function uT(){return null}var S1=typeof reportError=="function"?reportError:function(r){console.error(r)};function ay(r){this._internalRoot=r}jg.prototype.render=ay.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(t(409));Ng(r,a,null,null)},jg.prototype.unmount=ay.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;Ao(function(){Ng(null,r,null,null)}),a[Xr]=null}};function jg(r){this._internalRoot=r}jg.prototype.unstable_scheduleHydration=function(r){if(r){var a=ab();r={blockedOn:null,target:r,priority:a};for(var h=0;h<Yi.length&&a!==0&&a<Yi[h].priority;h++);Yi.splice(h,0,r),h===0&&cb(r)}};function oy(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Lg(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function A1(){}function hT(r,a,h,g,v){if(v){if(typeof g=="function"){var x=g;g=function(){var H=Rg(P);x.call(H)}}var P=b1(a,g,r,0,null,!1,!1,"",A1);return r._reactRootContainer=P,r[Xr]=P.current,Rh(r.nodeType===8?r.parentNode:r),Ao(),P}for(;v=r.lastChild;)r.removeChild(v);if(typeof g=="function"){var L=g;g=function(){var H=Rg(M);L.call(H)}}var M=ry(r,0,!1,null,null,!1,!1,"",A1);return r._reactRootContainer=M,r[Xr]=M.current,Rh(r.nodeType===8?r.parentNode:r),Ao(function(){Ng(a,M,h,g)}),M}function Ig(r,a,h,g,v){var x=h._reactRootContainer;if(x){var P=x;if(typeof v=="function"){var L=v;v=function(){var M=Rg(P);L.call(M)}}Ng(a,P,r,v)}else P=hT(h,a,r,v,g);return Rg(P)}rb=function(r){switch(r.tag){case 3:var a=r.stateNode;if(a.current.memoizedState.isDehydrated){var h=mh(a.pendingLanes);h!==0&&(R0(a,h|1),Hs(a,At()),(Ve&6)===0&&(Ac=At()+500,sa()))}break;case 13:Ao(function(){var g=Zr(r,1);if(g!==null){var v=ks();Jn(g,r,1,v)}}),iy(r,1)}},j0=function(r){if(r.tag===13){var a=Zr(r,134217728);if(a!==null){var h=ks();Jn(a,r,134217728,h)}iy(r,134217728)}},ib=function(r){if(r.tag===13){var a=la(r),h=Zr(r,a);if(h!==null){var g=ks();Jn(h,r,a,g)}iy(r,a)}},ab=function(){return Je},ob=function(r,a){var h=Je;try{return Je=r,a()}finally{Je=h}},A0=function(r,a,h){switch(a){case"input":if(_n(r,h),a=h.name,h.type==="radio"&&a!=null){for(h=r;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<h.length;a++){var g=h[a];if(g!==r&&g.form===r.form){var v=Jp(g);if(!v)throw Error(t(90));bn(g),_n(g,v)}}}break;case"textarea":kp(r,h);break;case"select":a=h.value,a!=null&&Vn(r,!!h.multiple,a,!1)}},Wx=Qv,Gx=Ao;var dT={usingClientEntryPoint:!1,Events:[Ih,hc,Jp,Hx,Vx,Qv]},Kh={findFiberByHostInstance:mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fT={bundleType:Kh.bundleType,version:Kh.version,rendererPackageName:Kh.rendererPackageName,rendererConfig:Kh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Yx(r),r===null?null:r.stateNode},findFiberByHostInstance:Kh.findFiberByHostInstance||uT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mg.isDisabled&&Mg.supportsFiber)try{jp=Mg.inject(fT),yr=Mg}catch{}}return Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dT,Vs.createPortal=function(r,a){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oy(a))throw Error(t(200));return cT(r,a,null,h)},Vs.createRoot=function(r,a){if(!oy(r))throw Error(t(299));var h=!1,g="",v=S1;return a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=ry(r,1,!1,null,null,h,!1,g,v),r[Xr]=a.current,Rh(r.nodeType===8?r.parentNode:r),new ay(a)},Vs.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Yx(a),r=r===null?null:r.stateNode,r},Vs.flushSync=function(r){return Ao(r)},Vs.hydrate=function(r,a,h){if(!Lg(a))throw Error(t(200));return Ig(null,r,a,!0,h)},Vs.hydrateRoot=function(r,a,h){if(!oy(r))throw Error(t(405));var g=h!=null&&h.hydratedSources||null,v=!1,x="",P=S1;if(h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onRecoverableError!==void 0&&(P=h.onRecoverableError)),a=b1(a,null,r,1,h??null,v,!1,x,P),r[Xr]=a.current,Rh(r),g)for(r=0;r<g.length;r++)h=g[r],v=h._getVersion,v=v(h._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[h,v]:a.mutableSourceEagerHydrationData.push(h,v);return new jg(a)},Vs.render=function(r,a,h){if(!Lg(a))throw Error(t(200));return Ig(null,r,a,!1,h)},Vs.unmountComponentAtNode=function(r){if(!Lg(r))throw Error(t(40));return r._reactRootContainer?(Ao(function(){Ig(null,null,r,!1,function(){r._reactRootContainer=null,r[Xr]=null})}),!0):!1},Vs.unstable_batchedUpdates=Qv,Vs.unstable_renderSubtreeIntoContainer=function(r,a,h,g){if(!Lg(h))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Ig(r,a,h,!1,g)},Vs.version="18.3.1-next-f1338f8080-20240426",Vs}var L1;function sA(){if(L1)return hy.exports;L1=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(e){console.error(e)}}return l(),hy.exports=ET(),hy.exports}var I1;function kT(){if(I1)return Dg;I1=1;var l=sA();return Dg.createRoot=l.createRoot,Dg.hydrateRoot=l.hydrateRoot,Dg}var CT=kT();const PT=l=>l instanceof Error?l.message+`
`+l.stack:JSON.stringify(l,null,2);class TT extends tA.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){return this.state.hasError?y.jsxs("div",{className:"p-4 border border-red-500 rounded",children:[y.jsx("h2",{className:"text-red-500",children:"Something went wrong."}),y.jsx("pre",{className:"mt-2 text-sm",children:PT(this.state.error)})]}):this.props.children}}sA();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kd(){return kd=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(l[s]=t[s])}return l},kd.apply(this,arguments)}var so;(function(l){l.Pop="POP",l.Push="PUSH",l.Replace="REPLACE"})(so||(so={}));const M1="popstate";function NT(l){l===void 0&&(l={});function e(s,n){let{pathname:i,search:o,hash:c}=s.location;return jy("",{pathname:i,search:o,hash:c},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function t(s,n){return typeof n=="string"?n:Cm(n)}return jT(e,t,null,l)}function Nt(l,e){if(l===!1||l===null||typeof l>"u")throw new Error(e)}function nA(l,e){if(!l){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RT(){return Math.random().toString(36).substr(2,8)}function D1(l,e){return{usr:l.state,key:l.key,idx:e}}function jy(l,e,t,s){return t===void 0&&(t=null),kd({pathname:typeof l=="string"?l:l.pathname,search:"",hash:""},typeof e=="string"?oh(e):e,{state:t,key:e&&e.key||s||RT()})}function Cm(l){let{pathname:e="/",search:t="",hash:s=""}=l;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function oh(l){let e={};if(l){let t=l.indexOf("#");t>=0&&(e.hash=l.substr(t),l=l.substr(0,t));let s=l.indexOf("?");s>=0&&(e.search=l.substr(s),l=l.substr(0,s)),l&&(e.pathname=l)}return e}function jT(l,e,t,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:i=!1}=s,o=n.history,c=so.Pop,d=null,f=p();f==null&&(f=0,o.replaceState(kd({},o.state,{idx:f}),""));function p(){return(o.state||{idx:null}).idx}function m(){c=so.Pop;let E=p(),T=E==null?null:E-f;f=E,d&&d({action:c,location:_.location,delta:T})}function w(E,T){c=so.Push;let R=jy(_.location,E,T);f=p()+1;let N=D1(R,f),j=_.createHref(R);try{o.pushState(N,"",j)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;n.location.assign(j)}i&&d&&d({action:c,location:_.location,delta:1})}function b(E,T){c=so.Replace;let R=jy(_.location,E,T);f=p();let N=D1(R,f),j=_.createHref(R);o.replaceState(N,"",j),i&&d&&d({action:c,location:_.location,delta:0})}function A(E){let T=n.location.origin!=="null"?n.location.origin:n.location.href,R=typeof E=="string"?E:Cm(E);return R=R.replace(/ $/,"%20"),Nt(T,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,T)}let _={get action(){return c},get location(){return l(n,o)},listen(E){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(M1,m),d=E,()=>{n.removeEventListener(M1,m),d=null}},createHref(E){return e(n,E)},createURL:A,encodeLocation(E){let T=A(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:w,replace:b,go(E){return o.go(E)}};return _}var O1;(function(l){l.data="data",l.deferred="deferred",l.redirect="redirect",l.error="error"})(O1||(O1={}));function LT(l,e,t){return t===void 0&&(t="/"),IT(l,e,t)}function IT(l,e,t,s){let n=typeof e=="string"?oh(e):e,i=ux(n.pathname||"/",t);if(i==null)return null;let o=rA(l);MT(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let f=qT(i);c=VT(o[d],f)}return c}function rA(l,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let n=(i,o,c)=>{let d={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(Nt(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let f=no([s,d.relativePath]),p=t.concat(d);i.children&&i.children.length>0&&(Nt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),rA(i.children,e,p,f)),!(i.path==null&&!i.index)&&e.push({path:f,score:zT(f,i.index),routesMeta:p})};return l.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))n(i,o);else for(let d of iA(i.path))n(i,o,d)}),e}function iA(l){let e=l.split("/");if(e.length===0)return[];let[t,...s]=e,n=t.endsWith("?"),i=t.replace(/\?$/,"");if(s.length===0)return n?[i,""]:[i];let o=iA(s.join("/")),c=[];return c.push(...o.map(d=>d===""?i:[i,d].join("/"))),n&&c.push(...o),c.map(d=>l.startsWith("/")&&d===""?"/":d)}function MT(l){l.sort((e,t)=>e.score!==t.score?t.score-e.score:HT(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const DT=/^:[\w-]+$/,OT=3,FT=2,$T=1,BT=10,UT=-2,F1=l=>l==="*";function zT(l,e){let t=l.split("/"),s=t.length;return t.some(F1)&&(s+=UT),e&&(s+=FT),t.filter(n=>!F1(n)).reduce((n,i)=>n+(DT.test(i)?OT:i===""?$T:BT),s)}function HT(l,e){return l.length===e.length&&l.slice(0,-1).every((s,n)=>s===e[n])?l[l.length-1]-e[e.length-1]:0}function VT(l,e,t){let{routesMeta:s}=l,n={},i="/",o=[];for(let c=0;c<s.length;++c){let d=s[c],f=c===s.length-1,p=i==="/"?e:e.slice(i.length)||"/",m=WT({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),w=d.route;if(!m)return null;Object.assign(n,m.params),o.push({params:n,pathname:no([i,m.pathname]),pathnameBase:JT(no([i,m.pathnameBase])),route:w}),m.pathnameBase!=="/"&&(i=no([i,m.pathnameBase]))}return o}function WT(l,e){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[t,s]=GT(l.path,l.caseSensitive,l.end),n=e.match(t);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:s.reduce((f,p,m)=>{let{paramName:w,isOptional:b}=p;if(w==="*"){let _=c[m]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const A=c[m];return b&&!A?f[w]=void 0:f[w]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:o,pattern:l}}function GT(l,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),nA(l==="*"||!l.endsWith("*")||l.endsWith("/*"),'Route path "'+l+'" will be treated as if it were '+('"'+l.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+l.replace(/\*$/,"/*")+'".'));let s=[],n="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(s.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return l.endsWith("*")?(s.push({paramName:"*"}),n+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":l!==""&&l!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function qT(l){try{return l.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nA(!1,'The URL path "'+l+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),l}}function ux(l,e){if(e==="/")return l;if(!l.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=l.charAt(t);return s&&s!=="/"?null:l.slice(t)||"/"}function KT(l,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:n=""}=typeof l=="string"?oh(l):l;return{pathname:t?t.startsWith("/")?t:XT(t,e):e,search:QT(s),hash:ZT(n)}}function XT(l,e){let t=e.replace(/\/+$/,"").split("/");return l.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function py(l,e,t,s){return"Cannot include a '"+l+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YT(l){return l.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hx(l,e){let t=YT(l);return e?t.map((s,n)=>n===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function dx(l,e,t,s){s===void 0&&(s=!1);let n;typeof l=="string"?n=oh(l):(n=kd({},l),Nt(!n.pathname||!n.pathname.includes("?"),py("?","pathname","search",n)),Nt(!n.pathname||!n.pathname.includes("#"),py("#","pathname","hash",n)),Nt(!n.search||!n.search.includes("#"),py("#","search","hash",n)));let i=l===""||n.pathname==="",o=i?"/":n.pathname,c;if(o==null)c=t;else{let m=e.length-1;if(!s&&o.startsWith("..")){let w=o.split("/");for(;w[0]==="..";)w.shift(),m-=1;n.pathname=w.join("/")}c=m>=0?e[m]:"/"}let d=KT(n,c),f=o&&o!=="/"&&o.endsWith("/"),p=(i||o===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}const no=l=>l.join("/").replace(/\/\/+/g,"/"),JT=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),QT=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,ZT=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function eN(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}const aA=["post","put","patch","delete"];new Set(aA);const tN=["get",...aA];new Set(tN);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cd(){return Cd=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(l[s]=t[s])}return l},Cd.apply(this,arguments)}const fx=D.createContext(null),sN=D.createContext(null),co=D.createContext(null),i0=D.createContext(null),Gi=D.createContext({outlet:null,matches:[],isDataRoute:!1}),oA=D.createContext(null);function nN(l,e){let{relative:t}=e===void 0?{}:e;lh()||Nt(!1);let{basename:s,navigator:n}=D.useContext(co),{hash:i,pathname:o,search:c}=uA(l,{relative:t}),d=o;return s!=="/"&&(d=o==="/"?s:no([s,o])),n.createHref({pathname:d,search:c,hash:i})}function lh(){return D.useContext(i0)!=null}function Xl(){return lh()||Nt(!1),D.useContext(i0).location}function lA(l){D.useContext(co).static||D.useLayoutEffect(l)}function Yl(){let{isDataRoute:l}=D.useContext(Gi);return l?mN():rN()}function rN(){lh()||Nt(!1);let l=D.useContext(fx),{basename:e,future:t,navigator:s}=D.useContext(co),{matches:n}=D.useContext(Gi),{pathname:i}=Xl(),o=JSON.stringify(hx(n,t.v7_relativeSplatPath)),c=D.useRef(!1);return lA(()=>{c.current=!0}),D.useCallback(function(f,p){if(p===void 0&&(p={}),!c.current)return;if(typeof f=="number"){s.go(f);return}let m=dx(f,JSON.parse(o),i,p.relative==="path");l==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:no([e,m.pathname])),(p.replace?s.replace:s.push)(m,p.state,p)},[e,s,o,i,l])}function cA(){let{matches:l}=D.useContext(Gi),e=l[l.length-1];return e?e.params:{}}function uA(l,e){let{relative:t}=e===void 0?{}:e,{future:s}=D.useContext(co),{matches:n}=D.useContext(Gi),{pathname:i}=Xl(),o=JSON.stringify(hx(n,s.v7_relativeSplatPath));return D.useMemo(()=>dx(l,JSON.parse(o),i,t==="path"),[l,o,i,t])}function iN(l,e){return aN(l,e)}function aN(l,e,t,s){lh()||Nt(!1);let{navigator:n,static:i}=D.useContext(co),{matches:o}=D.useContext(Gi),c=o[o.length-1],d=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let p=Xl(),m;if(e){var w;let T=typeof e=="string"?oh(e):e;f==="/"||(w=T.pathname)!=null&&w.startsWith(f)||Nt(!1),m=T}else m=p;let b=m.pathname||"/",A=b;if(f!=="/"){let T=f.replace(/^\//,"").split("/");A="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=LT(l,{pathname:A}),E=hN(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:no([f,n.encodeLocation?n.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:no([f,n.encodeLocation?n.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,t,s);return e&&E?D.createElement(i0.Provider,{value:{location:Cd({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:so.Pop}},E):E}function oN(){let l=gN(),e=eN(l)?l.status+" "+l.statusText:l instanceof Error?l.message:JSON.stringify(l),t=l instanceof Error?l.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:n},t):null,null)}const lN=D.createElement(oN,null);class cN extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?D.createElement(Gi.Provider,{value:this.props.routeContext},D.createElement(oA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uN(l){let{routeContext:e,match:t,children:s}=l,n=D.useContext(fx);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),D.createElement(Gi.Provider,{value:e},s)}function hN(l,e,t,s){var n;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),l==null){var i;if(!t)return null;if(t.errors)l=t.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)l=t.matches;else return null}let o=l,c=(n=t)==null?void 0:n.errors;if(c!=null){let p=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);p>=0||Nt(!1),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,f=-1;if(t&&s&&s.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:w,errors:b}=t,A=m.route.loader&&w[m.route.id]===void 0&&(!b||b[m.route.id]===void 0);if(m.route.lazy||A){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((p,m,w)=>{let b,A=!1,_=null,E=null;t&&(b=c&&m.route.id?c[m.route.id]:void 0,_=m.route.errorElement||lN,d&&(f<0&&w===0?(vN("route-fallback"),A=!0,E=null):f===w&&(A=!0,E=m.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,w+1)),R=()=>{let N;return b?N=_:A?N=E:m.route.Component?N=D.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=p,D.createElement(uN,{match:m,routeContext:{outlet:p,matches:T,isDataRoute:t!=null},children:N})};return t&&(m.route.ErrorBoundary||m.route.errorElement||w===0)?D.createElement(cN,{location:t.location,revalidation:t.revalidation,component:_,error:b,children:R(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):R()},null)}var hA=function(l){return l.UseBlocker="useBlocker",l.UseRevalidator="useRevalidator",l.UseNavigateStable="useNavigate",l}(hA||{}),dA=function(l){return l.UseBlocker="useBlocker",l.UseLoaderData="useLoaderData",l.UseActionData="useActionData",l.UseRouteError="useRouteError",l.UseNavigation="useNavigation",l.UseRouteLoaderData="useRouteLoaderData",l.UseMatches="useMatches",l.UseRevalidator="useRevalidator",l.UseNavigateStable="useNavigate",l.UseRouteId="useRouteId",l}(dA||{});function dN(l){let e=D.useContext(fx);return e||Nt(!1),e}function fN(l){let e=D.useContext(sN);return e||Nt(!1),e}function pN(l){let e=D.useContext(Gi);return e||Nt(!1),e}function fA(l){let e=pN(),t=e.matches[e.matches.length-1];return t.route.id||Nt(!1),t.route.id}function gN(){var l;let e=D.useContext(oA),t=fN(),s=fA();return e!==void 0?e:(l=t.errors)==null?void 0:l[s]}function mN(){let{router:l}=dN(hA.UseNavigateStable),e=fA(dA.UseNavigateStable),t=D.useRef(!1);return lA(()=>{t.current=!0}),D.useCallback(function(n,i){i===void 0&&(i={}),t.current&&(typeof n=="number"?l.navigate(n):l.navigate(n,Cd({fromRouteId:e},i)))},[l,e])}const $1={};function vN(l,e,t){$1[l]||($1[l]=!0)}function yN(l,e){l==null||l.v7_startTransition,l==null||l.v7_relativeSplatPath}function pA(l){let{to:e,replace:t,state:s,relative:n}=l;lh()||Nt(!1);let{future:i,static:o}=D.useContext(co),{matches:c}=D.useContext(Gi),{pathname:d}=Xl(),f=Yl(),p=dx(e,hx(c,i.v7_relativeSplatPath),d,n==="path"),m=JSON.stringify(p);return D.useEffect(()=>f(JSON.parse(m),{replace:t,state:s,relative:n}),[f,m,n,t,s]),null}function fa(l){Nt(!1)}function wN(l){let{basename:e="/",children:t=null,location:s,navigationType:n=so.Pop,navigator:i,static:o=!1,future:c}=l;lh()&&Nt(!1);let d=e.replace(/^\/*/,"/"),f=D.useMemo(()=>({basename:d,navigator:i,static:o,future:Cd({v7_relativeSplatPath:!1},c)}),[d,c,i,o]);typeof s=="string"&&(s=oh(s));let{pathname:p="/",search:m="",hash:w="",state:b=null,key:A="default"}=s,_=D.useMemo(()=>{let E=ux(p,d);return E==null?null:{location:{pathname:E,search:m,hash:w,state:b,key:A},navigationType:n}},[d,p,m,w,b,A,n]);return _==null?null:D.createElement(co.Provider,{value:f},D.createElement(i0.Provider,{children:t,value:_}))}function xN(l){let{children:e,location:t}=l;return iN(Ly(e),t)}new Promise(()=>{});function Ly(l,e){e===void 0&&(e=[]);let t=[];return D.Children.forEach(l,(s,n)=>{if(!D.isValidElement(s))return;let i=[...e,n];if(s.type===D.Fragment){t.push.apply(t,Ly(s.props.children,i));return}s.type!==fa&&Nt(!1),!s.props.index||!s.props.children||Nt(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Ly(s.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Iy(){return Iy=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(l[s]=t[s])}return l},Iy.apply(this,arguments)}function bN(l,e){if(l==null)return{};var t={},s=Object.keys(l),n,i;for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&(t[n]=l[n]);return t}function _N(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function SN(l,e){return l.button===0&&(!e||e==="_self")&&!_N(l)}const AN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],EN="6";try{window.__reactRouterVersion=EN}catch{}const kN="startTransition",B1=_T[kN];function CN(l){let{basename:e,children:t,future:s,window:n}=l,i=D.useRef();i.current==null&&(i.current=NT({window:n,v5Compat:!0}));let o=i.current,[c,d]=D.useState({action:o.action,location:o.location}),{v7_startTransition:f}=s||{},p=D.useCallback(m=>{f&&B1?B1(()=>d(m)):d(m)},[d,f]);return D.useLayoutEffect(()=>o.listen(p),[o,p]),D.useEffect(()=>yN(s),[s]),D.createElement(wN,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:o,future:s})}const PN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Is=D.forwardRef(function(e,t){let{onClick:s,relative:n,reloadDocument:i,replace:o,state:c,target:d,to:f,preventScrollReset:p,viewTransition:m}=e,w=bN(e,AN),{basename:b}=D.useContext(co),A,_=!1;if(typeof f=="string"&&TN.test(f)&&(A=f,PN))try{let N=new URL(window.location.href),j=f.startsWith("//")?new URL(N.protocol+f):new URL(f),I=ux(j.pathname,b);j.origin===N.origin&&I!=null?f=I+j.search+j.hash:_=!0}catch{}let E=nN(f,{relative:n}),T=NN(f,{replace:o,state:c,target:d,preventScrollReset:p,relative:n,viewTransition:m});function R(N){s&&s(N),N.defaultPrevented||T(N)}return D.createElement("a",Iy({},w,{href:A||E,onClick:_||i?s:R,ref:t,target:d}))});var U1;(function(l){l.UseScrollRestoration="useScrollRestoration",l.UseSubmit="useSubmit",l.UseSubmitFetcher="useSubmitFetcher",l.UseFetcher="useFetcher",l.useViewTransitionState="useViewTransitionState"})(U1||(U1={}));var z1;(function(l){l.UseFetcher="useFetcher",l.UseFetchers="useFetchers",l.UseScrollRestoration="useScrollRestoration"})(z1||(z1={}));function NN(l,e){let{target:t,replace:s,state:n,preventScrollReset:i,relative:o,viewTransition:c}=e===void 0?{}:e,d=Yl(),f=Xl(),p=uA(l,{relative:o});return D.useCallback(m=>{if(SN(m,t)){m.preventDefault();let w=s!==void 0?s:Cm(f)===Cm(p);d(l,{replace:w,state:n,preventScrollReset:i,relative:o,viewTransition:c})}},[f,d,p,s,n,t,l,i,o,c])}let RN={data:""},jN=l=>typeof window=="object"?((l?l.querySelector("#_goober"):window._goober)||Object.assign((l||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:l||RN,LN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,IN=/\/\*[^]*?\*\/|  +/g,H1=/\n+/g,va=(l,e)=>{let t="",s="",n="";for(let i in l){let o=l[i];i[0]=="@"?i[1]=="i"?t=i+" "+o+";":s+=i[1]=="f"?va(o,i):i+"{"+va(o,i[1]=="k"?"":e)+"}":typeof o=="object"?s+=va(o,e?e.replace(/([^,])+/g,c=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,c):c?c+" "+d:d)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=va.p?va.p(i,o):i+":"+o+";")}return t+(e&&n?e+"{"+n+"}":n)+s},ni={},gA=l=>{if(typeof l=="object"){let e="";for(let t in l)e+=t+gA(l[t]);return e}return l},MN=(l,e,t,s,n)=>{let i=gA(l),o=ni[i]||(ni[i]=(d=>{let f=0,p=11;for(;f<d.length;)p=101*p+d.charCodeAt(f++)>>>0;return"go"+p})(i));if(!ni[o]){let d=i!==l?l:(f=>{let p,m,w=[{}];for(;p=LN.exec(f.replace(IN,""));)p[4]?w.shift():p[3]?(m=p[3].replace(H1," ").trim(),w.unshift(w[0][m]=w[0][m]||{})):w[0][p[1]]=p[2].replace(H1," ").trim();return w[0]})(l);ni[o]=va(n?{["@keyframes "+o]:d}:d,t?"":"."+o)}let c=t&&ni.g?ni.g:null;return t&&(ni.g=ni[o]),((d,f,p,m)=>{m?f.data=f.data.replace(m,d):f.data.indexOf(d)===-1&&(f.data=p?d+f.data:f.data+d)})(ni[o],e,s,c),o},DN=(l,e,t)=>l.reduce((s,n,i)=>{let o=e[i];if(o&&o.call){let c=o(t),d=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=d?"."+d:c&&typeof c=="object"?c.props?"":va(c,""):c===!1?"":c}return s+n+(o??"")},"");function a0(l){let e=this||{},t=l.call?l(e.p):l;return MN(t.unshift?t.raw?DN(t,[].slice.call(arguments,1),e.p):t.reduce((s,n)=>Object.assign(s,n&&n.call?n(e.p):n),{}):t,jN(e.target),e.g,e.o,e.k)}let mA,My,Dy;a0.bind({g:1});let zi=a0.bind({k:1});function ON(l,e,t,s){va.p=e,mA=l,My=t,Dy=s}function uo(l,e){let t=this||{};return function(){let s=arguments;function n(i,o){let c=Object.assign({},i),d=c.className||n.className;t.p=Object.assign({theme:My&&My()},c),t.o=/ *go\d+/.test(d),c.className=a0.apply(t,s)+(d?" "+d:"");let f=l;return l[0]&&(f=c.as||l,delete c.as),Dy&&f[0]&&Dy(c),mA(f,c)}return n}}var FN=l=>typeof l=="function",Pm=(l,e)=>FN(l)?l(e):l,$N=(()=>{let l=0;return()=>(++l).toString()})(),vA=(()=>{let l;return()=>{if(l===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");l=!e||e.matches}return l}})(),BN=20,yA=(l,e)=>{switch(e.type){case 0:return{...l,toasts:[e.toast,...l.toasts].slice(0,BN)};case 1:return{...l,toasts:l.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:t}=e;return yA(l,{type:l.toasts.find(i=>i.id===t.id)?1:0,toast:t});case 3:let{toastId:s}=e;return{...l,toasts:l.toasts.map(i=>i.id===s||s===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...l,toasts:[]}:{...l,toasts:l.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...l,pausedAt:e.time};case 6:let n=e.time-(l.pausedAt||0);return{...l,pausedAt:void 0,toasts:l.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+n}))}}},Xg=[],Fo={toasts:[],pausedAt:void 0},Jl=l=>{Fo=yA(Fo,l),Xg.forEach(e=>{e(Fo)})},UN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},zN=(l={})=>{let[e,t]=D.useState(Fo),s=D.useRef(Fo);D.useEffect(()=>(s.current!==Fo&&t(Fo),Xg.push(t),()=>{let i=Xg.indexOf(t);i>-1&&Xg.splice(i,1)}),[]);let n=e.toasts.map(i=>{var o,c,d;return{...l,...l[i.type],...i,removeDelay:i.removeDelay||((o=l[i.type])==null?void 0:o.removeDelay)||(l==null?void 0:l.removeDelay),duration:i.duration||((c=l[i.type])==null?void 0:c.duration)||(l==null?void 0:l.duration)||UN[i.type],style:{...l.style,...(d=l[i.type])==null?void 0:d.style,...i.style}}});return{...e,toasts:n}},HN=(l,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:l,pauseDuration:0,...t,id:(t==null?void 0:t.id)||$N()}),dp=l=>(e,t)=>{let s=HN(e,l,t);return Jl({type:2,toast:s}),s.id},Ms=(l,e)=>dp("blank")(l,e);Ms.error=dp("error");Ms.success=dp("success");Ms.loading=dp("loading");Ms.custom=dp("custom");Ms.dismiss=l=>{Jl({type:3,toastId:l})};Ms.remove=l=>Jl({type:4,toastId:l});Ms.promise=(l,e,t)=>{let s=Ms.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof l=="function"&&(l=l()),l.then(n=>{let i=e.success?Pm(e.success,n):void 0;return i?Ms.success(i,{id:s,...t,...t==null?void 0:t.success}):Ms.dismiss(s),n}).catch(n=>{let i=e.error?Pm(e.error,n):void 0;i?Ms.error(i,{id:s,...t,...t==null?void 0:t.error}):Ms.dismiss(s)}),l};var VN=(l,e)=>{Jl({type:1,toast:{id:l,height:e}})},WN=()=>{Jl({type:5,time:Date.now()})},_d=new Map,GN=1e3,qN=(l,e=GN)=>{if(_d.has(l))return;let t=setTimeout(()=>{_d.delete(l),Jl({type:4,toastId:l})},e);_d.set(l,t)},KN=l=>{let{toasts:e,pausedAt:t}=zN(l);D.useEffect(()=>{if(t)return;let i=Date.now(),o=e.map(c=>{if(c.duration===1/0)return;let d=(c.duration||0)+c.pauseDuration-(i-c.createdAt);if(d<0){c.visible&&Ms.dismiss(c.id);return}return setTimeout(()=>Ms.dismiss(c.id),d)});return()=>{o.forEach(c=>c&&clearTimeout(c))}},[e,t]);let s=D.useCallback(()=>{t&&Jl({type:6,time:Date.now()})},[t]),n=D.useCallback((i,o)=>{let{reverseOrder:c=!1,gutter:d=8,defaultPosition:f}=o||{},p=e.filter(b=>(b.position||f)===(i.position||f)&&b.height),m=p.findIndex(b=>b.id===i.id),w=p.filter((b,A)=>A<m&&b.visible).length;return p.filter(b=>b.visible).slice(...c?[w+1]:[0,w]).reduce((b,A)=>b+(A.height||0)+d,0)},[e]);return D.useEffect(()=>{e.forEach(i=>{if(i.dismissed)qN(i.id,i.removeDelay);else{let o=_d.get(i.id);o&&(clearTimeout(o),_d.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:VN,startPause:WN,endPause:s,calculateOffset:n}}},XN=zi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,YN=zi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,JN=zi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,QN=uo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${l=>l.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${XN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${YN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${l=>l.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${JN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ZN=zi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,e2=uo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${l=>l.secondary||"#e0e0e0"};
  border-right-color: ${l=>l.primary||"#616161"};
  animation: ${ZN} 1s linear infinite;
`,t2=zi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,s2=zi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,n2=uo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${l=>l.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${t2} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${s2} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${l=>l.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,r2=uo("div")`
  position: absolute;
`,i2=uo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,a2=zi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,o2=uo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${a2} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,l2=({toast:l})=>{let{icon:e,type:t,iconTheme:s}=l;return e!==void 0?typeof e=="string"?D.createElement(o2,null,e):e:t==="blank"?null:D.createElement(i2,null,D.createElement(e2,{...s}),t!=="loading"&&D.createElement(r2,null,t==="error"?D.createElement(QN,{...s}):D.createElement(n2,{...s})))},c2=l=>`
0% {transform: translate3d(0,${l*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,u2=l=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${l*-150}%,-1px) scale(.6); opacity:0;}
`,h2="0%{opacity:0;} 100%{opacity:1;}",d2="0%{opacity:1;} 100%{opacity:0;}",f2=uo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,p2=uo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,g2=(l,e)=>{let t=l.includes("top")?1:-1,[s,n]=vA()?[h2,d2]:[c2(t),u2(t)];return{animation:e?`${zi(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${zi(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},m2=D.memo(({toast:l,position:e,style:t,children:s})=>{let n=l.height?g2(l.position||e||"top-center",l.visible):{opacity:0},i=D.createElement(l2,{toast:l}),o=D.createElement(p2,{...l.ariaProps},Pm(l.message,l));return D.createElement(f2,{className:l.className,style:{...n,...t,...l.style}},typeof s=="function"?s({icon:i,message:o}):D.createElement(D.Fragment,null,i,o))});ON(D.createElement);var v2=({id:l,className:e,style:t,onHeightUpdate:s,children:n})=>{let i=D.useCallback(o=>{if(o){let c=()=>{let d=o.getBoundingClientRect().height;s(l,d)};c(),new MutationObserver(c).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[l,s]);return D.createElement("div",{ref:i,className:e,style:t},n)},y2=(l,e)=>{let t=l.includes("top"),s=t?{top:0}:{bottom:0},n=l.includes("center")?{justifyContent:"center"}:l.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:vA()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...s,...n}},w2=a0`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Og=16,x2=({reverseOrder:l,position:e="top-center",toastOptions:t,gutter:s,children:n,containerStyle:i,containerClassName:o})=>{let{toasts:c,handlers:d}=KN(t);return D.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Og,left:Og,right:Og,bottom:Og,pointerEvents:"none",...i},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(f=>{let p=f.position||e,m=d.calculateOffset(f,{reverseOrder:l,gutter:s,defaultPosition:e}),w=y2(p,m);return D.createElement(v2,{id:f.id,key:f.id,onHeightUpdate:d.updateHeight,className:f.visible?w2:"",style:w},f.type==="custom"?Pm(f.message,f):n?n(f):D.createElement(m2,{toast:f,position:p}))}))},He=Ms;const b2="modulepreload",_2=function(l){return"/"+l},V1={},fp=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(t.map(d=>{if(d=_2(d),d in V1)return;V1[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":b2,f||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((w,b)=>{m.addEventListener("load",w),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return n.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},S2=l=>{let e;return l?e=l:typeof fetch>"u"?e=(...t)=>fp(async()=>{const{default:s}=await Promise.resolve().then(()=>ch);return{default:s}},[]).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class px extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class A2 extends px{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class W1 extends px{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class G1 extends px{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Oy;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(Oy||(Oy={}));var E2=function(l,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{f(s.next(p))}catch(m){o(m)}}function d(p){try{f(s.throw(p))}catch(m){o(m)}}function f(p){p.done?i(p.value):n(p.value).then(c,d)}f((s=s.apply(l,e||[])).next())})};class k2{constructor(e,{headers:t={},customFetch:s,region:n=Oy.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=S2(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return E2(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=t;let c={},{region:d}=t;d||(d=this.region);const f=new URL(`${this.url}/${e}`);d&&d!=="any"&&(c["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let p;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",p=o):typeof o=="string"?(c["Content-Type"]="text/plain",p=o):typeof FormData<"u"&&o instanceof FormData?p=o:(c["Content-Type"]="application/json",p=JSON.stringify(o)));const m=yield this.fetch(f.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),n),body:p}).catch(_=>{throw new A2(_)}),w=m.headers.get("x-relay-error");if(w&&w==="true")throw new W1(m);if(!m.ok)throw new G1(m);let b=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),A;return b==="application/json"?A=yield m.json():b==="application/octet-stream"?A=yield m.blob():b==="text/event-stream"?A=m:b==="multipart/form-data"?A=yield m.formData():A=yield m.text(),{data:A,error:null,response:m}}catch(n){return{data:null,error:n,response:n instanceof G1||n instanceof W1?n.context:void 0}}})}}var qt={},kc={},Cc={},Pc={},Tc={},Nc={},C2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},rh=C2();const P2=rh.fetch,wA=rh.fetch.bind(rh),xA=rh.Headers,T2=rh.Request,N2=rh.Response,ch=Object.freeze(Object.defineProperty({__proto__:null,Headers:xA,Request:T2,Response:N2,default:wA,fetch:P2},Symbol.toStringTag,{value:"Module"})),R2=yT(ch);var Fg={},q1;function bA(){if(q1)return Fg;q1=1,Object.defineProperty(Fg,"__esModule",{value:!0});class l extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Fg.default=l,Fg}var K1;function _A(){if(K1)return Nc;K1=1;var l=Nc&&Nc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Nc,"__esModule",{value:!0});const e=l(R2),t=l(bA());class s{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var p,m,w;let b=null,A=null,_=null,E=f.status,T=f.statusText;if(f.ok){if(this.method!=="HEAD"){const I=await f.text();I===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?A=I:A=JSON.parse(I))}const N=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),j=(m=f.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");N&&j&&j.length>1&&(_=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(A)&&(A.length>1?(b={code:"PGRST116",details:`Results contain ${A.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},A=null,_=null,E=406,T="Not Acceptable"):A.length===1?A=A[0]:A=null)}else{const N=await f.text();try{b=JSON.parse(N),Array.isArray(b)&&f.status===404&&(A=[],b=null,E=200,T="OK")}catch{f.status===404&&N===""?(E=204,T="No Content"):b={message:N}}if(b&&this.isMaybeSingle&&(!((w=b==null?void 0:b.details)===null||w===void 0)&&w.includes("0 rows"))&&(b=null,E=200,T="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:A,count:_,status:E,statusText:T}});return this.shouldThrowOnError||(d=d.catch(f=>{var p,m,w;return{error:{message:`${(p=f==null?void 0:f.name)!==null&&p!==void 0?p:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(m=f==null?void 0:f.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(w=f==null?void 0:f.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,o)}returns(){return this}overrideTypes(){return this}}return Nc.default=s,Nc}var X1;function SA(){if(X1)return Tc;X1=1;var l=Tc&&Tc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Tc,"__esModule",{value:!0});const e=l(_A());class t extends e.default{select(n){let i=!1;const o=(n??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:i=!0,nullsFirst:o,foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.order`:"order",p=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${p?`${p},`:""}${n}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:o=i}={}){const c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${n}`),this}range(n,i,{foreignTable:o,referencedTable:c=o}={}){const d=typeof c>"u"?"offset":`${c}.offset`,f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${n}`),this.url.searchParams.set(f,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:i=!1,settings:o=!1,buffers:c=!1,wal:d=!1,format:f="text"}={}){var p;const m=[n?"analyze":null,i?"verbose":null,o?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),w=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${w}"; options=${m};`,f==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Tc.default=t,Tc}var Y1;function gx(){if(Y1)return Pc;Y1=1;var l=Pc&&Pc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Pc,"__esModule",{value:!0});const e=l(SA());class t extends e.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const o=Array.from(new Set(i)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(n,`in.(${o})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:o,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const f=o===void 0?"":`(${o})`;return this.url.searchParams.append(n,`${d}fts${f}.${i}`),this}match(n){return Object.entries(n).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(n,i,o){return this.url.searchParams.append(n,`not.${i}.${o}`),this}or(n,{foreignTable:i,referencedTable:o=i}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${n})`),this}filter(n,i,o){return this.url.searchParams.append(n,`${i}.${o}`),this}}return Pc.default=t,Pc}var J1;function AA(){if(J1)return Cc;J1=1;var l=Cc&&Cc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Cc,"__esModule",{value:!0});const e=l(gx());class t{constructor(n,{headers:i={},schema:o,fetch:c}){this.url=n,this.headers=i,this.schema=o,this.fetch=c}select(n,{head:i=!1,count:o}={}){const c=i?"HEAD":"GET";let d=!1;const f=(n??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",f),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:i,defaultToNull:o=!0}={}){const c="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),i&&d.push(`count=${i}`),o||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(n)){const f=n.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:i,ignoreDuplicates:o=!1,count:c,defaultToNull:d=!0}={}){const f="POST",p=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&p.push(this.headers.Prefer),c&&p.push(`count=${c}`),d||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(n)){const m=n.reduce((w,b)=>w.concat(Object.keys(b)),[]);if(m.length>0){const w=[...new Set(m)].map(b=>`"${b}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:i}={}){const o="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),this.headers.Prefer=c.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){const i="DELETE",o=[];return n&&o.push(`count=${n}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Cc.default=t,Cc}var Yh={},Jh={},Q1;function j2(){return Q1||(Q1=1,Object.defineProperty(Jh,"__esModule",{value:!0}),Jh.version=void 0,Jh.version="0.0.0-automated"),Jh}var Z1;function L2(){if(Z1)return Yh;Z1=1,Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.DEFAULT_HEADERS=void 0;const l=j2();return Yh.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${l.version}`},Yh}var eS;function I2(){if(eS)return kc;eS=1;var l=kc&&kc.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(kc,"__esModule",{value:!0});const e=l(AA()),t=l(gx()),s=L2();class n{constructor(o,{headers:c={},schema:d,fetch:f}={}){this.url=o,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),c),this.schemaName=d,this.fetch=f}from(o){const c=new URL(`${this.url}/${o}`);return new e.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:d=!1,get:f=!1,count:p}={}){let m;const w=new URL(`${this.url}/rpc/${o}`);let b;d||f?(m=d?"HEAD":"GET",Object.entries(c).filter(([_,E])=>E!==void 0).map(([_,E])=>[_,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([_,E])=>{w.searchParams.append(_,E)})):(m="POST",b=c);const A=Object.assign({},this.headers);return p&&(A.Prefer=`count=${p}`),new t.default({method:m,url:w,headers:A,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return kc.default=n,kc}var tS;function M2(){if(tS)return qt;tS=1;var l=qt&&qt.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(qt,"__esModule",{value:!0}),qt.PostgrestError=qt.PostgrestBuilder=qt.PostgrestTransformBuilder=qt.PostgrestFilterBuilder=qt.PostgrestQueryBuilder=qt.PostgrestClient=void 0;const e=l(I2());qt.PostgrestClient=e.default;const t=l(AA());qt.PostgrestQueryBuilder=t.default;const s=l(gx());qt.PostgrestFilterBuilder=s.default;const n=l(SA());qt.PostgrestTransformBuilder=n.default;const i=l(_A());qt.PostgrestBuilder=i.default;const o=l(bA());return qt.PostgrestError=o.default,qt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:o.default},qt}var D2=M2();const O2=lx(D2),{PostgrestClient:F2,PostgrestQueryBuilder:BM,PostgrestFilterBuilder:UM,PostgrestTransformBuilder:zM,PostgrestBuilder:HM,PostgrestError:VM}=O2;function $2(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const B2=$2(),U2="2.11.15",z2=`realtime-js/${U2}`,H2="1.0.0",EA=1e4,V2=1e3;var Sd;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(Sd||(Sd={}));var ys;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(ys||(ys={}));var fr;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(fr||(fr={}));var Fy;(function(l){l.websocket="websocket"})(Fy||(Fy={}));var Mo;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(Mo||(Mo={}));class W2{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const c=s.decode(e.slice(o,o+n));o=o+n;const d=s.decode(e.slice(o,o+i));o=o+i;const f=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:c,event:d,payload:f}}}class kA{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(it||(it={}));const sS=(l,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,o)=>(i[o]=G2(o,l,e,n),i),{})},G2=(l,e,t,s)=>{const n=e.find(c=>c.name===l),i=n==null?void 0:n.type,o=t[l];return i&&!s.includes(i)?CA(i,o):$y(o)},CA=(l,e)=>{if(l.charAt(0)==="_"){const t=l.slice(1,l.length);return Y2(e,t)}switch(l){case it.bool:return q2(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return K2(e);case it.json:case it.jsonb:return X2(e);case it.timestamp:return J2(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return $y(e);default:return $y(e)}},$y=l=>l,q2=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},K2=l=>{if(typeof l=="string"){const e=parseFloat(l);if(!Number.isNaN(e))return e}return l},X2=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(e){return console.log(`JSON parse error: ${e}`),l}return l},Y2=(l,e)=>{if(typeof l!="string")return l;const t=l.length-1,s=l[t];if(l[0]==="{"&&s==="}"){let i;const o=l.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(c=>CA(e,c))}return l},J2=l=>typeof l=="string"?l.replace(" ","T"):l,PA=l=>{let e=l;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class gy{constructor(e,t,s={},n=EA){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var nS;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(nS||(nS={}));class Ad{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ad.syncState(this.state,n,i,o),this.pendingDiffs.forEach(d=>{this.state=Ad.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],c()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ad.syncDiff(this.state,n,i,o),c())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),o=this.transformState(t),c={},d={};return this.map(i,(f,p)=>{o[f]||(d[f]=p)}),this.map(o,(f,p)=>{const m=i[f];if(m){const w=p.map(E=>E.presence_ref),b=m.map(E=>E.presence_ref),A=p.filter(E=>b.indexOf(E.presence_ref)<0),_=m.filter(E=>w.indexOf(E.presence_ref)<0);A.length>0&&(c[f]=A),_.length>0&&(d[f]=_)}else c[f]=p}),this.syncDiff(i,{joins:c,leaves:d},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(c,d)=>{var f;const p=(f=e[c])!==null&&f!==void 0?f:[];if(e[c]=this.cloneDeep(d),p.length>0){const m=e[c].map(b=>b.presence_ref),w=p.filter(b=>m.indexOf(b.presence_ref)<0);e[c].unshift(...w)}s(c,p,d)}),this.map(o,(c,d)=>{let f=e[c];if(!f)return;const p=d.map(m=>m.presence_ref);f=f.filter(m=>p.indexOf(m.presence_ref)<0),e[c]=f,n(c,f,d),f.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rS;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(rS||(rS={}));var iS;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(iS||(iS={}));var li;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(li||(li={}));class mx{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=ys.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new gy(this,fr.join,this.params,this.timeout),this.rejoinTimer=new kA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ys.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ys.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ys.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ys.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fr.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Ad(this),this.broadcastEndpointURL=PA(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==ys.closed){const{config:{broadcast:i,presence:o,private:c}}=this.params;this._onError(p=>e==null?void 0:e(li.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(li.CLOSED));const d={},f={broadcast:i,presence:o,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(p=>p.filter))!==null&&n!==void 0?n:[],private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){e==null||e(li.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(m=w==null?void 0:w.length)!==null&&m!==void 0?m:0,A=[];for(let _=0;_<b;_++){const E=w[_],{filter:{event:T,schema:R,table:N,filter:j}}=E,I=p&&p[_];if(I&&I.event===T&&I.schema===R&&I.table===N&&I.filter===j)A.push(Object.assign(Object.assign({},E),{id:I.id}));else{this.unsubscribe(),this.state=ys.errored,e==null||e(li.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e(li.SUBSCRIBED);return}}).receive("error",p=>{this.state=ys.errored,e==null||e(li.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(li.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=f.body)===null||n===void 0?void 0:n.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,c,d;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),f.receive("ok",()=>i("ok")),f.receive("error",()=>i("error")),f.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ys.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new gy(this,fr.leave,{},e),s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new gy(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const o=e.toLocaleLowerCase(),{close:c,error:d,leave:f,join:p}=fr;if(s&&[c,d,f,p].indexOf(o)>=0&&s!==this._joinRef())return;let w=this._onMessage(o,t,s);if(t&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(b=>{var A,_,E;return((A=b.filter)===null||A===void 0?void 0:A.event)==="*"||((E=(_=b.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(b=>b.callback(w,s)):(i=this.bindings[o])===null||i===void 0||i.filter(b=>{var A,_,E,T,R,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in b){const j=b.id,I=(A=b.filter)===null||A===void 0?void 0:A.event;return j&&((_=t.ids)===null||_===void 0?void 0:_.includes(j))&&(I==="*"||(I==null?void 0:I.toLocaleLowerCase())===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const j=(R=(T=b==null?void 0:b.filter)===null||T===void 0?void 0:T.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return j==="*"||j===((N=t==null?void 0:t.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===o}).map(b=>{if(typeof w=="object"&&"ids"in w){const A=w.data,{schema:_,table:E,commit_timestamp:T,type:R,errors:N}=A;w=Object.assign(Object.assign({},{schema:_,table:E,commit_timestamp:T,eventType:R,new:{},old:{},errors:N}),this._getPayloadRecords(A))}b.callback(w,s)})}_isClosed(){return this.state===ys.closed}_isJoined(){return this.state===ys.joined}_isJoining(){return this.state===ys.joining}_isLeaving(){return this.state===ys.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&mx.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fr.close,{},e)}_onError(e){this._on(fr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ys.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=sS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=sS(e.columns,e.old_record)),t}}const aS=()=>{},Q2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Z2{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=EA,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=aS,this.ref=0,this.logger=aS,this.conn=null,this.sendBuffer=[],this.serializer=new W2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...c)=>fp(async()=>{const{default:d}=await Promise.resolve().then(()=>ch);return{default:d}},void 0).then(({default:d})=>d(...c)):o=fetch,(...c)=>o(...c)},this.endPoint=`${e}/${Fy.websocket}`,this.httpEndpoint=PA(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new kA(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=B2),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:H2}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Sd.connecting:return Mo.Connecting;case Sd.open:return Mo.Open;case Sd.closing:return Mo.Closing;default:return Mo.Closed}}isConnected(){return this.connectionState()===Mo.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new mx(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:n,ref:i}=e,o=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const n={access_token:t,version:z2};t&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(fr.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(V2,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:o}=t;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(c=>c._isMember(s)).forEach(c=>c._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(c=>c(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(fr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Q2],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class vx extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function es(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class eR extends vx{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class By extends vx{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var tR=function(l,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{f(s.next(p))}catch(m){o(m)}}function d(p){try{f(s.throw(p))}catch(m){o(m)}}function f(p){p.done?i(p.value):n(p.value).then(c,d)}f((s=s.apply(l,e||[])).next())})};const TA=l=>{let e;return l?e=l:typeof fetch>"u"?e=(...t)=>fp(async()=>{const{default:s}=await Promise.resolve().then(()=>ch);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},sR=()=>tR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fp(()=>Promise.resolve().then(()=>ch),void 0)).Response:Response}),Uy=l=>{if(Array.isArray(l))return l.map(t=>Uy(t));if(typeof l=="function"||l!==Object(l))return l;const e={};return Object.entries(l).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=Uy(s)}),e};var Ql=function(l,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{f(s.next(p))}catch(m){o(m)}}function d(p){try{f(s.throw(p))}catch(m){o(m)}}function f(p){p.done?i(p.value):n(p.value).then(c,d)}f((s=s.apply(l,e||[])).next())})};const my=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),nR=(l,e,t)=>Ql(void 0,void 0,void 0,function*(){const s=yield sR();l instanceof s&&!(t!=null&&t.noResolveJson)?l.json().then(n=>{e(new eR(my(n),l.status||500))}).catch(n=>{e(new By(my(n),n))}):e(new By(my(l),l))}),rR=(l,e,t,s)=>{const n={method:l,headers:(e==null?void 0:e.headers)||{}};return l==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function pp(l,e,t,s,n,i){return Ql(this,void 0,void 0,function*(){return new Promise((o,c)=>{l(t,rR(e,s,n,i)).then(d=>{if(!d.ok)throw d;return s!=null&&s.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>nR(d,c,s))})})}function Tm(l,e,t,s){return Ql(this,void 0,void 0,function*(){return pp(l,"GET",e,t,s)})}function ma(l,e,t,s,n){return Ql(this,void 0,void 0,function*(){return pp(l,"POST",e,s,n,t)})}function iR(l,e,t,s,n){return Ql(this,void 0,void 0,function*(){return pp(l,"PUT",e,s,n,t)})}function aR(l,e,t,s){return Ql(this,void 0,void 0,function*(){return pp(l,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function NA(l,e,t,s,n){return Ql(this,void 0,void 0,function*(){return pp(l,"DELETE",e,s,n,t)})}var Ws=function(l,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{f(s.next(p))}catch(m){o(m)}}function d(p){try{f(s.throw(p))}catch(m){o(m)}}function f(p){p.done?i(p.value):n(p.value).then(c,d)}f((s=s.apply(l,e||[])).next())})};const oR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},oS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lR{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=TA(n)}uploadOrUpdate(e,t,s,n){return Ws(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},oS),n);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=s,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,d&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),n!=null&&n.headers&&(c=Object.assign(Object.assign({},c),n.headers));const f=this._removeEmptyFolders(t),p=this._getFinalPath(f),m=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:e,body:i,headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{})),w=yield m.json();return m.ok?{data:{path:f,id:w.Id,fullPath:w.Key},error:null}:{data:null,error:w}}catch(i){if(es(i))return{data:null,error:i};throw i}})}upload(e,t,s){return Ws(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return Ws(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",t);try{let d;const f=Object.assign({upsert:oS.upsert},n),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&s instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",s)):typeof FormData<"u"&&s instanceof FormData?(d=s,d.append("cacheControl",f.cacheControl)):(d=s,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const m=yield this.fetch(c.toString(),{method:"PUT",body:d,headers:p}),w=yield m.json();return m.ok?{data:{path:i,fullPath:w.Key},error:null}:{data:null,error:w}}catch(d){if(es(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return Ws(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const i=yield ma(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),o=new URL(this.url+i.url),c=o.searchParams.get("token");if(!c)throw new vx("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:c},error:null}}catch(s){if(es(s))return{data:null,error:s};throw s}})}update(e,t,s){return Ws(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Ws(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(es(n))return{data:null,error:n};throw n}})}copy(e,t,s){return Ws(this,void 0,void 0,function*(){try{return{data:{path:(yield ma(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(es(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return Ws(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield ma(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(es(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return Ws(this,void 0,void 0,function*(){try{const n=yield ma(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(es(n))return{data:null,error:n};throw n}})}download(e,t){return Ws(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield Tm(this.fetch,`${this.url}/${n}/${c}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(es(c))return{data:null,error:c};throw c}})}info(e){return Ws(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Tm(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Uy(s),error:null}}catch(s){if(es(s))return{data:null,error:s};throw s}})}exists(e){return Ws(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield aR(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(es(s)&&s instanceof By){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});d!==""&&n.push(d);let f=n.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${s}${f}`)}}}remove(e){return Ws(this,void 0,void 0,function*(){try{return{data:yield NA(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(es(t))return{data:null,error:t};throw t}})}list(e,t,s){return Ws(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},oR),t),{prefix:e||""});return{data:yield ma(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(es(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const cR="2.7.1",uR={"X-Client-Info":`storage-js/${cR}`};var Rc=function(l,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{f(s.next(p))}catch(m){o(m)}}function d(p){try{f(s.throw(p))}catch(m){o(m)}}function f(p){p.done?i(p.value):n(p.value).then(c,d)}f((s=s.apply(l,e||[])).next())})};class hR{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},uR),t),this.fetch=TA(s)}listBuckets(){return Rc(this,void 0,void 0,function*(){try{return{data:yield Tm(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(es(e))return{data:null,error:e};throw e}})}getBucket(e){return Rc(this,void 0,void 0,function*(){try{return{data:yield Tm(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(es(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Rc(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(es(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Rc(this,void 0,void 0,function*(){try{return{data:yield iR(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(es(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Rc(this,void 0,void 0,function*(){try{return{data:yield ma(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(es(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Rc(this,void 0,void 0,function*(){try{return{data:yield NA(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(es(t))return{data:null,error:t};throw t}})}}class dR extends hR{constructor(e,t={},s){super(e,t,s)}from(e){return new lR(this.url,this.headers,e,this.fetch)}}const fR="2.51.0";let sd="";typeof Deno<"u"?sd="deno":typeof document<"u"?sd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sd="react-native":sd="node";const pR={"X-Client-Info":`supabase-js-${sd}/${fR}`},gR={headers:pR},mR={schema:"public"},vR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yR={};var wR=function(l,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{f(s.next(p))}catch(m){o(m)}}function d(p){try{f(s.throw(p))}catch(m){o(m)}}function f(p){p.done?i(p.value):n(p.value).then(c,d)}f((s=s.apply(l,e||[])).next())})};const xR=l=>{let e;return l?e=l:typeof fetch>"u"?e=wA:e=fetch,(...t)=>e(...t)},bR=()=>typeof Headers>"u"?xA:Headers,_R=(l,e,t)=>{const s=xR(t),n=bR();return(i,o)=>wR(void 0,void 0,void 0,function*(){var c;const d=(c=yield e())!==null&&c!==void 0?c:l;let f=new n(o==null?void 0:o.headers);return f.has("apikey")||f.set("apikey",l),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),s(i,Object.assign(Object.assign({},o),{headers:f}))})};var SR=function(l,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{f(s.next(p))}catch(m){o(m)}}function d(p){try{f(s.throw(p))}catch(m){o(m)}}function f(p){p.done?i(p.value):n(p.value).then(c,d)}f((s=s.apply(l,e||[])).next())})};function AR(l){return l.endsWith("/")?l:l+"/"}function ER(l,e){var t,s;const{db:n,auth:i,realtime:o,global:c}=l,{db:d,auth:f,realtime:p,global:m}=e,w={db:Object.assign(Object.assign({},d),n),auth:Object.assign(Object.assign({},f),i),realtime:Object.assign(Object.assign({},p),o),global:Object.assign(Object.assign(Object.assign({},m),c),{headers:Object.assign(Object.assign({},(t=m==null?void 0:m.headers)!==null&&t!==void 0?t:{}),(s=c==null?void 0:c.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>SR(this,void 0,void 0,function*(){return""})};return l.accessToken?w.accessToken=l.accessToken:delete w.accessToken,w}const RA="2.71.0",Dc=30*1e3,zy=3,vy=zy*Dc,kR="http://localhost:9999",CR="supabase.auth.token",PR={"X-Client-Info":`gotrue-js/${RA}`},Hy="X-Supabase-Api-Version",jA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},TR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,NR=10*60*1e3;class yx extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Re(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class RR extends yx{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function jR(l){return Re(l)&&l.name==="AuthApiError"}class LA extends yx{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ho extends yx{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class pa extends ho{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function LR(l){return Re(l)&&l.name==="AuthSessionMissingError"}class $g extends ho{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bg extends ho{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ug extends ho{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function IR(l){return Re(l)&&l.name==="AuthImplicitGrantRedirectError"}class lS extends ho{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vy extends ho{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function yy(l){return Re(l)&&l.name==="AuthRetryableFetchError"}class cS extends ho{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Wy extends ho{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Nm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),uS=` 	
\r=`.split(""),MR=(()=>{const l=new Array(128);for(let e=0;e<l.length;e+=1)l[e]=-1;for(let e=0;e<uS.length;e+=1)l[uS[e].charCodeAt(0)]=-2;for(let e=0;e<Nm.length;e+=1)l[Nm[e].charCodeAt(0)]=e;return l})();function hS(l,e,t){if(l!==null)for(e.queue=e.queue<<8|l,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Nm[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Nm[s]),e.queuedBits-=6}}function IA(l,e,t){const s=MR[l];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function dS(l){const e=[],t=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{FR(o,s,t)};for(let o=0;o<l.length;o+=1)IA(l.charCodeAt(o),n,i);return e.join("")}function DR(l,e){if(l<=127){e(l);return}else if(l<=2047){e(192|l>>6),e(128|l&63);return}else if(l<=65535){e(224|l>>12),e(128|l>>6&63),e(128|l&63);return}else if(l<=1114111){e(240|l>>18),e(128|l>>12&63),e(128|l>>6&63),e(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function OR(l,e){for(let t=0;t<l.length;t+=1){let s=l.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(l.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}DR(s,e)}}function FR(l,e,t){if(e.utf8seq===0){if(l<=127){t(l);return}for(let s=1;s<6;s+=1)if((l>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=l&31;else if(e.utf8seq===3)e.codepoint=l&15;else if(e.utf8seq===4)e.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|l&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function $R(l){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<l.length;n+=1)IA(l.charCodeAt(n),t,s);return new Uint8Array(e)}function BR(l){const e=[];return OR(l,t=>e.push(t)),new Uint8Array(e)}function UR(l){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};return l.forEach(n=>hS(n,t,s)),hS(null,t,s),e.join("")}function zR(l){return Math.round(Date.now()/1e3)+l}function HR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const e=Math.random()*16|0;return(l=="x"?e:e&3|8).toString(16)})}const Qn=()=>typeof window<"u"&&typeof document<"u",Po={tested:!1,writable:!1},MA=()=>{if(!Qn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Po.tested)return Po.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),Po.tested=!0,Po.writable=!0}catch{Po.tested=!0,Po.writable=!1}return Po.writable};function VR(l){const e={},t=new URL(l);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const DA=l=>{let e;return l?e=l:typeof fetch>"u"?e=(...t)=>fp(async()=>{const{default:s}=await Promise.resolve().then(()=>ch);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},WR=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",Oc=async(l,e,t)=>{await l.setItem(e,JSON.stringify(t))},To=async(l,e)=>{const t=await l.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},da=async(l,e)=>{await l.removeItem(e)};class o0{constructor(){this.promise=new o0.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}o0.promiseConstructor=Promise;function wy(l){const e=l.split(".");if(e.length!==3)throw new Wy("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!TR.test(e[s]))throw new Wy("JWT not in base64url format");return{header:JSON.parse(dS(e[0])),payload:JSON.parse(dS(e[1])),signature:$R(e[2]),raw:{header:e[0],payload:e[1]}}}async function GR(l){return await new Promise(e=>{setTimeout(()=>e(null),l)})}function qR(l,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await l(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function KR(l){return("0"+l.toString(16)).substr(-2)}function XR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,KR).join("")}async function YR(l){const t=new TextEncoder().encode(l),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function JR(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const t=await YR(l);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jc(l,e,t=!1){const s=XR();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await Oc(l,`${e}-code-verifier`,n);const i=await JR(s);return[i,s===i?"plain":"s256"]}const QR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ZR(l){const e=l.headers.get(Hy);if(!e||!e.match(QR))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ej(l){if(!l)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(l<=e)throw new Error("JWT has expired")}function tj(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Lc(l){if(!sj.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xy(){const l={};return new Proxy(l,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}var nj=function(l,e){var t={};for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&e.indexOf(s)<0&&(t[s]=l[s]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(l);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(l,s[n])&&(t[s[n]]=l[s[n]]);return t};const Ro=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),rj=[502,503,504];async function fS(l){var e;if(!WR(l))throw new Vy(Ro(l),0);if(rj.includes(l.status))throw new Vy(Ro(l),l.status);let t;try{t=await l.json()}catch(i){throw new LA(Ro(i),i)}let s;const n=ZR(l);if(n&&n.getTime()>=jA["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new cS(Ro(t),l.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new pa}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new cS(Ro(t),l.status,t.weak_password.reasons);throw new RR(Ro(t),l.status||500,s)}const ij=(l,e,t,s)=>{const n={method:l,headers:(e==null?void 0:e.headers)||{}};return l==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function Fe(l,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[Hy]||(i[Hy]=jA["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await aj(l,e,t+c,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(d):{data:Object.assign({},d),error:null}}async function aj(l,e,t,s,n,i){const o=ij(e,s,n,i);let c;try{c=await l(t,Object.assign({},o))}catch(d){throw console.error(d),new Vy(Ro(d),0)}if(c.ok||await fS(c),s!=null&&s.noResolveJson)return c;try{return await c.json()}catch(d){await fS(d)}}function ri(l){var e;let t=null;uj(l)&&(t=Object.assign({},l),l.expires_at||(t.expires_at=zR(l.expires_in)));const s=(e=l.user)!==null&&e!==void 0?e:l;return{data:{session:t,user:s},error:null}}function pS(l){const e=ri(l);return!e.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=l.weak_password),e}function ya(l){var e;return{data:{user:(e=l.user)!==null&&e!==void 0?e:l},error:null}}function oj(l){return{data:l,error:null}}function lj(l){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=l,o=nj(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},d=Object.assign({},o);return{data:{properties:c,user:d},error:null}}function cj(l){return l}function uj(l){return l.access_token&&l.refresh_token&&l.expires_in}const by=["global","local","others"];var hj=function(l,e){var t={};for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&e.indexOf(s)<0&&(t[s]=l[s]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(l);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(l,s[n])&&(t[s[n]]=l[s[n]]);return t};class dj{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=DA(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=by[0]){if(by.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${by.join(", ")}`);try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ya})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=hj(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:lj,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Re(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ya})}catch(t){if(Re(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,o,c,d;try{const f={nextPage:null,lastPage:0,total:0},p=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:cj});if(p.error)throw p.error;const m=await p.json(),w=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,b=(d=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(A=>{const _=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(A.split(";")[1].split("=")[1]);f[`${E}Page`]=_}),f.total=parseInt(w)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(Re(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Lc(e);try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ya})}catch(t){if(Re(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Lc(e);try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ya})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Lc(e);try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ya})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Lc(e.userId);try{const{data:t,error:s}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(Re(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Lc(e.userId),Lc(e.id);try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Re(t))return{data:null,error:t};throw t}}}function gS(l={}){return{getItem:e=>l[e]||null,setItem:(e,t)=>{l[e]=t},removeItem:e=>{delete l[e]}}}function fj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ic={debug:!!(globalThis&&MA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class OA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class pj extends OA{}async function gj(l,e,t){Ic.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ic.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Ic.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,n.name);try{return await t()}finally{Ic.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,n.name)}}else{if(e===0)throw Ic.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new pj(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(Ic.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}fj();const mj={url:kR,storageKey:CR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:PR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mS(l,e,t){return await t()}const Mc={};class Pd{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Pd.nextInstanceID,Pd.nextInstanceID+=1,this.instanceID>0&&Qn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},mj),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new dj({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=DA(n.fetch),this.lock=n.lock||mS,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Qn()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=gj:this.lock=mS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:MA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=gS(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=gS(this.memoryStorage)),Qn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Mc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Mc[this.storageKey]=Object.assign(Object.assign({},Mc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Mc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mc[this.storageKey]=Object.assign(Object.assign({},Mc[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${RA}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=VR(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Qn()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),IR(i)){const d=(e=i.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:c}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Re(t)?{error:t}:{error:new LA("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const i=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:ri}),{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if(Re(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{let i;if("email"in e){const{email:p,password:m,options:w}=e;let b=null,A=null;this.flowType==="pkce"&&([b,A]=await jc(this.storage,this.storageKey)),i=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:p,password:m,data:(t=w==null?void 0:w.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:b,code_challenge_method:A},xform:ri})}else if("phone"in e){const{phone:p,password:m,options:w}=e;i=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(s=w==null?void 0:w.data)!==null&&s!==void 0?s:{},channel:(n=w==null?void 0:w.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:ri})}else throw new Bg("You must provide either an email or phone number and a password");const{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if(Re(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:c}=e;t=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:pS})}else if("phone"in e){const{phone:i,password:o,options:c}=e;t=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:pS})}else throw new Bg("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new $g}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,i,o,c,d,f,p,m,w,b;let A,_;if("message"in e)A=e.message,_=e.signature;else{const{chain:E,wallet:T,statement:R,options:N}=e;let j;if(Qn())if(typeof T=="object")j=T;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))j=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=T}const I=new URL((t=N==null?void 0:N.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in j&&j.signIn){const F=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),R?{statement:R}:null));let B;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")B=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)B=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)A=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),_=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${I.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(n=(s=N==null?void 0:N.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=N==null?void 0:N.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((c=N==null?void 0:N.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((f=N==null?void 0:N.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((m=(p=N==null?void 0:N.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...N.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const F=await j.signMessage(new TextEncoder().encode(A),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=F}}try{const{data:E,error:T}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:UR(_)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:ri});if(T)throw T;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new $g}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:T})}catch(E){if(Re(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(e){const t=await To(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:i,error:o}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ri});if(await da(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new $g}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(Re(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:i,nonce:o}=e,c=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ri}),{data:d,error:f}=c;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new $g}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,o;try{if("email"in e){const{email:c,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await jc(this.storage,this.storageKey));const{error:m}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:c,options:d}=e,{data:f,error:p}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p}}throw new Bg("You must provide either an email or phone number.")}catch(c){if(Re(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,s;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:c}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:ri});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,f=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await jc(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:oj})}catch(i){if(Re(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new pa;const{error:n}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(Re(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:o}=await Fe(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:o,error:c}=await Fe(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c}}throw new Bg("You must provide either an email or phone number and a type")}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await To(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<vy:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await To(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=xy()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,f,p)=>(!o&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,p))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ya}):await this._useSession(async t=>{var s,n,i;const{data:o,error:c}=t;if(c)throw c;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pa}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:ya})})}catch(t){if(Re(t))return LR(t)&&(await this._removeSession(),await da(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new pa;const o=n.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await jc(this.storage,this.storageKey));const{data:f,error:p}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:o.access_token,xform:ya});if(p)throw p;return o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new pa;const t=Date.now()/1e3;let s=t,n=!0,i=null;const{payload:o}=wy(e.access_token);if(o.exp&&(s=o.exp,n=s<=t),n){const{session:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;i={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Re(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:c}=t;if(c)throw c;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new pa;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Qn())throw new Ug("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ug(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new lS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ug("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new lS("No code detected.");const{data:R,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:c,expires_at:d,token_type:f}=e;if(!i||!c||!o||!f)throw new Ug("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(c);let w=p+m;d&&(w=parseInt(d));const b=w-p;b*1e3<=Dc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${m}s`);const A=w-m;p-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,w,p):p-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,w,p);const{data:_,error:E}=await this._getUser(i);if(E)throw E;const T={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:m,expires_at:w,refresh_token:o,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:e.type},error:null}}catch(s){if(Re(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await To(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:c}=await this.admin.signOut(o,e);if(c&&!(jR(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await da(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=HR(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await jc(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Re(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Re(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var o,c,d,f,p;const{data:m,error:w}=i;if(w)throw w;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(n)throw n;return Qn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Re(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)throw o;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(Re(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await qR(async n=>(n>0&&await GR(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ri})),(n,i)=>{const o=200*Math.pow(2,n);return i&&yy(i)&&Date.now()+o-s<Dc})}catch(s){if(this._debug(t,"error",s),Re(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Qn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await To(this.storage,this.storageKey);if(n&&this.userStorage){let o=await To(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await Oc(this.userStorage,this.storageKey+"-user",o)),n.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:xy()}else if(n&&!n.user&&!n.user){const o=await To(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(n.user=o.user,await da(this.storage,this.storageKey+"-user"),await Oc(this.storage,this.storageKey,n)):n.user=xy()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<vy;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${vy}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),yy(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(n.access_token);!c&&(o!=null&&o.user)?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new pa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new o0;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new pa;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={session:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(n,"error",i),Re(i)){const o={session:null,error:i};return yy(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await Oc(this.userStorage,this.storageKey+"-user",{user:t.user});const n=Object.assign({},t);delete n.user;const i=structuredClone(n);await Oc(this.storage,this.storageKey,i)}else{const n=structuredClone(t);await Oc(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await da(this.storage,this.storageKey),await da(this.storage,this.storageKey+"-code-verifier"),await da(this.storage,this.storageKey+"-user"),this.userStorage&&await da(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Dc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Dc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Dc}ms, refresh threshold is ${zy} ticks`),n<=zy&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof OA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await jc(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(c.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Re(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:f}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((n=d==null?void 0:d.totp)===null||n===void 0)&&n.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(t){if(Re(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:c}=await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(t){if(Re(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Re(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=wy(n.access_token);let c=null;o.aal&&(c=o.aal);let d=c;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");const p=o.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(c=>c.kid===e);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(c=>c.kid===e),s&&this.jwks_cached_at+NR>n)return s;const{data:i,error:o}=await Fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,s=i.keys.find(c=>c.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:b,error:A}=await this.getSession();if(A||!b.session)return{data:null,error:A};s=b.session.access_token}const{header:n,payload:i,signature:o,raw:{header:c,payload:d}}=wy(s);t!=null&&t.allowExpired||ej(i.exp);const f=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!f){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:i,header:n,signature:o},error:null}}const p=tj(n.alg),m=await crypto.subtle.importKey("jwk",f,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,o,BR(`${c}.${d}`)))throw new Wy("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}}}Pd.nextInstanceID=0;const vj=Pd;class yj extends vj{constructor(e){super(e)}}var wj=function(l,e,t,s){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(p){try{f(s.next(p))}catch(m){o(m)}}function d(p){try{f(s.throw(p))}catch(m){o(m)}}function f(p){p.done?i(p.value):n(p.value).then(c,d)}f((s=s.apply(l,e||[])).next())})};class xj{constructor(e,t,s){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const c=AR(e),d=new URL(c);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:mR,realtime:yR,auth:Object.assign(Object.assign({},vR),{storageKey:f}),global:gR},m=ER(s??{},p);this.storageKey=(n=m.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=m.global.headers)!==null&&i!==void 0?i:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(w,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=m.auth)!==null&&o!==void 0?o:{},this.headers,m.global.fetch),this.fetch=_R(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new F2(new URL("rest/v1",d).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new k2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new dR(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return wj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:o,lock:c,debug:d},f,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yj({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),f),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:o,lock:c,debug:d,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Z2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const bj=(l,e,t)=>new xj(l,e,t),_j="https://orvdkxbdombdduljstog.supabase.co",Sj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ydmRreGJkb21iZGR1bGpzdG9nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3MjYzNDQsImV4cCI6MjA2ODMwMjM0NH0.ep8klxf1PFwPnb6rlf2KJGBJnsBDRzEdI1reCueUuBU",zt=bj(_j,Sj);async function Aj(){const{data:{user:l},error:e}=await zt.auth.getUser();return e?(console.error("Error getting user:",e),null):l}async function gp(){const{data:l,error:e}=await zt.from("categories").select("*").order("name");if(e)throw console.error("Error fetching categories:",e),e;return l}async function wx(l){let e=zt.from("white_papers").select("*").eq("status","published").order("created_at",{ascending:!1});l&&(e=e.eq("category_id",l));const{data:t,error:s}=await e;if(s)throw console.error("Error fetching white papers:",s),s;return t}async function Ej(l){const{data:e,error:t}=await zt.from("white_papers").select("*").eq("id",l).eq("status","published").maybeSingle();if(t)throw console.error("Error fetching white paper:",t),t;return e}async function kj(l,e,t){try{const{data:s}=await zt.from("white_papers").select("views").eq("id",l).maybeSingle();if(s){const{error:i}=await zt.from("white_papers").update({views:(s.views||0)+1}).eq("id",l);i&&console.error("Error updating views:",i)}const{error:n}=await zt.from("paper_views").insert({paper_id:l,user_id:e,ip_address:t});n&&console.error("Error logging view:",n)}catch(s){console.error("Error incrementing paper views:",s)}}async function vS(l){const{data:e,error:t}=await zt.from("profiles").select("*").eq("id",l).maybeSingle();if(t)throw console.error("Error fetching user profile:",t),t;return e}async function Cj(){const{data:l,error:e}=await zt.from("submissions").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Error fetching submissions:",e),e;return l}const FA=D.createContext(void 0);function Zl(){const l=D.useContext(FA);if(l===void 0)throw new Error("useAuth must be used within an AuthProvider");return l}function Pj({children:l}){const[e,t]=D.useState(null),[s,n]=D.useState(null),[i,o]=D.useState(!0);D.useEffect(()=>{async function w(){o(!0);try{const A=await Aj();if(t(A),A){const _=await vS(A.id);n(_)}}catch(A){console.error("Error loading user:",A)}finally{o(!1)}}w();const{data:{subscription:b}}=zt.auth.onAuthStateChange(async(A,_)=>{setTimeout(async()=>{if(_!=null&&_.user){t(_.user);try{const E=await vS(_.user.id);n(E)}catch(E){console.error("Error loading profile:",E)}}else t(null),n(null)},0)});return()=>b.unsubscribe()},[]);async function c(w,b){const{data:A,error:_}=await zt.auth.signInWithPassword({email:w,password:b});if(_)throw _;return A}async function d(w,b,A){try{const{data:_,error:E}=await zt.functions.invoke("enhanced-signup",{body:{email:w,password:b,fullName:A}});if(E)throw new Error(E.message||"Signup failed");if(!_.success)throw new Error(_.error||"Signup failed");return{user:_.data.user,session:null,method:_.method}}catch(_){throw console.error("Error signing up:",_.message),_}}async function f(){const{error:w}=await zt.auth.signOut();if(w)throw w}const p=(s==null?void 0:s.role)==="admin",m={user:e,profile:s,loading:i,signIn:c,signUp:d,signOut:f,isAdmin:p};return y.jsx(FA.Provider,{value:m,children:l})}/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(l,e)=>{const t=D.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,...f},p)=>D.createElement("svg",{ref:p,...Tj,width:n,height:n,stroke:s,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${Nj(l)}`,c].join(" "),...f},[...e.map(([m,w])=>D.createElement(m,w)),...Array.isArray(d)?d:[d]]));return t.displayName=`${l}`,t};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=Be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=Be("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=Be("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=Be("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=Be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=Be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=Be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=Be("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=Be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=Be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=Be("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=Be("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=Be("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=Be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=Be("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=Be("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=Be("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=Be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=Be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=Be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=Be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=Be("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=Be("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=Be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=Be("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=Be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=Be("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=Be("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=Be("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function Gj(){const{user:l,profile:e,signOut:t,isAdmin:s}=Zl(),n=Xl(),[i,o]=D.useState(!1),c=async()=>{try{await t(),He.success("Signed out successfully")}catch{He.error("Error signing out")}},d=f=>n.pathname===f;return y.jsx("header",{className:"bg-white/90 backdrop-blur-md shadow-sm border-b border-slate-200/50 sticky top-0 z-50",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"flex justify-between items-center h-16",children:[y.jsxs(Is,{to:"/",className:"flex items-center space-x-3 group",children:[y.jsxs("div",{className:"relative",children:[y.jsx(Gl,{className:"h-8 w-8 text-blue-600 group-hover:text-blue-700 transition-colors"}),y.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg blur opacity-25 group-hover:opacity-40 transition-opacity"})]}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AI Research Hub"}),y.jsx("p",{className:"text-xs text-slate-500 -mt-1",children:"White Paper Platform"})]})]}),y.jsxs("nav",{className:"hidden md:flex space-x-8",children:[y.jsx(Is,{to:"/",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${d("/")?"text-blue-600 bg-blue-50":"text-slate-700 hover:text-blue-600 hover:bg-slate-50"}`,children:"Discover"}),l&&y.jsx(Is,{to:"/submit",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${d("/submit")?"text-blue-600 bg-blue-50":"text-slate-700 hover:text-blue-600 hover:bg-slate-50"}`,children:"Submit Paper"}),s&&y.jsx(Is,{to:"/admin",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${d("/admin")?"text-blue-600 bg-blue-50":"text-slate-700 hover:text-blue-600 hover:bg-slate-50"}`,children:"Admin"})]}),y.jsx("div",{className:"hidden md:flex items-center space-x-4",children:l?y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-slate-50 rounded-lg",children:[y.jsx(Nd,{className:"h-4 w-4 text-slate-600"}),y.jsx("span",{className:"text-sm font-medium text-slate-700",children:(e==null?void 0:e.full_name)||l.email}),s&&y.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 rounded-full font-medium",children:"Admin"})]}),y.jsxs("button",{onClick:c,className:"flex items-center space-x-1 px-3 py-2 text-sm font-medium text-slate-700 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[y.jsx(xS,{className:"h-4 w-4"}),y.jsx("span",{children:"Sign Out"})]})]}):y.jsx(Is,{to:"/auth",className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Sign In"})}),y.jsx("div",{className:"md:hidden",children:y.jsx("button",{onClick:()=>o(!i),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:i?y.jsx(WA,{className:"h-6 w-6"}):y.jsx(Uj,{className:"h-6 w-6"})})})]}),i&&y.jsx("div",{className:"md:hidden border-t border-slate-200 py-4",children:y.jsxs("div",{className:"flex flex-col space-y-2",children:[y.jsx(Is,{to:"/",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${d("/")?"text-blue-600 bg-blue-50":"text-slate-700 hover:text-blue-600 hover:bg-slate-50"}`,onClick:()=>o(!1),children:"Discover"}),l&&y.jsx(Is,{to:"/submit",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${d("/submit")?"text-blue-600 bg-blue-50":"text-slate-700 hover:text-blue-600 hover:bg-slate-50"}`,onClick:()=>o(!1),children:"Submit Paper"}),s&&y.jsx(Is,{to:"/admin",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${d("/admin")?"text-blue-600 bg-blue-50":"text-slate-700 hover:text-blue-600 hover:bg-slate-50"}`,onClick:()=>o(!1),children:"Admin"}),y.jsx("div",{className:"border-t border-slate-200 pt-4 mt-4",children:l?y.jsxs("div",{className:"space-y-2",children:[y.jsx("div",{className:"px-3 py-2 bg-slate-50 rounded-lg",children:y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Nd,{className:"h-4 w-4 text-slate-600"}),y.jsx("span",{className:"text-sm font-medium text-slate-700",children:(e==null?void 0:e.full_name)||l.email}),s&&y.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 rounded-full font-medium",children:"Admin"})]})}),y.jsxs("button",{onClick:c,className:"w-full flex items-center space-x-2 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[y.jsx(xS,{className:"h-4 w-4"}),y.jsx("span",{children:"Sign Out"})]})]}):y.jsx(Is,{to:"/auth",className:"block w-full px-3 py-2 bg-blue-600 text-white text-center rounded-lg font-medium hover:bg-blue-700 transition-colors",onClick:()=>o(!1),children:"Sign In"})})]})})]})})}function qj(){return y.jsx("footer",{className:"bg-slate-900 text-white",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[y.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[y.jsxs("div",{className:"md:col-span-1",children:[y.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[y.jsx(Gl,{className:"h-8 w-8 text-blue-400"}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold",children:"AI Research Hub"}),y.jsx("p",{className:"text-xs text-slate-400",children:"White Paper Platform"})]})]}),y.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Discover, read, and contribute to cutting-edge AI research with intelligent summarization and community-driven insights."})]}),y.jsxs("div",{className:"md:col-span-1",children:[y.jsx("h4",{className:"font-semibold text-white mb-4",children:"Research Areas"}),y.jsxs("ul",{className:"space-y-2 text-sm",children:[y.jsx("li",{children:y.jsx("a",{href:"/category/machine-learning",className:"text-slate-400 hover:text-blue-400 transition-colors",children:"Machine Learning"})}),y.jsx("li",{children:y.jsx("a",{href:"/category/computer-vision",className:"text-slate-400 hover:text-blue-400 transition-colors",children:"Computer Vision"})}),y.jsx("li",{children:y.jsx("a",{href:"/category/natural-language-processing",className:"text-slate-400 hover:text-blue-400 transition-colors",children:"NLP"})}),y.jsx("li",{children:y.jsx("a",{href:"/category/robotics",className:"text-slate-400 hover:text-blue-400 transition-colors",children:"Robotics"})}),y.jsx("li",{children:y.jsx("a",{href:"/category/ai-ethics",className:"text-slate-400 hover:text-blue-400 transition-colors",children:"AI Ethics"})})]})]}),y.jsxs("div",{className:"md:col-span-1",children:[y.jsx("h4",{className:"font-semibold text-white mb-4",children:"Platform"}),y.jsxs("ul",{className:"space-y-2 text-sm",children:[y.jsx("li",{children:y.jsx("a",{href:"/",className:"text-slate-400 hover:text-blue-400 transition-colors",children:"Discover Papers"})}),y.jsx("li",{children:y.jsx("a",{href:"/submit",className:"text-slate-400 hover:text-blue-400 transition-colors",children:"Submit Research"})}),y.jsx("li",{children:y.jsx("a",{href:"/auth",className:"text-slate-400 hover:text-blue-400 transition-colors",children:"Join Community"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-slate-400 hover:text-blue-400 transition-colors",children:"API Access"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-slate-400 hover:text-blue-400 transition-colors",children:"Guidelines"})})]})]}),y.jsxs("div",{className:"md:col-span-1",children:[y.jsx("h4",{className:"font-semibold text-white mb-4",children:"Connect"}),y.jsxs("div",{className:"flex space-x-4 mb-4",children:[y.jsx("a",{href:"#",className:"text-slate-400 hover:text-blue-400 transition-colors",children:y.jsx(Bj,{className:"h-5 w-5"})}),y.jsx("a",{href:"#",className:"text-slate-400 hover:text-blue-400 transition-colors",children:y.jsx(Hj,{className:"h-5 w-5"})}),y.jsx("a",{href:"#",className:"text-slate-400 hover:text-blue-400 transition-colors",children:y.jsx(UA,{className:"h-5 w-5"})})]}),y.jsx("p",{className:"text-slate-400 text-sm",children:"Stay updated with the latest AI research breakthroughs and platform updates."})]})]}),y.jsx("div",{className:"border-t border-slate-800 pt-8 mt-8",children:y.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[y.jsx("p",{className:"text-slate-400 text-sm",children:" 2025 AI Research Hub. Advancing knowledge through intelligent collaboration."}),y.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[y.jsx("a",{href:"#",className:"text-slate-400 hover:text-blue-400 text-sm transition-colors",children:"Privacy"}),y.jsx("a",{href:"#",className:"text-slate-400 hover:text-blue-400 text-sm transition-colors",children:"Terms"}),y.jsx("a",{href:"#",className:"text-slate-400 hover:text-blue-400 text-sm transition-colors",children:"Support"})]})]})})]})})}function Kj({children:l}){return y.jsxs("div",{className:"min-h-screen flex flex-col",children:[y.jsx(Gj,{}),y.jsx("main",{className:"flex-1",children:l}),y.jsx(qj,{})]})}function zn({size:l="md",className:e=""}){const t={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return y.jsx("div",{className:`flex items-center justify-center ${e}`,children:y.jsx("div",{className:`animate-spin rounded-full border-2 border-slate-300 border-t-blue-600 ${t[l]}`})})}function GA({paper:l,category:e}){const t=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),s=(n,i)=>n.length<=i?n:n.substring(0,i)+"...";return y.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-all duration-200 overflow-hidden group",children:[y.jsxs("div",{className:"p-6 pb-4",children:[y.jsx("div",{className:"flex items-start justify-between mb-3",children:y.jsxs("div",{className:"flex-1",children:[e&&y.jsx("span",{className:"inline-block px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-full mb-2",children:e.name}),y.jsx("h3",{className:"text-lg font-semibold text-slate-900 group-hover:text-blue-600 transition-colors leading-tight",children:y.jsx(Is,{to:`/paper/${l.id}`,className:"hover:underline",children:l.title})})]})}),y.jsxs("div",{className:"flex items-center text-sm text-slate-600 mb-3",children:[y.jsx(Nd,{className:"h-4 w-4 mr-1"}),y.jsx("span",{className:"mr-4",children:l.author}),y.jsx(BA,{className:"h-4 w-4 mr-1"}),y.jsx("span",{children:t(l.created_at)})]}),y.jsx("p",{className:"text-slate-700 text-sm leading-relaxed mb-4",children:s(l.description,120)}),l.ai_summary&&y.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-3 mb-4",children:[y.jsxs("div",{className:"flex items-center mb-2",children:[y.jsx(Wl,{className:"h-4 w-4 text-purple-600 mr-1"}),y.jsx("span",{className:"text-xs font-medium text-purple-800",children:"AI Insights"})]}),y.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:s(l.ai_summary,100)})]})]}),y.jsx("div",{className:"px-6 pb-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center text-sm text-slate-500",children:[y.jsx(Td,{className:"h-4 w-4 mr-1"}),y.jsxs("span",{children:[l.views||0," views"]})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("div",{className:"flex items-center space-x-1",children:l.presentation_url&&y.jsx("a",{href:l.presentation_url,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"View presentation",children:y.jsx(Rm,{className:"h-4 w-4"})})}),y.jsxs(Is,{to:`/paper/${l.id}`,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-1",children:[y.jsx(Bn,{className:"h-4 w-4"}),y.jsx("span",{children:"Read"})]})]})]})})]})}function Xj({categories:l,selectedCategory:e,onChange:t}){return y.jsx("div",{className:"relative",children:y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx($j,{className:"h-5 w-5 text-slate-600"}),y.jsxs("select",{value:e||"",onChange:s=>t(s.target.value?parseInt(s.target.value):null),className:"appearance-none bg-white border border-slate-300 rounded-lg px-4 py-2 pr-8 text-sm font-medium text-slate-700 hover:border-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-w-[180px]",children:[y.jsx("option",{value:"",children:"All Categories"}),l.map(s=>y.jsx("option",{value:s.id,children:s.name},s.id))]}),y.jsx(Lj,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400 pointer-events-none"})]})})}function qA({value:l,onChange:e,placeholder:t="Search papers..."}){return y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(l0,{className:"h-5 w-5 text-slate-400"})}),y.jsx("input",{type:"text",value:l,onChange:s=>e(s.target.value),className:"block w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg bg-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:t}),l&&y.jsx("button",{onClick:()=>e(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 transition-colors",children:y.jsx(WA,{className:"h-5 w-5"})})]})}function Yj({totalPapers:l,totalCategories:e}){const t=[{icon:Bn,label:"Research Papers",value:l.toLocaleString(),description:"Peer-reviewed publications",color:"blue"},{icon:Gl,label:"AI Categories",value:e,description:"Specialized research areas",color:"purple"},{icon:HA,label:"Active Researchers",value:"150+",description:"Contributing scientists",color:"green"},{icon:xx,label:"Monthly Growth",value:"25%",description:"New publications",color:"orange"}],s=n=>{const i={blue:"text-blue-600 bg-blue-100",purple:"text-purple-600 bg-purple-100",green:"text-green-600 bg-green-100",orange:"text-orange-600 bg-orange-100"};return i[n]||i.blue};return y.jsx("section",{className:"py-12 bg-white border-b border-slate-100",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-slate-900 mb-2",children:"Platform Impact"}),y.jsx("p",{className:"text-slate-600 max-w-2xl mx-auto",children:"Join a growing community of AI researchers and practitioners sharing cutting-edge knowledge"})]}),y.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8",children:t.map((n,i)=>{const o=n.icon;return y.jsxs("div",{className:"text-center group",children:[y.jsx("div",{className:"flex justify-center mb-4",children:y.jsx("div",{className:`p-4 rounded-xl ${s(n.color)} group-hover:scale-110 transition-transform duration-200`,children:y.jsx(o,{className:"h-8 w-8"})})}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("p",{className:"text-3xl lg:text-4xl font-bold text-slate-900",children:n.value}),y.jsx("p",{className:"font-medium text-slate-700",children:n.label}),y.jsx("p",{className:"text-sm text-slate-500",children:n.description})]})]},i)})})]})})}function Jj(){const{user:l}=Zl();return y.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[y.jsxs("div",{className:"absolute inset-0 opacity-10",children:[y.jsx("div",{className:"absolute top-10 left-10 w-20 h-20 bg-blue-500 rounded-full blur-xl"}),y.jsx("div",{className:"absolute top-40 right-20 w-32 h-32 bg-purple-500 rounded-full blur-xl"}),y.jsx("div",{className:"absolute bottom-20 left-1/3 w-24 h-24 bg-blue-400 rounded-full blur-xl"})]}),y.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-24",children:y.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-100 to-purple-100 rounded-full",children:[y.jsx(Wl,{className:"h-4 w-4 text-blue-600 mr-2"}),y.jsx("span",{className:"text-sm font-medium text-blue-800",children:"AI-Powered Research Platform"})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("h1",{className:"text-4xl lg:text-6xl font-bold leading-tight",children:[y.jsx("span",{className:"text-slate-900",children:"Discover"}),y.jsx("br",{}),y.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AI Research"}),y.jsx("br",{}),y.jsx("span",{className:"text-slate-900",children:"with Intelligence"})]}),y.jsx("p",{className:"text-xl text-slate-600 leading-relaxed max-w-2xl",children:"Access cutting-edge AI white papers with intelligent summarization, section-by-section explanations, and community-driven insights. Powered by Google Gemini AI."})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[y.jsxs(Is,{to:"#papers",onClick:e=>{var t;e.preventDefault(),(t=document.querySelector(".max-w-7xl"))==null||t.scrollIntoView({behavior:"smooth"})},className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl group",children:[y.jsx(l0,{className:"h-5 w-5 mr-2"}),"Explore Papers",y.jsx(Rj,{className:"h-4 w-4 ml-2 group-hover:translate-x-1 transition-transform"})]}),l?y.jsxs(Is,{to:"/submit",className:"inline-flex items-center px-6 py-3 bg-white text-slate-700 font-medium rounded-lg border border-slate-300 hover:bg-slate-50 hover:border-slate-400 transition-colors",children:[y.jsx(Bn,{className:"h-5 w-5 mr-2"}),"Submit Research"]}):y.jsxs(Is,{to:"/auth",className:"inline-flex items-center px-6 py-3 bg-white text-slate-700 font-medium rounded-lg border border-slate-300 hover:bg-slate-50 hover:border-slate-400 transition-colors",children:[y.jsx(Bn,{className:"h-5 w-5 mr-2"}),"Join Community"]})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 pt-8",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:y.jsx(Gl,{className:"h-5 w-5 text-blue-600"})}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-slate-900",children:"AI Summaries"}),y.jsx("p",{className:"text-sm text-slate-600",children:"Intelligent insights"})]})]}),y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:y.jsx(Bn,{className:"h-5 w-5 text-purple-600"})}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-slate-900",children:"Multi-Media"}),y.jsx("p",{className:"text-sm text-slate-600",children:"PDFs, slides, audio"})]})]}),y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:y.jsx(xx,{className:"h-5 w-5 text-green-600"})}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-slate-900",children:"Latest Research"}),y.jsx("p",{className:"text-sm text-slate-600",children:"Always up-to-date"})]})]})]})]}),y.jsx("div",{className:"relative lg:pl-8",children:y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 border border-slate-200",children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:y.jsx(Gl,{className:"h-6 w-6 text-blue-600"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-slate-900",children:"Advanced Neural Networks"}),y.jsx("p",{className:"text-sm text-slate-600",children:"Dr. Sarah Chen  Dec 2024"})]})]}),y.jsx("div",{className:"h-32 bg-gradient-to-r from-slate-100 to-slate-50 rounded-lg flex items-center justify-center",children:y.jsx(Bn,{className:"h-12 w-12 text-slate-400"})}),y.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-4",children:[y.jsxs("div",{className:"flex items-center mb-2",children:[y.jsx(Wl,{className:"h-4 w-4 text-purple-600 mr-2"}),y.jsx("span",{className:"text-xs font-medium text-purple-800",children:"AI Summary"})]}),y.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:"This research introduces novel transformer architectures that achieve 15% better performance on complex reasoning tasks..."})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm text-slate-500",children:"1,234 views"}),y.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg",children:"Read Full Paper"})]})]})}),y.jsx("div",{className:"absolute -top-4 -right-4 p-3 bg-white rounded-xl shadow-lg border border-slate-200",children:y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),y.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Live Updates"})]})}),y.jsx("div",{className:"absolute -bottom-4 -left-4 p-3 bg-white rounded-xl shadow-lg border border-slate-200",children:y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Wl,{className:"h-4 w-4 text-purple-600"}),y.jsx("span",{className:"text-xs font-medium text-slate-700",children:"AI Powered"})]})})]})})]})})]})}function Qj(){var A;const[l,e]=D.useState([]),[t,s]=D.useState([]),[n,i]=D.useState([]),[o,c]=D.useState(null),[d,f]=D.useState(""),[p,m]=D.useState(!0);D.useEffect(()=>{async function _(){try{m(!0);const[E,T]=await Promise.all([gp(),wx()]);e(E),s(T),i(T)}catch(E){console.error("Error loading data:",E),He.error("Failed to load papers")}finally{m(!1)}}_()},[]),D.useEffect(()=>{let _=t;if(o&&(_=_.filter(E=>E.category_id===o)),d){const E=d.toLowerCase();_=_.filter(T=>T.title.toLowerCase().includes(E)||T.description.toLowerCase().includes(E)||T.author.toLowerCase().includes(E)||T.ai_summary.toLowerCase().includes(E))}i(_)},[t,o,d]);const w=_=>{c(_)},b=_=>{f(_)};return p?y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsx(zn,{size:"lg"})}):y.jsxs("div",{className:"min-h-screen",children:[y.jsx(Jj,{}),y.jsx(Yj,{totalPapers:t.length,totalCategories:l.length}),y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[y.jsx("div",{className:"mb-8",children:y.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[y.jsx("div",{className:"flex-1 max-w-2xl",children:y.jsx(qA,{value:d,onChange:b,placeholder:"Search papers by title, author, content, or AI insights..."})}),y.jsx("div",{className:"lg:ml-6",children:y.jsx(Xj,{categories:l,selectedCategory:o,onChange:w})})]})}),y.jsx("div",{className:"mb-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Bn,{className:"h-5 w-5 text-slate-600"}),y.jsxs("span",{className:"text-slate-600",children:[n.length," paper",n.length!==1?"s":""," found",o&&y.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:(A=l.find(_=>_.id===o))==null?void 0:A.name}),d&&y.jsxs("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:['"',d,'"']})]})]}),(o||d)&&y.jsx("button",{onClick:()=>{c(null),f("")},className:"text-sm text-slate-500 hover:text-slate-700 transition-colors",children:"Clear filters"})]})}),n.length>0?y.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(_=>y.jsx(GA,{paper:_,category:l.find(E=>E.id===_.category_id)},_.id))}):y.jsxs("div",{className:"text-center py-12",children:[y.jsx("div",{className:"mx-auto w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:y.jsx(l0,{className:"h-8 w-8 text-slate-400"})}),y.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No papers found"}),y.jsx("p",{className:"text-slate-600 mb-6",children:d||o?"Try adjusting your search or filter criteria":"No papers have been published yet"}),d||o?y.jsx("button",{onClick:()=>{c(null),f("")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Clear filters"}):y.jsx(Is,{to:"/submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Submit the first paper"})]})]})]})}const Ls=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),qy=[.001,0,0,.001,0,0],Sy=1.35,vn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},zr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Zj="pdfjs_internal_editor_",Te={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Ue={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},KA={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ms={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ed={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},kt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Fc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},mp={ERRORS:0,WARNINGS:1,INFOS:5},Rd={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},zg={moveTo:0,lineTo:1,curveTo:2,closePath:3},XA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let c0=mp.WARNINGS;function eL(l){Number.isInteger(l)&&(c0=l)}function tL(){return c0}function u0(l){c0>=mp.INFOS&&console.log(`Info: ${l}`)}function Ne(l){c0>=mp.WARNINGS&&console.log(`Warning: ${l}`)}function tt(l){throw new Error(l)}function Mt(l,e){l||tt(e)}function sL(l){switch(l==null?void 0:l.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function bx(l,e=null,t=null){if(!l)return null;if(t&&typeof l=="string"){if(t.addDefaultProtocol&&l.startsWith("www.")){const n=l.match(/\./g);(n==null?void 0:n.length)>=2&&(l=`http://${l}`)}if(t.tryConvertEncoding)try{l=oL(l)}catch{}}const s=e?URL.parse(l,e):URL.parse(l);return sL(s)?s:null}function _x(l,e,t=!1){const s=URL.parse(l);return s?(s.hash=e,s.href):t&&bx(l,"http://example.com")?l.split("#",1)[0]+`${e?`#${e}`:""}`:""}function $e(l,e,t,s=!1){return Object.defineProperty(l,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const ec=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class _S extends ec{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Ay extends ec{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class jm extends ec{constructor(e){super(e,"InvalidPDFException")}}class jd extends ec{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class nL extends ec{constructor(e){super(e,"FormatError")}}class Hi extends ec{constructor(e){super(e,"AbortException")}}function YA(l){(typeof l!="object"||(l==null?void 0:l.length)===void 0)&&tt("Invalid argument for bytesToString");const e=l.length,t=8192;if(e<t)return String.fromCharCode.apply(null,l);const s=[];for(let n=0;n<e;n+=t){const i=Math.min(n+t,e),o=l.subarray(n,i);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function vp(l){typeof l!="string"&&tt("Invalid argument for stringToBytes");const e=l.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=l.charCodeAt(s)&255;return t}function rL(l){return String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,l&255)}function iL(){const l=new Uint8Array(4);return l[0]=1,new Uint32Array(l.buffer,0,1)[0]===1}function aL(){try{return new Function(""),!0}catch{return!1}}class ts{static get isLittleEndian(){return $e(this,"isLittleEndian",iL())}static get isEvalSupported(){return $e(this,"isEvalSupported",aL())}static get isOffscreenCanvasSupported(){return $e(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return $e(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return $e(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return $e(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Ey=Array.from(Array(256).keys(),l=>l.toString(16).padStart(2,"0"));var Bi,Jg,Ky;class ve{static makeHexColor(e,t,s){return`#${Ey[e]}${Ey[t]}${Ey[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,s=0){const n=e[s],i=e[s+1];e[s]=n*t[0]+i*t[2]+t[4],e[s+1]=n*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const n=t[0],i=t[1],o=t[2],c=t[3],d=t[4],f=t[5];for(let p=0;p<6;p+=2){const m=e[s+p],w=e[s+p+1];e[s+p]=m*n+w*o+d,e[s+p+1]=m*i+w*c+f}}static applyInverseTransform(e,t){const s=e[0],n=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-n*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-s*t[1]+n*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,s){const n=t[0],i=t[1],o=t[2],c=t[3],d=t[4],f=t[5],p=e[0],m=e[1],w=e[2],b=e[3];let A=n*p+d,_=A,E=n*w+d,T=E,R=c*m+f,N=R,j=c*b+f,I=j;if(i!==0||o!==0){const F=i*p,B=i*w,W=o*m,K=o*b;A+=W,T+=W,E+=K,_+=K,R+=F,I+=F,j+=B,N+=B}s[0]=Math.min(s[0],A,E,_,T),s[1]=Math.min(s[1],R,j,N,I),s[2]=Math.max(s[2],A,E,_,T),s[3]=Math.max(s[3],R,j,N,I)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],n=e[1],i=e[2],o=e[3],c=s**2+n**2,d=s*i+n*o,f=i**2+o**2,p=(c+f)/2,m=Math.sqrt(p**2-(c*f-d**2));t[0]=Math.sqrt(p+m||1),t[1]=Math.sqrt(p-m||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>n)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[s,i,n,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,n,i){i[0]=Math.min(i[0],e,s),i[1]=Math.min(i[1],t,n),i[2]=Math.max(i[2],e,s),i[3]=Math.max(i[3],t,n)}static bezierBoundingBox(e,t,s,n,i,o,c,d,f){f[0]=Math.min(f[0],e,c),f[1]=Math.min(f[1],t,d),f[2]=Math.max(f[2],e,c),f[3]=Math.max(f[3],t,d),C(this,Bi,Ky).call(this,e,s,i,c,t,n,o,d,3*(-e+3*(s-i)+c),6*(e-2*s+i),3*(s-e),f),C(this,Bi,Ky).call(this,e,s,i,c,t,n,o,d,3*(-t+3*(n-o)+d),6*(t-2*n+o),3*(n-t),f)}}Bi=new WeakSet,Jg=function(e,t,s,n,i,o,c,d,f,p){if(f<=0||f>=1)return;const m=1-f,w=f*f,b=w*f,A=m*(m*(m*e+3*f*t)+3*w*s)+b*n,_=m*(m*(m*i+3*f*o)+3*w*c)+b*d;p[0]=Math.min(p[0],A),p[1]=Math.min(p[1],_),p[2]=Math.max(p[2],A),p[3]=Math.max(p[3],_)},Ky=function(e,t,s,n,i,o,c,d,f,p,m,w){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&C(this,Bi,Jg).call(this,e,t,s,n,i,o,c,d,-m/p,w);return}const b=p**2-4*m*f;if(b<0)return;const A=Math.sqrt(b),_=2*f;C(this,Bi,Jg).call(this,e,t,s,n,i,o,c,d,(-p+A)/_,w),C(this,Bi,Jg).call(this,e,t,s,n,i,o,c,d,(-p-A)/_,w)},k(ve,Bi);function oL(l){return decodeURIComponent(escape(l))}let ky=null,SS=null;function JA(l){return ky||(ky=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,SS=new Map([["","t"]])),l.replaceAll(ky,(e,t,s)=>t?t.normalize("NFKC"):SS.get(s))}function Sx(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const l=new Uint8Array(32);return crypto.getRandomValues(l),YA(l)}const Ax="pdfjs_internal_id_";function lL(l,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,n,...i]=t;if(!l(s)&&!Number.isInteger(s)||!e(n))return!1;const o=i.length;let c=!0;switch(n.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;c=!1;break;default:return!1}for(const d of i)if(!(typeof d=="number"||c&&d===null))return!1;return!0}function Ss(l,e,t){return Math.min(Math.max(l,e),t)}function QA(l){return Uint8Array.prototype.toBase64?l.toBase64():btoa(YA(l))}function cL(l){return Uint8Array.fromBase64?Uint8Array.fromBase64(l):vp(atob(l))}typeof Promise.try!="function"&&(Promise.try=function(l,...e){return new Promise(t=>{t(l(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(l){return l.reduce((e,t)=>e+t,0)});const ii="http://www.w3.org/2000/svg",Do=class Do{};ee(Do,"CSS",96),ee(Do,"PDF",72),ee(Do,"PDF_TO_CSS_UNITS",Do.CSS/Do.PDF);let Vi=Do;async function uh(l,e="text"){if(nd(l,document.baseURI)){const t=await fetch(l);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const n=new XMLHttpRequest;n.open("GET",l,!0),n.responseType=e,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(n.response);return}t(n.responseText);return}s(new Error(n.statusText))}},n.send(null)})}class yp{constructor({viewBox:e,userUnit:t,scale:s,rotation:n,offsetX:i=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=n,this.offsetX=i,this.offsetY=o,s*=t;const d=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let p,m,w,b;switch(n%=360,n<0&&(n+=360),n){case 180:p=-1,m=0,w=0,b=1;break;case 90:p=0,m=1,w=1,b=0;break;case 270:p=0,m=-1,w=-1,b=0;break;case 0:p=1,m=0,w=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(w=-w,b=-b);let A,_,E,T;p===0?(A=Math.abs(f-e[1])*s+i,_=Math.abs(d-e[0])*s+o,E=(e[3]-e[1])*s,T=(e[2]-e[0])*s):(A=Math.abs(d-e[0])*s+i,_=Math.abs(f-e[1])*s+o,E=(e[2]-e[0])*s,T=(e[3]-e[1])*s),this.transform=[p*s,m*s,w*s,b*s,A-p*s*d-w*s*f,_-m*s*d-b*s*f],this.width=E,this.height=T}get rawDims(){const e=this.viewBox;return $e(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:n=this.offsetY,dontFlip:i=!1}={}){return new yp({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:n,dontFlip:i})}convertToViewportPoint(e,t){const s=[e,t];return ve.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];ve.applyTransform(t,this.transform);const s=[e[2],e[3]];return ve.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return ve.applyInverseTransform(s,this.transform),s}}class h0 extends ec{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function wp(l){const e=l.length;let t=0;for(;t<e&&l[t].trim()==="";)t++;return l.substring(t,t+5).toLowerCase()==="data:"}function d0(l){return typeof l=="string"&&/\.pdf$/i.test(l)}function ZA(l){return[l]=l.split(/[#?]/,1),l.substring(l.lastIndexOf("/")+1)}function eE(l,e="document.pdf"){if(typeof l!="string")return e;if(wp(l))return Ne('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=t.exec(l);let i=s.exec(n[1])||s.exec(n[2])||s.exec(n[3]);if(i&&(i=i[0],i.includes("%")))try{i=s.exec(decodeURIComponent(i))[0]}catch{}return i||e}class AS{constructor(){ee(this,"started",Object.create(null));ee(this,"times",[])}time(e){e in this.started&&Ne(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ne(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:n,end:i}of this.times)e.push(`${s.padEnd(t)} ${i-n}ms
`);return e.join("")}}function nd(l,e){const t=e?URL.parse(l,e):URL.parse(l);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Hn(l){l.preventDefault()}function Tt(l){l.preventDefault(),l.stopPropagation()}function uL(l){console.log("Deprecated API usage: "+l)}var Fd;class f0{static toDateObject(e){if(!e||typeof e!="string")return null;u(this,Fd)||S(this,Fd,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,Fd).exec(e);if(!t)return null;const s=parseInt(t[1],10);let n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const f=t[7]||"Z";let p=parseInt(t[8],10);p=p>=0&&p<=23?p:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,f==="-"?(o+=p,c+=m):f==="+"&&(o-=p,c-=m),new Date(Date.UTC(s,n,i,o,c,d))}}Fd=new WeakMap,k(f0,Fd);function tE(l,{scale:e=1,rotation:t=0}){const{width:s,height:n}=l.attributes.style,i=[0,0,parseInt(s),parseInt(n)];return new yp({viewBox:i,userUnit:1,scale:e,rotation:t})}function Ex(l){if(l.startsWith("#")){const e=parseInt(l.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return l.startsWith("rgb(")?l.slice(4,-1).split(",").map(e=>parseInt(e)):l.startsWith("rgba(")?l.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ne(`Not a valid color format: "${l}"`),[0,0,0])}function hL(l){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of l.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;l.set(t,Ex(s))}e.remove()}function wt(l){const{a:e,b:t,c:s,d:n,e:i,f:o}=l.getTransform();return[e,t,s,n,i,o]}function Sr(l){const{a:e,b:t,c:s,d:n,e:i,f:o}=l.getTransform().invertSelf();return[e,t,s,n,i,o]}function ro(l,e,t=!1,s=!0){if(e instanceof yp){const{pageWidth:n,pageHeight:i}=e.rawDims,{style:o}=l,c=ts.isCSSRoundSupported,d=`var(--total-scale-factor) * ${n}px`,f=`var(--total-scale-factor) * ${i}px`,p=c?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,m=c?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!t||e.rotation%180===0?(o.width=p,o.height=m):(o.width=m,o.height=p)}s&&l.setAttribute("data-main-rotation",e.rotation)}class gr{constructor(){const{pixelRatio:e}=gr;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,n,i=-1){let o=1/0,c=1/0,d=1/0;s=gr.capPixels(s,i),s>0&&(o=Math.sqrt(s/(e*t))),n!==-1&&(c=n/e,d=n/t);const f=Math.min(o,c,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const Lm=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var wa,$o,Nn,xa,$d,Jc,Bd,Bm,sE,hs,nE,rE,rd,iE,Qg;const ci=class ci{constructor(e){k(this,hs);k(this,wa,null);k(this,$o,null);k(this,Nn);k(this,xa,null);k(this,$d,null);k(this,Jc,null);S(this,Nn,e),u(ci,Bd)||S(ci,Bd,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=S(this,wa,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,Nn)._uiManager._signal;e.addEventListener("contextmenu",Hn,{signal:t}),e.addEventListener("pointerdown",C(ci,Bm,sE),{signal:t});const s=S(this,xa,document.createElement("div"));s.className="buttons",e.append(s);const n=u(this,Nn).toolbarPosition;if(n){const{style:i}=e,o=u(this,Nn)._uiManager.direction==="ltr"?1-n[0]:n[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return C(this,hs,iE).call(this),e}get div(){return u(this,wa)}hide(){var e;u(this,wa).classList.add("hidden"),(e=u(this,$o))==null||e.hideDropdown()}show(){var e;u(this,wa).classList.remove("hidden"),(e=u(this,$d))==null||e.shown()}async addAltText(e){const t=await e.render();C(this,hs,rd).call(this,t),u(this,xa).prepend(t,u(this,hs,Qg)),S(this,$d,e)}addColorPicker(e){S(this,$o,e);const t=e.renderButton();C(this,hs,rd).call(this,t),u(this,xa).prepend(t,u(this,hs,Qg))}async addEditSignatureButton(e){const t=S(this,Jc,await e.renderEditButton(u(this,Nn)));C(this,hs,rd).call(this,t),u(this,xa).prepend(t,u(this,hs,Qg))}updateEditSignatureButton(e){u(this,Jc)&&(u(this,Jc).title=e)}remove(){var e;u(this,wa).remove(),(e=u(this,$o))==null||e.destroy(),S(this,$o,null)}};wa=new WeakMap,$o=new WeakMap,Nn=new WeakMap,xa=new WeakMap,$d=new WeakMap,Jc=new WeakMap,Bd=new WeakMap,Bm=new WeakSet,sE=function(e){e.stopPropagation()},hs=new WeakSet,nE=function(e){u(this,Nn)._focusEventsAllowed=!1,Tt(e)},rE=function(e){u(this,Nn)._focusEventsAllowed=!0,Tt(e)},rd=function(e){const t=u(this,Nn)._uiManager._signal;e.addEventListener("focusin",C(this,hs,nE).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",C(this,hs,rE).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Hn,{signal:t})},iE=function(){const{editorType:e,_uiManager:t}=u(this,Nn),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",u(ci,Bd)[e]),C(this,hs,rd).call(this,s),s.addEventListener("click",n=>{t.delete()},{signal:t._signal}),u(this,xa).append(s)},Qg=function(){const e=document.createElement("div");return e.className="divider",e},k(ci,Bm),k(ci,Bd,null);let Xy=ci;var Ud,Bo,Uo,ao,aE,oE,lE;class dL{constructor(e){k(this,ao);k(this,Ud,null);k(this,Bo,null);k(this,Uo);S(this,Uo,e)}show(e,t,s){const[n,i]=C(this,ao,oE).call(this,t,s),{style:o}=u(this,Bo)||S(this,Bo,C(this,ao,aE).call(this));e.append(u(this,Bo)),o.insetInlineEnd=`${100*n}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,Bo).remove()}}Ud=new WeakMap,Bo=new WeakMap,Uo=new WeakMap,ao=new WeakSet,aE=function(){const e=S(this,Bo,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Hn,{signal:u(this,Uo)._signal});const t=S(this,Ud,document.createElement("div"));return t.className="buttons",e.append(t),C(this,ao,lE).call(this),e},oE=function(e,t){let s=0,n=0;for(const i of e){const o=i.y+i.height;if(o<s)continue;const c=i.x+(t?i.width:0);if(o>s){n=c,s=o;continue}t?c>n&&(n=c):c<n&&(n=c)}return[t?1-n:n,s]},lE=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=u(this,Uo)._signal;e.addEventListener("contextmenu",Hn,{signal:s}),e.addEventListener("click",()=>{u(this,Uo).highlightSelection("floating_button")},{signal:s}),u(this,Ud).append(e)};function cE(l,e,t){for(const s of t)e.addEventListener(s,l[s].bind(l))}var Um;class fL{constructor(){k(this,Um,0)}get id(){return`${Zj}${Cs(this,Um)._++}`}}Um=new WeakMap;var Qc,zd,ws,Zc,Zg;const Dx=class Dx{constructor(){k(this,Zc);k(this,Qc,Sx());k(this,zd,0);k(this,ws,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=e;const i=n.decode().then(()=>(s.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return $e(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:s,size:n,type:i}=e;return C(this,Zc,Zg).call(this,`${t}_${s}_${n}_${i}`,e)}async getFromUrl(e){return C(this,Zc,Zg).call(this,e,e)}async getFromBlob(e,t){const s=await t;return C(this,Zc,Zg).call(this,e,s)}async getFromId(e){u(this,ws)||S(this,ws,new Map);const t=u(this,ws).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,ws)||S(this,ws,new Map);let s=u(this,ws).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const n=new OffscreenCanvas(t.width,t.height);return n.getContext("2d").drawImage(t,0,0),s={bitmap:n.transferToImageBitmap(),id:`image_${u(this,Qc)}_${Cs(this,zd)._++}`,refCounter:1,isSvg:!1},u(this,ws).set(e,s),u(this,ws).set(s.id,s),s}getSvgUrl(e){const t=u(this,ws).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var n;u(this,ws)||S(this,ws,new Map);const t=u(this,ws).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}(n=s.close)==null||n.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,Qc)}_`)}};Qc=new WeakMap,zd=new WeakMap,ws=new WeakMap,Zc=new WeakSet,Zg=async function(e,t){u(this,ws)||S(this,ws,new Map);let s=u(this,ws).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${u(this,Qc)}_${Cs(this,zd)._++}`,refCounter:0,isSvg:!1});let n;if(typeof t=="string"?(s.url=t,n=await uh(t,"blob")):t instanceof File?n=s.file=t:t instanceof Blob&&(n=t),n.type==="image/svg+xml"){const i=Dx._isSVGFittingCanvas,o=new FileReader,c=new Image,d=new Promise((f,p)=>{c.onload=()=>{s.bitmap=c,s.isSvg=!0,f()},o.onload=async()=>{const m=s.svgUrl=o.result;c.src=await i?`${m}#svgView(preserveAspectRatio(none))`:m},c.onerror=o.onerror=p});o.readAsDataURL(n),await d}else s.bitmap=await createImageBitmap(n);s.refCounter=1}catch(n){Ne(n),s=null}return u(this,ws).set(e,s),s&&u(this,ws).set(s.id,s),s};let Yy=Dx;var Ct,ba,Hd,yt;class pL{constructor(e=128){k(this,Ct,[]);k(this,ba,!1);k(this,Hd);k(this,yt,-1);S(this,Hd,e)}add({cmd:e,undo:t,post:s,mustExec:n,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:c=!1}){if(n&&e(),u(this,ba))return;const d={cmd:e,undo:t,post:s,type:i};if(u(this,yt)===-1){u(this,Ct).length>0&&(u(this,Ct).length=0),S(this,yt,0),u(this,Ct).push(d);return}if(o&&u(this,Ct)[u(this,yt)].type===i){c&&(d.undo=u(this,Ct)[u(this,yt)].undo),u(this,Ct)[u(this,yt)]=d;return}const f=u(this,yt)+1;f===u(this,Hd)?u(this,Ct).splice(0,1):(S(this,yt,f),f<u(this,Ct).length&&u(this,Ct).splice(f)),u(this,Ct).push(d)}undo(){if(u(this,yt)===-1)return;S(this,ba,!0);const{undo:e,post:t}=u(this,Ct)[u(this,yt)];e(),t==null||t(),S(this,ba,!1),S(this,yt,u(this,yt)-1)}redo(){if(u(this,yt)<u(this,Ct).length-1){S(this,yt,u(this,yt)+1),S(this,ba,!0);const{cmd:e,post:t}=u(this,Ct)[u(this,yt)];e(),t==null||t(),S(this,ba,!1)}}hasSomethingToUndo(){return u(this,yt)!==-1}hasSomethingToRedo(){return u(this,yt)<u(this,Ct).length-1}cleanType(e){if(u(this,yt)!==-1){for(let t=u(this,yt);t>=0;t--)if(u(this,Ct)[t].type!==e){u(this,Ct).splice(t+1,u(this,yt)-t),S(this,yt,t);return}u(this,Ct).length=0,S(this,yt,-1)}}destroy(){S(this,Ct,null)}}Ct=new WeakMap,ba=new WeakMap,Hd=new WeakMap,yt=new WeakMap;var zm,uE;class xp{constructor(e){k(this,zm);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=ts.platform;for(const[s,n,i={}]of e)for(const o of s){const c=o.startsWith("mac+");t&&c?(this.callbacks.set(o.slice(4),{callback:n,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!c&&(this.callbacks.set(o,{callback:n,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(C(this,zm,uE).call(this,t));if(!s)return;const{callback:n,options:{bubbles:i=!1,args:o=[],checker:c=null}}=s;c&&!c(e,t)||(n.bind(e,...o,t)(),i||Tt(t))}}zm=new WeakSet,uE=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Hm=class Hm{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return hL(e),$e(this,"_colors",e)}convert(e){const t=Ex(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,n]of this._colors)if(n.every((i,o)=>i===t[o]))return Hm._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?ve.makeHexColor(...t):e}};ee(Hm,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Jy=Hm;var eu,nn,Bt,rs,tu,hi,su,Rn,_a,Sa,nu,zo,kr,er,Ho,Vd,Wd,ru,Gd,Cr,Aa,iu,Ea,Pr,Vm,ka,qd,Ca,Vo,Wo,Pa,Kd,Kt,Qe,di,Ta,Go,Xd,Yd,Na,Tr,fi,Jd,jn,re,em,Qy,hE,dE,tm,fE,pE,gE,Zy,mE,ew,tw,vE,Ps,ai,yE,wE,sw,xE,id,nw;const Gc=class Gc{constructor(e,t,s,n,i,o,c,d,f,p,m,w,b,A){k(this,re);k(this,eu,new AbortController);k(this,nn,null);k(this,Bt,new Map);k(this,rs,new Map);k(this,tu,null);k(this,hi,null);k(this,su,null);k(this,Rn,new pL);k(this,_a,null);k(this,Sa,null);k(this,nu,0);k(this,zo,new Set);k(this,kr,null);k(this,er,null);k(this,Ho,new Set);ee(this,"_editorUndoBar",null);k(this,Vd,!1);k(this,Wd,!1);k(this,ru,!1);k(this,Gd,null);k(this,Cr,null);k(this,Aa,null);k(this,iu,null);k(this,Ea,!1);k(this,Pr,null);k(this,Vm,new fL);k(this,ka,!1);k(this,qd,!1);k(this,Ca,null);k(this,Vo,null);k(this,Wo,null);k(this,Pa,null);k(this,Kd,null);k(this,Kt,Te.NONE);k(this,Qe,new Set);k(this,di,null);k(this,Ta,null);k(this,Go,null);k(this,Xd,null);k(this,Yd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});k(this,Na,[0,0]);k(this,Tr,null);k(this,fi,null);k(this,Jd,null);k(this,jn,null);const _=this._signal=u(this,eu).signal;S(this,fi,e),S(this,Jd,t),S(this,tu,s),S(this,Ta,n),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:_}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),i._on("setpreference",this.onSetPreference.bind(this),{signal:_}),i._on("switchannotationeditorparams",E=>this.updateParams(E.type,E.value),{signal:_}),C(this,re,fE).call(this),C(this,re,vE).call(this),C(this,re,Zy).call(this),S(this,hi,o.annotationStorage),S(this,Gd,o.filterFactory),S(this,Go,c),S(this,iu,d||null),S(this,Vd,f),S(this,Wd,p),S(this,ru,m),S(this,Kd,w||null),this.viewParameters={realScale:Vi.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=b||null,this._supportsPinchToZoom=A!==!1}static get _keyboardManager(){const e=Gc.prototype,t=o=>u(o,fi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},n=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return $e(this,"_keyboardManager",new xp([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&u(o,fi).contains(c)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&u(o,fi).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,s,n,i,o,c,d;(e=u(this,jn))==null||e.resolve(),S(this,jn,null),(t=u(this,eu))==null||t.abort(),S(this,eu,null),this._signal=null;for(const f of u(this,rs).values())f.destroy();u(this,rs).clear(),u(this,Bt).clear(),u(this,Ho).clear(),(s=u(this,Pa))==null||s.clear(),S(this,nn,null),u(this,Qe).clear(),u(this,Rn).destroy(),(n=u(this,tu))==null||n.destroy(),(i=u(this,Ta))==null||i.destroy(),(o=u(this,Pr))==null||o.hide(),S(this,Pr,null),(c=u(this,Wo))==null||c.destroy(),S(this,Wo,null),u(this,Cr)&&(clearTimeout(u(this,Cr)),S(this,Cr,null)),u(this,Tr)&&(clearTimeout(u(this,Tr)),S(this,Tr,null)),(d=this._editorUndoBar)==null||d.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Kd)}get useNewAltTextFlow(){return u(this,Wd)}get useNewAltTextWhenAddingImage(){return u(this,ru)}get hcmFilter(){return $e(this,"hcmFilter",u(this,Go)?u(this,Gd).addHCMFilter(u(this,Go).foreground,u(this,Go).background):"none")}get direction(){return $e(this,"direction",getComputedStyle(u(this,fi)).direction)}get highlightColors(){return $e(this,"highlightColors",u(this,iu)?new Map(u(this,iu).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return $e(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,Sa,e)}setMainHighlightColorPicker(e){S(this,Wo,e)}editAltText(e,t=!1){var s;(s=u(this,tu))==null||s.editAltText(this,e,t)}getSignature(e){var t;(t=u(this,Ta))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,Ta)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":S(this,ru,t);break}}onPageChanging({pageNumber:e}){S(this,nu,e-1)}focusMainContainer(){u(this,fi).focus()}findParent(e,t){for(const s of u(this,rs).values()){const{x:n,y:i,width:o,height:c}=s.div.getBoundingClientRect();if(e>=n&&e<=n+o&&t>=i&&t<=i+c)return s}return null}disableUserSelect(e=!1){u(this,Jd).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,Ho).add(e)}removeShouldRescale(e){u(this,Ho).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Vi.PDF_TO_CSS_UNITS;for(const s of u(this,Ho))s.onScaleChanging();(t=u(this,Sa))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:n,focusNode:i,focusOffset:o}=t,c=t.toString(),f=C(this,re,em).call(this,t).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;t.empty();const m=C(this,re,Qy).call(this,f),w=u(this,Kt)===Te.NONE,b=()=>{m==null||m.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:p,anchorNode:s,anchorOffset:n,focusNode:i,focusOffset:o,text:c}),w&&this.showAllEditors("highlight",!0,!0)};if(w){this.switchToMode(Te.HIGHLIGHT,b);return}b()}addToAnnotationStorage(e){!e.isEmpty()&&u(this,hi)&&!u(this,hi).has(e.id)&&u(this,hi).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,u(this,Ea)&&(S(this,Ea,!1),C(this,re,tm).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,Qe))if(t.div.contains(e)){S(this,Vo,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,Vo))return;const[e,t]=u(this,Vo);S(this,Vo,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){C(this,re,Zy).call(this),C(this,re,ew).call(this)}removeEditListeners(){C(this,re,mE).call(this),C(this,re,tw).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of u(this,er))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of u(this,er))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=u(this,nn))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of u(this,Qe)){const i=n.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of u(this,er))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(i){Ne(`paste: "${i.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const n=this.currentLayer;try{const i=[];for(const d of s){const f=await n.deserialize(d);if(!f)return;i.push(f)}const o=()=>{for(const d of i)C(this,re,sw).call(this,d);C(this,re,nw).call(this,i)},c=()=>{for(const d of i)d.remove()};this.addCommands({cmd:o,undo:c,mustExec:!0})}catch(i){Ne(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Kt)!==Te.NONE&&!this.isEditorHandlingKeyboard&&Gc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Ea)&&(S(this,Ea,!1),C(this,re,tm).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(C(this,re,pE).call(this),C(this,re,ew).call(this),C(this,re,Ps).call(this,{isEditing:u(this,Kt)!==Te.NONE,isEmpty:C(this,re,id).call(this),hasSomethingToUndo:u(this,Rn).hasSomethingToUndo(),hasSomethingToRedo:u(this,Rn).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,re,gE).call(this),C(this,re,tw).call(this),C(this,re,Ps).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,er)){S(this,er,e);for(const t of u(this,er))C(this,re,ai).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,Vm).id}get currentLayer(){return u(this,rs).get(u(this,nu))}getLayer(e){return u(this,rs).get(e)}get currentPageIndex(){return u(this,nu)}addLayer(e){u(this,rs).set(e.pageIndex,e),u(this,ka)?e.enable():e.disable()}removeLayer(e){u(this,rs).delete(e.pageIndex)}async updateMode(e,t=null,s=!1){var n,i,o;if(u(this,Kt)!==e&&!(u(this,jn)&&(await u(this,jn).promise,!u(this,jn)))){if(S(this,jn,Promise.withResolvers()),(n=u(this,Sa))==null||n.commitOrRemove(),S(this,Kt,e),e===Te.NONE){this.setEditingState(!1),C(this,re,wE).call(this),(i=this._editorUndoBar)==null||i.hide(),u(this,jn).resolve();return}e===Te.SIGNATURE&&await((o=u(this,Ta))==null?void 0:o.loadSignatures()),this.setEditingState(!0),await C(this,re,yE).call(this),this.unselectAll();for(const c of u(this,rs).values())c.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),u(this,jn).resolve();return}for(const c of u(this,Bt).values())c.annotationElementId===t||c.id===t?(this.setSelected(c),c.enterInEditMode()):c.unselect();u(this,jn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,Kt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){var s;if(u(this,er)){switch(e){case Ue.CREATE:this.currentLayer.addNewEditor(t);return;case Ue.HIGHLIGHT_DEFAULT_COLOR:(s=u(this,Wo))==null||s.updateColor(t);break;case Ue.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Xd)||S(this,Xd,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const n of u(this,Qe))n.updateParams(e,t);for(const n of u(this,er))n.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var i;for(const o of u(this,Bt).values())o.editorType===e&&o.show(t);(((i=u(this,Xd))==null?void 0:i.get(Ue.HIGHLIGHT_SHOW_ALL))??!0)!==t&&C(this,re,ai).call(this,[[Ue.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,qd)!==e){S(this,qd,e);for(const t of u(this,rs).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of u(this,Bt).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return u(this,Bt).get(e)}addEditor(e){u(this,Bt).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(u(this,Cr)&&clearTimeout(u(this,Cr)),S(this,Cr,setTimeout(()=>{this.focusMainContainer(),S(this,Cr,null)},0))),u(this,Bt).delete(e.id),e.annotationElementId&&((t=u(this,Pa))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,zo).has(e.annotationElementId))&&((s=u(this,hi))==null||s.remove(e.id))}addDeletedAnnotationElement(e){u(this,zo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,zo).has(e)}removeDeletedAnnotationElement(e){u(this,zo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,nn)!==e&&(S(this,nn,e),e&&C(this,re,ai).call(this,e.propertiesToUpdate))}updateUI(e){u(this,re,xE)===e&&C(this,re,ai).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){C(this,re,ai).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,Qe).has(e)){u(this,Qe).delete(e),e.unselect(),C(this,re,Ps).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Qe).add(e),e.select(),C(this,re,ai).call(this,e.propertiesToUpdate),C(this,re,Ps).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=u(this,Sa))==null||t.commitOrRemove();for(const s of u(this,Qe))s!==e&&s.unselect();u(this,Qe).clear(),u(this,Qe).add(e),e.select(),C(this,re,ai).call(this,e.propertiesToUpdate),C(this,re,Ps).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,Qe).has(e)}get firstSelectedEditor(){return u(this,Qe).values().next().value}unselect(e){e.unselect(),u(this,Qe).delete(e),C(this,re,Ps).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Qe).size!==0}get isEnterHandled(){return u(this,Qe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,Rn).undo(),C(this,re,Ps).call(this,{hasSomethingToUndo:u(this,Rn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,re,id).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,Rn).redo(),C(this,re,Ps).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,Rn).hasSomethingToRedo(),isEmpty:C(this,re,id).call(this)})}addCommands(e){u(this,Rn).add(e),C(this,re,Ps).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,re,id).call(this)})}cleanUndoStack(e){u(this,Rn).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,Qe)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(n,t.length===1?t[0].editorType:t.length);for(const c of t)c.remove()},n=()=>{for(const o of t)C(this,re,sw).call(this,o)};this.addCommands({cmd:s,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=u(this,nn))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,nn)||this.hasSelection}selectAll(){for(const e of u(this,Qe))e.commit();C(this,re,nw).call(this,u(this,Bt).values())}unselectAll(){var e;if(!(u(this,nn)&&(u(this,nn).commitOrRemove(),u(this,Kt)!==Te.NONE))&&!((e=u(this,Sa))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,Qe))t.unselect();u(this,Qe).clear(),C(this,re,Ps).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;u(this,Na)[0]+=e,u(this,Na)[1]+=t;const[n,i]=u(this,Na),o=[...u(this,Qe)],c=1e3;u(this,Tr)&&clearTimeout(u(this,Tr)),S(this,Tr,setTimeout(()=>{S(this,Tr,null),u(this,Na)[0]=u(this,Na)[1]=0,this.addCommands({cmd:()=>{for(const d of o)u(this,Bt).has(d.id)&&(d.translateInPage(n,i),d.translationDone())},undo:()=>{for(const d of o)u(this,Bt).has(d.id)&&(d.translateInPage(-n,-i),d.translationDone())},mustExec:!1})},c));for(const d of o)d.translateInPage(e,t),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,kr,new Map);for(const e of u(this,Qe))u(this,kr).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,kr))return!1;this.disableUserSelect(!1);const e=u(this,kr);S(this,kr,null);let t=!1;for(const[{x:n,y:i,pageIndex:o},c]of e)c.newX=n,c.newY=i,c.newPageIndex=o,t||(t=n!==c.savedX||i!==c.savedY||o!==c.savedPageIndex);if(!t)return!1;const s=(n,i,o,c)=>{if(u(this,Bt).has(n.id)){const d=u(this,rs).get(c);d?n._setParentAndPosition(d,i,o):(n.pageIndex=c,n.x=i,n.y=o)}};return this.addCommands({cmd:()=>{for(const[n,{newX:i,newY:o,newPageIndex:c}]of e)s(n,i,o,c)},undo:()=>{for(const[n,{savedX:i,savedY:o,savedPageIndex:c}]of e)s(n,i,o,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,kr))for(const s of u(this,kr).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,Qe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,nn)===e}getActive(){return u(this,nn)}getMode(){return u(this,Kt)}get imageManager(){return $e(this,"imageManager",new Yy)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let f=0,p=t.rangeCount;f<p;f++)if(!e.contains(t.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:n,width:i,height:o}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(f,p,m,w)=>({x:(p-n)/o,y:1-(f+m-s)/i,width:w/o,height:m/i});break;case"180":c=(f,p,m,w)=>({x:1-(f+m-s)/i,y:1-(p+w-n)/o,width:m/i,height:w/o});break;case"270":c=(f,p,m,w)=>({x:1-(p+w-n)/o,y:(f-s)/i,width:w/o,height:m/i});break;default:c=(f,p,m,w)=>({x:(f-s)/i,y:(p-n)/o,width:m/i,height:w/o});break}const d=[];for(let f=0,p=t.rangeCount;f<p;f++){const m=t.getRangeAt(f);if(!m.collapsed)for(const{x:w,y:b,width:A,height:_}of m.getClientRects())A===0||_===0||d.push(c(w,b,A,_))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,su)||S(this,su,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,su))==null||t.delete(e)}renderAnnotationElement(e){var n;const t=(n=u(this,su))==null?void 0:n.get(e.data.id);if(!t)return;const s=u(this,hi).getRawValue(t);s&&(u(this,Kt)===Te.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var i;const n=(i=u(this,Pa))==null?void 0:i.get(e);n&&(n.setCanvas(t,s),u(this,Pa).delete(e))}addMissingCanvas(e,t){(u(this,Pa)||S(this,Pa,new Map)).set(e,t)}};eu=new WeakMap,nn=new WeakMap,Bt=new WeakMap,rs=new WeakMap,tu=new WeakMap,hi=new WeakMap,su=new WeakMap,Rn=new WeakMap,_a=new WeakMap,Sa=new WeakMap,nu=new WeakMap,zo=new WeakMap,kr=new WeakMap,er=new WeakMap,Ho=new WeakMap,Vd=new WeakMap,Wd=new WeakMap,ru=new WeakMap,Gd=new WeakMap,Cr=new WeakMap,Aa=new WeakMap,iu=new WeakMap,Ea=new WeakMap,Pr=new WeakMap,Vm=new WeakMap,ka=new WeakMap,qd=new WeakMap,Ca=new WeakMap,Vo=new WeakMap,Wo=new WeakMap,Pa=new WeakMap,Kd=new WeakMap,Kt=new WeakMap,Qe=new WeakMap,di=new WeakMap,Ta=new WeakMap,Go=new WeakMap,Xd=new WeakMap,Yd=new WeakMap,Na=new WeakMap,Tr=new WeakMap,fi=new WeakMap,Jd=new WeakMap,jn=new WeakMap,re=new WeakSet,em=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Qy=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of u(this,rs).values())if(s.hasTextLayer(e))return s;return null},hE=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=C(this,re,em).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(s);n&&(u(this,Pr)||S(this,Pr,new dL(this)),u(this,Pr).show(s,n,this.direction==="ltr"))},dE=function(){var i,o,c;const e=document.getSelection();if(!e||e.isCollapsed){u(this,di)&&((i=u(this,Pr))==null||i.hide(),S(this,di,null),C(this,re,Ps).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,di))return;const n=C(this,re,em).call(this,e).closest(".textLayer");if(!n){u(this,di)&&((o=u(this,Pr))==null||o.hide(),S(this,di,null),C(this,re,Ps).call(this,{hasSelectedText:!1}));return}if((c=u(this,Pr))==null||c.hide(),S(this,di,t),C(this,re,Ps).call(this,{hasSelectedText:!0}),!(u(this,Kt)!==Te.HIGHLIGHT&&u(this,Kt)!==Te.NONE)&&(u(this,Kt)===Te.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,Ea,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=u(this,Kt)===Te.HIGHLIGHT?C(this,re,Qy).call(this,n):null;d==null||d.toggleDrawing();const f=new AbortController,p=this.combinedSignal(f),m=w=>{w.type==="pointerup"&&w.button!==0||(f.abort(),d==null||d.toggleDrawing(!0),w.type==="pointerup"&&C(this,re,tm).call(this,"main_toolbar"))};window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("blur",m,{signal:p})}},tm=function(e=""){u(this,Kt)===Te.HIGHLIGHT?this.highlightSelection(e):u(this,Vd)&&C(this,re,hE).call(this)},fE=function(){document.addEventListener("selectionchange",C(this,re,dE).bind(this),{signal:this._signal})},pE=function(){if(u(this,Aa))return;S(this,Aa,new AbortController);const e=this.combinedSignal(u(this,Aa));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},gE=function(){var e;(e=u(this,Aa))==null||e.abort(),S(this,Aa,null)},Zy=function(){if(u(this,Ca))return;S(this,Ca,new AbortController);const e=this.combinedSignal(u(this,Ca));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},mE=function(){var e;(e=u(this,Ca))==null||e.abort(),S(this,Ca,null)},ew=function(){if(u(this,_a))return;S(this,_a,new AbortController);const e=this.combinedSignal(u(this,_a));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},tw=function(){var e;(e=u(this,_a))==null||e.abort(),S(this,_a,null)},vE=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Ps=function(e){Object.entries(e).some(([s,n])=>u(this,Yd)[s]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Yd),e)}),u(this,Kt)===Te.HIGHLIGHT&&e.hasSelectedEditor===!1&&C(this,re,ai).call(this,[[Ue.HIGHLIGHT_FREE,!0]]))},ai=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},yE=async function(){if(!u(this,ka)){S(this,ka,!0);const e=[];for(const t of u(this,rs).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,Bt).values())t.enable()}},wE=function(){if(this.unselectAll(),u(this,ka)){S(this,ka,!1);for(const e of u(this,rs).values())e.disable();for(const e of u(this,Bt).values())e.disable()}},sw=function(e){const t=u(this,rs).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},xE=function(){let e=null;for(e of u(this,Qe));return e},id=function(){if(u(this,Bt).size===0)return!0;if(u(this,Bt).size===1)for(const e of u(this,Bt).values())return e.isEmpty();return!1},nw=function(e){for(const t of u(this,Qe))t.unselect();u(this,Qe).clear();for(const t of e)t.isEmpty()||(u(this,Qe).add(t),t.select());C(this,re,Ps).call(this,{hasSelectedEditor:this.hasSelection})},ee(Gc,"TRANSLATE_SMALL",1),ee(Gc,"TRANSLATE_BIG",10);let io=Gc;var Xt,Nr,tr,au,Rr,rn,ou,jr,Ks,pi,qo,Lr,Ra,pr,ad,sm;const Ts=class Ts{constructor(e){k(this,pr);k(this,Xt,null);k(this,Nr,!1);k(this,tr,null);k(this,au,null);k(this,Rr,null);k(this,rn,null);k(this,ou,!1);k(this,jr,null);k(this,Ks,null);k(this,pi,null);k(this,qo,null);k(this,Lr,!1);S(this,Ks,e),S(this,Lr,e._uiManager.useNewAltTextFlow),u(Ts,Ra)||S(Ts,Ra,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Ts._l10n??(Ts._l10n=e)}async render(){const e=S(this,tr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=S(this,au,document.createElement("span"));e.append(t),u(this,Lr)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(Ts,Ra).missing),t.setAttribute("data-l10n-id",u(Ts,Ra)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=u(this,Ks)._uiManager._signal;e.addEventListener("contextmenu",Hn,{signal:s}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const n=i=>{i.preventDefault(),u(this,Ks)._uiManager.editAltText(u(this,Ks)),u(this,Lr)&&u(this,Ks)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,pr,ad)}})};return e.addEventListener("click",n,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(S(this,ou,!0),n(i))},{signal:s}),await C(this,pr,sm).call(this),e}finish(){u(this,tr)&&(u(this,tr).focus({focusVisible:u(this,ou)}),S(this,ou,!1))}isEmpty(){return u(this,Lr)?u(this,Xt)===null:!u(this,Xt)&&!u(this,Nr)}hasData(){return u(this,Lr)?u(this,Xt)!==null||!!u(this,pi):this.isEmpty()}get guessedText(){return u(this,pi)}async setGuessedText(e){u(this,Xt)===null&&(S(this,pi,e),S(this,qo,await Ts._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),C(this,pr,sm).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,Lr)||u(this,Xt)){(t=u(this,jr))==null||t.remove(),S(this,jr,null);return}if(!u(this,jr)){const s=S(this,jr,document.createElement("div"));s.className="noAltTextBadge",u(this,Ks).div.append(s)}u(this,jr).classList.toggle("hidden",!e)}serialize(e){let t=u(this,Xt);return!e&&u(this,pi)===t&&(t=u(this,qo)),{altText:t,decorative:u(this,Nr),guessedText:u(this,pi),textWithDisclaimer:u(this,qo)}}get data(){return{altText:u(this,Xt),decorative:u(this,Nr)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:n,cancel:i=!1}){s&&(S(this,pi,s),S(this,qo,n)),!(u(this,Xt)===e&&u(this,Nr)===t)&&(i||(S(this,Xt,e),S(this,Nr,t)),C(this,pr,sm).call(this))}toggle(e=!1){u(this,tr)&&(!e&&u(this,rn)&&(clearTimeout(u(this,rn)),S(this,rn,null)),u(this,tr).disabled=!e)}shown(){u(this,Ks)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,pr,ad)}})}destroy(){var e,t;(e=u(this,tr))==null||e.remove(),S(this,tr,null),S(this,au,null),S(this,Rr,null),(t=u(this,jr))==null||t.remove(),S(this,jr,null)}};Xt=new WeakMap,Nr=new WeakMap,tr=new WeakMap,au=new WeakMap,Rr=new WeakMap,rn=new WeakMap,ou=new WeakMap,jr=new WeakMap,Ks=new WeakMap,pi=new WeakMap,qo=new WeakMap,Lr=new WeakMap,Ra=new WeakMap,pr=new WeakSet,ad=function(){return u(this,Xt)&&"added"||u(this,Xt)===null&&this.guessedText&&"review"||"missing"},sm=async function(){var n,i,o;const e=u(this,tr);if(!e)return;if(u(this,Lr)){if(e.classList.toggle("done",!!u(this,Xt)),e.setAttribute("data-l10n-id",u(Ts,Ra)[u(this,pr,ad)]),(n=u(this,au))==null||n.setAttribute("data-l10n-id",u(Ts,Ra)[`${u(this,pr,ad)}-label`]),!u(this,Xt)){(i=u(this,Rr))==null||i.remove();return}}else{if(!u(this,Xt)&&!u(this,Nr)){e.classList.remove("done"),(o=u(this,Rr))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,Rr);if(!t){S(this,Rr,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,Ks).id}`;const c=100,d=u(this,Ks)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(u(this,rn)),S(this,rn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{S(this,rn,setTimeout(()=>{S(this,rn,null),u(this,Rr).classList.add("show"),u(this,Ks)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:d}),e.addEventListener("mouseleave",()=>{var f;u(this,rn)&&(clearTimeout(u(this,rn)),S(this,rn,null)),(f=u(this,Rr))==null||f.classList.remove("show")},{signal:d})}u(this,Nr)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,Xt)),t.parentNode||e.append(t);const s=u(this,Ks).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},k(Ts,Ra,null),ee(Ts,"_l10n",null);let Im=Ts;var lu,Ko,Qd,Zd,ef,tf,sf,gi,Xo,mi,Yo,vi,oo,bE,_E,SE;const Ox=class Ox{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:n=null,onPinching:i=null,onPinchEnd:o=null,signal:c}){k(this,oo);k(this,lu);k(this,Ko,!1);k(this,Qd,null);k(this,Zd);k(this,ef);k(this,tf);k(this,sf);k(this,gi,null);k(this,Xo);k(this,mi,null);k(this,Yo);k(this,vi,null);S(this,lu,e),S(this,Qd,s),S(this,Zd,t),S(this,ef,n),S(this,tf,i),S(this,sf,o),S(this,Yo,new AbortController),S(this,Xo,AbortSignal.any([c,u(this,Yo).signal])),e.addEventListener("touchstart",C(this,oo,bE).bind(this),{passive:!1,signal:u(this,Xo)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/gr.pixelRatio}destroy(){var e,t;(e=u(this,Yo))==null||e.abort(),S(this,Yo,null),(t=u(this,gi))==null||t.abort(),S(this,gi,null)}};lu=new WeakMap,Ko=new WeakMap,Qd=new WeakMap,Zd=new WeakMap,ef=new WeakMap,tf=new WeakMap,sf=new WeakMap,gi=new WeakMap,Xo=new WeakMap,mi=new WeakMap,Yo=new WeakMap,vi=new WeakMap,oo=new WeakSet,bE=function(e){var n,i,o;if((n=u(this,Zd))!=null&&n.call(this))return;if(e.touches.length===1){if(u(this,gi))return;const c=S(this,gi,new AbortController),d=AbortSignal.any([u(this,Xo),c.signal]),f=u(this,lu),p={capture:!0,signal:d,passive:!1},m=w=>{var b;w.pointerType==="touch"&&((b=u(this,gi))==null||b.abort(),S(this,gi,null))};f.addEventListener("pointerdown",w=>{w.pointerType==="touch"&&(Tt(w),m(w))},p),f.addEventListener("pointerup",m,p),f.addEventListener("pointercancel",m,p);return}if(!u(this,vi)){S(this,vi,new AbortController);const c=AbortSignal.any([u(this,Xo),u(this,vi).signal]),d=u(this,lu),f={signal:c,capture:!1,passive:!1};d.addEventListener("touchmove",C(this,oo,_E).bind(this),f);const p=C(this,oo,SE).bind(this);d.addEventListener("touchend",p,f),d.addEventListener("touchcancel",p,f),f.capture=!0,d.addEventListener("pointerdown",Tt,f),d.addEventListener("pointermove",Tt,f),d.addEventListener("pointercancel",Tt,f),d.addEventListener("pointerup",Tt,f),(i=u(this,ef))==null||i.call(this)}if(Tt(e),e.touches.length!==2||(o=u(this,Qd))!=null&&o.call(this)){S(this,mi,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),S(this,mi,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},_E=function(e){var j;if(!u(this,mi)||e.touches.length!==2)return;Tt(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:n,screenY:i}=t,{screenX:o,screenY:c}=s,d=u(this,mi),{touch0X:f,touch0Y:p,touch1X:m,touch1Y:w}=d,b=m-f,A=w-p,_=o-n,E=c-i,T=Math.hypot(_,E)||1,R=Math.hypot(b,A)||1;if(!u(this,Ko)&&Math.abs(R-T)<=Ox.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=n,d.touch0Y=i,d.touch1X=o,d.touch1Y=c,!u(this,Ko)){S(this,Ko,!0);return}const N=[(n+o)/2,(i+c)/2];(j=u(this,tf))==null||j.call(this,N,R,T)},SE=function(e){var t;e.touches.length>=2||(u(this,vi)&&(u(this,vi).abort(),S(this,vi,null),(t=u(this,sf))==null||t.call(this)),u(this,mi)&&(Tt(e),S(this,mi,null),S(this,Ko,!1)))};let Ld=Ox;var Jo,sr,ut,cu,ja,nf,Qo,is,Zo,yi,La,rf,el,an,af,tl,wi,Ir,uu,hu,Ln,sl,of,Wm,Ae,rw,lf,iw,nm,AE,EE,aw,rm,ow,kE,CE,PE,lw,TE,cw,NE,RE,jE,uw,od;const Ie=class Ie{constructor(e){k(this,Ae);k(this,Jo,null);k(this,sr,null);k(this,ut,null);k(this,cu,!1);k(this,ja,null);k(this,nf,"");k(this,Qo,!1);k(this,is,null);k(this,Zo,null);k(this,yi,null);k(this,La,null);k(this,rf,"");k(this,el,!1);k(this,an,null);k(this,af,!1);k(this,tl,!1);k(this,wi,!1);k(this,Ir,null);k(this,uu,0);k(this,hu,0);k(this,Ln,null);k(this,sl,null);ee(this,"isSelected",!1);ee(this,"_isCopy",!1);ee(this,"_editToolbar",null);ee(this,"_initialOptions",Object.create(null));ee(this,"_initialData",null);ee(this,"_isVisible",!0);ee(this,"_uiManager",null);ee(this,"_focusEventsAllowed",!0);k(this,of,!1);k(this,Wm,Ie._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:n,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,n],this.pageTranslation=[i,o];const[c,d]=this.parentDimensions;this.x=e.x/c,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ie.prototype._resizeWithKeyboard,t=io.TRANSLATE_SMALL,s=io.TRANSLATE_BIG;return $e(this,"_resizerKeyboardManager",new xp([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],Ie.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return $e(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new gL({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ie._l10n??(Ie._l10n=e),Ie._l10nResizer||(Ie._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ie._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Ie._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){tt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,of)}set _isDraggable(e){var t;S(this,of,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,Wm)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):C(this,Ae,od).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,el)?S(this,el,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,n){const[i,o]=this.parentDimensions;[s,n]=this.screenToPageTranslation(s,n),this.x=(e+s)/i,this.y=(t+n)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,n]=this.parentDimensions;this.setAt(e*s,t*n,this.width*s,this.height*n),this._onTranslated()}translate(e,t){C(this,Ae,rw).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,an)||S(this,an,[this.x,this.y,this.width,this.height]),C(this,Ae,rw).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){u(this,an)||S(this,an,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[n,i]}=this;if(this.x+=e/n,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[d,f]=this.getBaseTranslation();o+=d,c+=f;const{style:p}=s;p.left=`${(100*o).toFixed(2)}%`,p.top=`${(100*c).toFixed(2)}%`,this._onTranslating(o,c),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,an)&&(u(this,an)[0]!==this.x||u(this,an)[1]!==this.y)}get _hasBeenResized(){return!!u(this,an)&&(u(this,an)[2]!==this.width||u(this,an)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=Ie,n=s/e,i=s/t;switch(this.rotation){case 90:return[-n,i];case 180:return[n,i];case 270:return[n,-i];default:return[-n,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,n]}=this;let{x:i,y:o,width:c,height:d}=this;if(c*=s,d*=n,i*=s,o*=n,this._mustFixPosition)switch(e){case 0:i=Ss(i,0,s-c),o=Ss(o,0,n-d);break;case 90:i=Ss(i,0,s-d),o=Ss(o,c,n);break;case 180:i=Ss(i,c,s),o=Ss(o,d,n);break;case 270:i=Ss(i,d,s),o=Ss(o,0,n-c);break}this.x=i/=s,this.y=o/=n;const[f,p]=this.getBaseTranslation();i+=f,o+=p,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return C(s=Ie,lf,iw).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return C(s=Ie,lf,iw).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,n]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/s).toFixed(2)}%`,u(this,Qo)||(i.height=`${(100*t/n).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,n=s.endsWith("%"),i=!u(this,Qo)&&t.endsWith("%");if(n&&i)return;const[o,c]=this.parentDimensions;n||(e.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!u(this,Qo)&&!i&&(e.height=`${(100*parseFloat(t)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,ut))==null||e.finish()}async addEditToolbar(){return this._editToolbar||u(this,tl)?this._editToolbar:(this._editToolbar=new Xy(this),this.div.append(this._editToolbar.render()),u(this,ut)&&await this._editToolbar.addAltText(u(this,ut)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=u(this,ut))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){u(this,ut)||(Im.initialize(Ie._l10n),S(this,ut,new Im(this)),u(this,Jo)&&(u(this,ut).data=u(this,Jo),S(this,Jo,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=u(this,ut))==null?void 0:e.data}set altTextData(e){u(this,ut)&&(u(this,ut).data=e)}get guessedAltText(){var e;return(e=u(this,ut))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,ut))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,ut))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,ut)&&!u(this,ut).isEmpty()}hasAltTextData(){var e;return((e=u(this,ut))==null?void 0:e.hasData())??!1}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,cu)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),C(this,Ae,cw).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),cE(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,sl)||S(this,sl,new Ld({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,Ae,kE).bind(this),onPinching:C(this,Ae,CE).bind(this),onPinchEnd:C(this,Ae,PE).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=ts.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(S(this,el,!0),this._isDraggable){C(this,Ae,TE).call(this,e);return}C(this,Ae,lw).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,Ir)&&clearTimeout(u(this,Ir)),S(this,Ir,setTimeout(()=>{var e;S(this,Ir,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const n=this.parentScale,[i,o]=this.pageDimensions,[c,d]=this.pageTranslation,f=e/n,p=t/n,m=this.x*i,w=this.y*o,b=this.width*i,A=this.height*o;switch(s){case 0:return[m+f+c,o-w-p-A+d,m+f+b+c,o-w-p+d];case 90:return[m+p+c,o-w+f+d,m+p+A+c,o-w+f+b+d];case 180:return[m-f-b+c,o-w+p+d,m-f+c,o-w+p+A+d];case 270:return[m-p-A+c,o-w-f-b+d,m-p+c,o-w-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,n,i,o]=e,c=i-s,d=o-n;switch(this.rotation){case 0:return[s,t-o,c,d];case 90:return[s,t-n,d,c];case 180:return[i,t-n,c,d];case 270:return[i,t-o,d,c];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),S(this,tl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),S(this,tl,!1),!0):!1}isInEditMode(){return u(this,tl)}shouldGetKeyboardEvents(){return u(this,wi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:n}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&n>0&&e<i&&s>0}rebuild(){C(this,Ae,cw).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){tt("An editor must be serializable")}static async deserialize(e,t,s){const n=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s});n.rotation=e.rotation,S(n,Jo,e.accessibilityData),n._isCopy=e.isCopy||!1;const[i,o]=n.pageDimensions,[c,d,f,p]=n.getRectInCurrentCoords(e.rect,o);return n.x=c/i,n.y=d/o,n.width=f/i,n.height=p/o,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=u(this,La))==null||e.abort(),S(this,La,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,Ir)&&(clearTimeout(u(this,Ir)),S(this,Ir,null)),C(this,Ae,od).call(this),this.removeEditToolbar(),u(this,Ln)){for(const s of u(this,Ln).values())clearTimeout(s);S(this,Ln,null)}this.parent=null,(t=u(this,sl))==null||t.destroy(),S(this,sl,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,Ae,AE).call(this),u(this,is).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),S(this,yi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,is).children;if(!u(this,sr)){S(this,sr,Array.from(t));const o=C(this,Ae,NE).bind(this),c=C(this,Ae,RE).bind(this),d=this._uiManager._signal;for(const f of u(this,sr)){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",o,{signal:d}),f.addEventListener("blur",c,{signal:d}),f.addEventListener("focus",C(this,Ae,jE).bind(this,p),{signal:d}),f.setAttribute("data-l10n-id",Ie._l10nResizer[p])}}const s=u(this,sr)[0];let n=0;for(const o of t){if(o===s)break;n++}const i=(360-this.rotation+this.parentRotation)%360/90*(u(this,sr).length/4);if(i!==n){if(i<n)for(let c=0;c<n-i;c++)u(this,is).append(u(this,is).firstChild);else if(i>n)for(let c=0;c<i-n;c++)u(this,is).firstChild.before(u(this,is).lastChild);let o=0;for(const c of t){const f=u(this,sr)[o++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Ie._l10nResizer[f])}}C(this,Ae,uw).call(this,0),S(this,wi,!0),u(this,is).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,wi)&&C(this,Ae,ow).call(this,u(this,rf),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,Ae,od).call(this),this.div.focus()}select(){var e,t,s;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var n,i;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(s=u(this,ut))==null||s.toggleAltTextBadge(!1)}}unselect(){var e,t,s,n,i;this.isSelected&&(this.isSelected=!1,(e=u(this,is))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=this._editToolbar)==null||n.hide(),(i=u(this,ut))==null||i.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,af)}set isEditing(e){S(this,af,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){S(this,Qo,!0);const s=e/t,{style:n}=this.div;n.aspectRatio=s,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,Ln)||S(this,Ln,new Map);const{action:s}=e;let n=u(this,Ln).get(s);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),u(this,Ln).delete(s),u(this,Ln).size===0&&S(this,Ln,null)},Ie._telemetryTimeout),u(this,Ln).set(s,n);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),S(this,cu,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,cu,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Jo=new WeakMap,sr=new WeakMap,ut=new WeakMap,cu=new WeakMap,ja=new WeakMap,nf=new WeakMap,Qo=new WeakMap,is=new WeakMap,Zo=new WeakMap,yi=new WeakMap,La=new WeakMap,rf=new WeakMap,el=new WeakMap,an=new WeakMap,af=new WeakMap,tl=new WeakMap,wi=new WeakMap,Ir=new WeakMap,uu=new WeakMap,hu=new WeakMap,Ln=new WeakMap,sl=new WeakMap,of=new WeakMap,Wm=new WeakMap,Ae=new WeakSet,rw=function([e,t],s,n){[s,n]=this.screenToPageTranslation(s,n),this.x+=s/e,this.y+=n/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},lf=new WeakSet,iw=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},nm=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},AE=function(){if(u(this,is))return;S(this,is,document.createElement("div")),u(this,is).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const n=document.createElement("div");u(this,is).append(n),n.classList.add("resizer",s),n.setAttribute("data-resizer-name",s),n.addEventListener("pointerdown",C(this,Ae,EE).bind(this,s),{signal:t}),n.addEventListener("contextmenu",Hn,{signal:t}),n.tabIndex=-1}this.div.prepend(u(this,is))},EE=function(e,t){var p;t.preventDefault();const{isMac:s}=ts.platform;if(t.button!==0||t.ctrlKey&&s)return;(p=u(this,ut))==null||p.toggle(!1);const n=this._isDraggable;this._isDraggable=!1,S(this,Zo,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,Ae,ow).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Tt,{passive:!1,signal:o}),window.addEventListener("contextmenu",Hn,{signal:o}),S(this,yi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{var m;i.abort(),this.parent.togglePointerEvents(!0),(m=u(this,ut))==null||m.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=c,this.div.style.cursor=d,C(this,Ae,rm).call(this)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})},aw=function(e,t,s,n){this.width=s,this.height=n,this.x=e,this.y=t;const[i,o]=this.parentDimensions;this.setDims(i*s,o*n),this.fixAndSetPosition(),this._onResized()},rm=function(){if(!u(this,yi))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:n}=u(this,yi);S(this,yi,null);const i=this.x,o=this.y,c=this.width,d=this.height;i===e&&o===t&&c===s&&d===n||this.addCommands({cmd:C(this,Ae,aw).bind(this,i,o,c,d),undo:C(this,Ae,aw).bind(this,e,t,s,n),mustExec:!0})},ow=function(e,t){const[s,n]=this.parentDimensions,i=this.x,o=this.y,c=this.width,d=this.height,f=Ie.MIN_SIZE/s,p=Ie.MIN_SIZE/n,m=C(this,Ae,nm).call(this,this.rotation),w=(Z,X)=>[m[0]*Z+m[2]*X,m[1]*Z+m[3]*X],b=C(this,Ae,nm).call(this,360-this.rotation),A=(Z,X)=>[b[0]*Z+b[2]*X,b[1]*Z+b[3]*X];let _,E,T=!1,R=!1;switch(e){case"topLeft":T=!0,_=(Z,X)=>[0,0],E=(Z,X)=>[Z,X];break;case"topMiddle":_=(Z,X)=>[Z/2,0],E=(Z,X)=>[Z/2,X];break;case"topRight":T=!0,_=(Z,X)=>[Z,0],E=(Z,X)=>[0,X];break;case"middleRight":R=!0,_=(Z,X)=>[Z,X/2],E=(Z,X)=>[0,X/2];break;case"bottomRight":T=!0,_=(Z,X)=>[Z,X],E=(Z,X)=>[0,0];break;case"bottomMiddle":_=(Z,X)=>[Z/2,X],E=(Z,X)=>[Z/2,0];break;case"bottomLeft":T=!0,_=(Z,X)=>[0,X],E=(Z,X)=>[Z,0];break;case"middleLeft":R=!0,_=(Z,X)=>[0,X/2],E=(Z,X)=>[Z,X/2];break}const N=_(c,d),j=E(c,d);let I=w(...j);const F=Ie._round(i+I[0]),B=Ie._round(o+I[1]);let W=1,K=1,te,Q;if(t.fromKeyboard)({deltaX:te,deltaY:Q}=t);else{const{screenX:Z,screenY:X}=t,[Y,oe]=u(this,Zo);[te,Q]=this.screenToPageTranslation(Z-Y,X-oe),u(this,Zo)[0]=Z,u(this,Zo)[1]=X}if([te,Q]=A(te/s,Q/n),T){const Z=Math.hypot(c,d);W=K=Math.max(Math.min(Math.hypot(j[0]-N[0]-te,j[1]-N[1]-Q)/Z,1/c,1/d),f/c,p/d)}else R?W=Ss(Math.abs(j[0]-N[0]-te),f,1)/c:K=Ss(Math.abs(j[1]-N[1]-Q),p,1)/d;const _e=Ie._round(c*W),we=Ie._round(d*K);I=w(...E(_e,we));const pe=F-I[0],Ee=B-I[1];u(this,an)||S(this,an,[this.x,this.y,this.width,this.height]),this.width=_e,this.height=we,this.x=pe,this.y=Ee,this.setDims(s*_e,n*we),this.fixAndSetPosition(),this._onResizing()},kE=function(){var e;S(this,yi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,ut))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},CE=function(e,t,s){let i=.7*(s/t)+1-.7;if(i===1)return;const o=C(this,Ae,nm).call(this,this.rotation),c=(F,B)=>[o[0]*F+o[2]*B,o[1]*F+o[3]*B],[d,f]=this.parentDimensions,p=this.x,m=this.y,w=this.width,b=this.height,A=Ie.MIN_SIZE/d,_=Ie.MIN_SIZE/f;i=Math.max(Math.min(i,1/w,1/b),A/w,_/b);const E=Ie._round(w*i),T=Ie._round(b*i);if(E===w&&T===b)return;u(this,an)||S(this,an,[p,m,w,b]);const R=c(w/2,b/2),N=Ie._round(p+R[0]),j=Ie._round(m+R[1]),I=c(E/2,T/2);this.x=N-I[0],this.y=j-I[1],this.width=E,this.height=T,this.setDims(d*E,f*T),this.fixAndSetPosition(),this._onResizing()},PE=function(){var e;(e=u(this,ut))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),C(this,Ae,rm).call(this)},lw=function(e){const{isMac:t}=ts.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},TE=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const n=new AbortController,i=this._uiManager.combinedSignal(n),o={capture:!0,passive:!1,signal:i},c=f=>{n.abort(),S(this,ja,null),S(this,el,!1),this._uiManager.endDragSession()||C(this,Ae,lw).call(this,f),s&&this._onStopDragging()};t&&(S(this,uu,e.clientX),S(this,hu,e.clientY),S(this,ja,e.pointerId),S(this,nf,e.pointerType),window.addEventListener("pointermove",f=>{s||(s=!0,this._onStartDragging());const{clientX:p,clientY:m,pointerId:w}=f;if(w!==u(this,ja)){Tt(f);return}const[b,A]=this.screenToPageTranslation(p-u(this,uu),m-u(this,hu));S(this,uu,p),S(this,hu,m),this._uiManager.dragSelectedEditors(b,A)},o),window.addEventListener("touchmove",Tt,o),window.addEventListener("pointerdown",f=>{f.pointerType===u(this,nf)&&(u(this,sl)||f.isPrimary)&&c(f),Tt(f)},o));const d=f=>{if(!u(this,ja)||u(this,ja)===f.pointerId){c(f);return}Tt(f)};window.addEventListener("pointerup",d,{signal:i}),window.addEventListener("blur",d,{signal:i})},cw=function(){if(u(this,La)||!this.div)return;S(this,La,new AbortController);const e=this._uiManager.combinedSignal(u(this,La));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},NE=function(e){Ie._resizerKeyboardManager.exec(this,e)},RE=function(e){var t;u(this,wi)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,is)&&C(this,Ae,od).call(this)},jE=function(e){S(this,rf,u(this,wi)?e:"")},uw=function(e){if(u(this,sr))for(const t of u(this,sr))t.tabIndex=e},od=function(){S(this,wi,!1),C(this,Ae,uw).call(this,-1),C(this,Ae,rm).call(this)},k(Ie,lf),ee(Ie,"_l10n",null),ee(Ie,"_l10nResizer",null),ee(Ie,"_borderLineWidth",-1),ee(Ie,"_colorManager",new Jy),ee(Ie,"_zIndex",1),ee(Ie,"_telemetryTimeout",1e3);let ot=Ie;class gL extends ot{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ES=3285377520,Tn=4294901760,Ar=65535;class LE{constructor(e){this.h1=e?e&4294967295:ES,this.h2=e?e&4294967295:ES}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let _=0,E=e.length;_<E;_++){const T=e.charCodeAt(_);T<=255?t[s++]=T:(t[s++]=T>>>8,t[s++]=T&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=s>>2,i=s-n*4,o=new Uint32Array(t.buffer,0,n);let c=0,d=0,f=this.h1,p=this.h2;const m=3432918353,w=461845907,b=m&Ar,A=w&Ar;for(let _=0;_<n;_++)_&1?(c=o[_],c=c*m&Tn|c*b&Ar,c=c<<15|c>>>17,c=c*w&Tn|c*A&Ar,f^=c,f=f<<13|f>>>19,f=f*5+3864292196):(d=o[_],d=d*m&Tn|d*b&Ar,d=d<<15|d>>>17,d=d*w&Tn|d*A&Ar,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(c=0,i){case 3:c^=t[n*4+2]<<16;case 2:c^=t[n*4+1]<<8;case 1:c^=t[n*4],c=c*m&Tn|c*b&Ar,c=c<<15|c>>>17,c=c*w&Tn|c*A&Ar,n&1?f^=c:p^=c}this.h1=f,this.h2=p}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Tn|e*36045&Ar,t=t*4283543511&Tn|((t<<16|e>>>16)*2950163797&Tn)>>>16,e^=t>>>1,e=e*444984403&Tn|e*60499&Ar,t=t*3301882366&Tn|((t<<16|e>>>16)*3120437893&Tn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const hw=Object.freeze({map:null,hash:"",transfer:void 0});var nl,rl,as,Gm,IE;class kx{constructor(){k(this,Gm);k(this,nl,!1);k(this,rl,null);k(this,as,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=u(this,as).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return u(this,as).get(e)}remove(e){if(u(this,as).delete(e),u(this,as).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of u(this,as).values())if(t instanceof ot)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=u(this,as).get(e);let n=!1;if(s!==void 0)for(const[i,o]of Object.entries(t))s[i]!==o&&(n=!0,s[i]=o);else n=!0,u(this,as).set(e,t);n&&C(this,Gm,IE).call(this),t instanceof ot&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return u(this,as).has(e)}get size(){return u(this,as).size}resetModified(){u(this,nl)&&(S(this,nl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ME(this)}get serializable(){if(u(this,as).size===0)return hw;const e=new Map,t=new LE,s=[],n=Object.create(null);let i=!1;for(const[o,c]of u(this,as)){const d=c instanceof ot?c.serialize(!1,n):c;d&&(e.set(o,d),t.update(`${o}:${JSON.stringify(d)}`),i||(i=!!d.bitmap))}if(i)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:hw}get editorStats(){let e=null;const t=new Map;for(const s of u(this,as).values()){if(!(s instanceof ot))continue;const n=s.telemetryFinalData;if(!n)continue;const{type:i}=n;t.has(i)||t.set(i,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const o=e[i]||(e[i]=new Map);for(const[c,d]of Object.entries(n)){if(c==="type")continue;let f=o.get(c);f||(f=new Map,o.set(c,f));const p=f.get(d)??0;f.set(d,p+1)}}for(const[s,n]of t)e[s]=n.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){S(this,rl,null)}get modifiedIds(){if(u(this,rl))return u(this,rl);const e=[];for(const t of u(this,as).values())!(t instanceof ot)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return S(this,rl,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,as).entries()}}nl=new WeakMap,rl=new WeakMap,as=new WeakMap,Gm=new WeakSet,IE=function(){u(this,nl)||(S(this,nl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var cf;class ME extends kx{constructor(t){super();k(this,cf);const{map:s,hash:n,transfer:i}=t.serializable,o=structuredClone(s,i?{transfer:i}:null);S(this,cf,{map:o,hash:n,transfer:i})}get print(){tt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,cf)}get modifiedIds(){return $e(this,"modifiedIds",{ids:new Set,hash:""})}}cf=new WeakMap;var du;class mL{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){k(this,du,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,du).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||u(this,du).has(e.loadedName))){if(Mt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:i,style:o}=e,c=new FontFace(n,i,o);this.addNativeFontFace(c);try{await c.load(),u(this,du).add(n),s==null||s(e)}catch{Ne(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}tt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(n){throw Ne(`Failed to load font '${s.family}': '${n}'.`),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const n=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return $e(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return $e(this,"isSyncFontLoadingSupported",Ls||ts.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Mt(!n.done,"completeRequest() cannot be called twice."),n.done=!0;s.length>0&&s[0].done;){const i=s.shift();setTimeout(i.callback,0)}}const{loadingRequests:s}=this,n={done:!1,complete:t,callback:e};return s.push(n),n}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return $e(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(j,I){return j.charCodeAt(I)<<24|j.charCodeAt(I+1)<<16|j.charCodeAt(I+2)<<8|j.charCodeAt(I+3)&255}function n(j,I,F,B){const W=j.substring(0,I),K=j.substring(I+F);return W+B+K}let i,o;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let f=0;function p(j,I){if(++f>30){Ne("Load test font never loaded."),I();return}if(d.font="30px "+j,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(p.bind(null,j,I))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=n(w,976,m.length,m);const A=16,_=1482184792;let E=s(w,A);for(i=0,o=m.length-3;i<o;i+=4)E=E-_+s(m,i)|0;i<m.length&&(E=E-_+s(m+"XXX",i)|0),w=n(w,A,4,rL(E));const T=`url(data:font/opentype;base64,${btoa(w)});`,R=`@font-face {font-family:"${m}";src:${T}}`;this.insertRule(R);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const j of[e.loadedName,m]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=j,N.append(I)}this._document.body.append(N),p(m,()=>{N.remove(),t.complete()})}}du=new WeakMap;class vL{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${QA(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let n;try{n=e.get(s)}catch(o){Ne(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(n||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=i}}function yL(l){if(l instanceof URL)return l.href;if(typeof l=="string"){if(Ls)return l;const e=URL.parse(l,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function wL(l){if(Ls&&typeof Buffer<"u"&&l instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return vp(l);if(l instanceof ArrayBuffer||ArrayBuffer.isView(l)||typeof l=="object"&&!isNaN(l==null?void 0:l.length))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Hg(l){if(typeof l!="string")return null;if(l.endsWith("/"))return l;throw new Error(`Invalid factory url: "${l}" must include trailing slash.`)}const dw=l=>typeof l=="object"&&Number.isInteger(l==null?void 0:l.num)&&l.num>=0&&Number.isInteger(l==null?void 0:l.gen)&&l.gen>=0,xL=l=>typeof l=="object"&&typeof(l==null?void 0:l.name)=="string",DE=lL.bind(null,dw,xL);var xi,qm;class bL{constructor(){k(this,xi,new Map);k(this,qm,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};u(this,qm).then(()=>{for(const[n]of u(this,xi))n.call(this,s)})}addEventListener(e,t,s=null){let n=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:i}=s;if(i.aborted){Ne("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);n=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}u(this,xi).set(t,n)}removeEventListener(e,t){const s=u(this,xi).get(t);s==null||s(),u(this,xi).delete(t)}terminate(){for(const[,e]of u(this,xi))e==null||e();u(this,xi).clear()}}xi=new WeakMap,qm=new WeakMap;const Vg={DATA:1,ERROR:2},It={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function kS(){}function Gs(l){if(l instanceof Hi||l instanceof jm||l instanceof _S||l instanceof jd||l instanceof Ay)return l;switch(l instanceof Error||typeof l=="object"&&l!==null||tt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),l.name){case"AbortException":return new Hi(l.message);case"InvalidPDFException":return new jm(l.message);case"PasswordException":return new _S(l.message,l.code);case"ResponseException":return new jd(l.message,l.status,l.missing);case"UnknownErrorException":return new Ay(l.message,l.details)}return new Ay(l.message,l.toString())}var fu,Un,OE,FE,$E,im;class ld{constructor(e,t,s){k(this,Un);k(this,fu,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",C(this,Un,OE).bind(this),{signal:u(this,fu).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const n=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[n]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t},s)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,s,n){const i=this.streamId++,o=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[i]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:o,targetName:c,action:e,streamId:i,data:t,desiredSize:f.desiredSize},n),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[i].pullCall=p,d.postMessage({sourceName:o,targetName:c,stream:It.PULL,streamId:i,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Mt(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[i].cancelCall=p,this.streamControllers[i].isClosed=!0,d.postMessage({sourceName:o,targetName:c,stream:It.CANCEL,streamId:i,reason:Gs(f)}),p.promise}},s)}destroy(){var e;(e=u(this,fu))==null||e.abort(),S(this,fu,null)}}fu=new WeakMap,Un=new WeakSet,OE=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){C(this,Un,$E).call(this,e);return}if(e.callback){const s=e.callbackId,n=this.callbackCapabilities[s];if(!n)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Vg.DATA)n.resolve(e.data);else if(e.callback===Vg.ERROR)n.reject(Gs(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,n=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:s,targetName:n,callback:Vg.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:s,targetName:n,callback:Vg.ERROR,callbackId:e.callbackId,reason:Gs(o)})});return}if(e.streamId){C(this,Un,FE).call(this,e);return}t(e.data)},FE=function(e){const t=e.streamId,s=this.sourceName,n=e.sourceName,i=this.comObj,o=this,c=this.actionHandler[e.action],d={enqueue(f,p=1,m){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=p,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:s,targetName:n,stream:It.ENQUEUE,streamId:t,chunk:f},m)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:n,stream:It.CLOSE,streamId:t}),delete o.streamSinks[t])},error(f){Mt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:n,stream:It.ERROR,streamId:t,reason:Gs(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(c,e.data,d).then(function(){i.postMessage({sourceName:s,targetName:n,stream:It.START_COMPLETE,streamId:t,success:!0})},function(f){i.postMessage({sourceName:s,targetName:n,stream:It.START_COMPLETE,streamId:t,reason:Gs(f)})})},$E=function(e){const t=e.streamId,s=this.sourceName,n=e.sourceName,i=this.comObj,o=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case It.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Gs(e.reason));break;case It.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Gs(e.reason));break;case It.PULL:if(!c){i.postMessage({sourceName:s,targetName:n,stream:It.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||kS).then(function(){i.postMessage({sourceName:s,targetName:n,stream:It.PULL_COMPLETE,streamId:t,success:!0})},function(f){i.postMessage({sourceName:s,targetName:n,stream:It.PULL_COMPLETE,streamId:t,reason:Gs(f)})});break;case It.ENQUEUE:if(Mt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case It.CLOSE:if(Mt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),C(this,Un,im).call(this,o,t);break;case It.ERROR:Mt(o,"error should have stream controller"),o.controller.error(Gs(e.reason)),C(this,Un,im).call(this,o,t);break;case It.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Gs(e.reason)),C(this,Un,im).call(this,o,t);break;case It.CANCEL:if(!c)break;const d=Gs(e.reason);Promise.try(c.onCancel||kS,d).then(function(){i.postMessage({sourceName:s,targetName:n,stream:It.CANCEL_COMPLETE,streamId:t,success:!0})},function(f){i.postMessage({sourceName:s,targetName:n,stream:It.CANCEL_COMPLETE,streamId:t,reason:Gs(f)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},im=async function(e,t){var s,n,i;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(n=e.pullCall)==null?void 0:n.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var uf;class BE{constructor({enableHWA:e=!1}){k(this,uf,!1);S(this,uf,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!u(this,uf)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){tt("Abstract method `_createCanvas` called.")}}uf=new WeakMap;class _L extends BE{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class UE{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){tt("Abstract method `_fetch` called.")}}class CS extends UE{async _fetch(e){const t=await uh(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):vp(t)}}class zE{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,n,i){return"none"}destroy(e=!1){}}var il,pu,bi,_i,xs,al,ol,ae,vs,cd,$c,am,Bc,HE,fw,Uc,ud,hd,pw,dd;class SL extends zE{constructor({docId:t,ownerDocument:s=globalThis.document}){super();k(this,ae);k(this,il);k(this,pu);k(this,bi);k(this,_i);k(this,xs);k(this,al);k(this,ol,0);S(this,_i,t),S(this,xs,s)}addFilter(t){if(!t)return"none";let s=u(this,ae,vs).get(t);if(s)return s;const[n,i,o]=C(this,ae,am).call(this,t),c=t.length===1?n:`${n}${i}${o}`;if(s=u(this,ae,vs).get(c),s)return u(this,ae,vs).set(t,s),s;const d=`g_${u(this,_i)}_transfer_map_${Cs(this,ol)._++}`,f=C(this,ae,Bc).call(this,d);u(this,ae,vs).set(t,f),u(this,ae,vs).set(c,f);const p=C(this,ae,Uc).call(this,d);return C(this,ae,hd).call(this,n,i,o,p),f}addHCMFilter(t,s){var A;const n=`${t}-${s}`,i="base";let o=u(this,ae,cd).get(i);if((o==null?void 0:o.key)===n||(o?((A=o.filter)==null||A.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},u(this,ae,cd).set(i,o)),!t||!s))return o.url;const c=C(this,ae,dd).call(this,t);t=ve.makeHexColor(...c);const d=C(this,ae,dd).call(this,s);if(s=ve.makeHexColor(...d),u(this,ae,$c).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const f=new Array(256);for(let _=0;_<=255;_++){const E=_/255;f[_]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const p=f.join(","),m=`g_${u(this,_i)}_hcm_filter`,w=o.filter=C(this,ae,Uc).call(this,m);C(this,ae,hd).call(this,p,p,p,w),C(this,ae,fw).call(this,w);const b=(_,E)=>{const T=c[_]/255,R=d[_]/255,N=new Array(E+1);for(let j=0;j<=E;j++)N[j]=T+j/E*(R-T);return N.join(",")};return C(this,ae,hd).call(this,b(0,5),b(1,5),b(2,5),w),o.url=C(this,ae,Bc).call(this,m),o.url}addAlphaFilter(t){let s=u(this,ae,vs).get(t);if(s)return s;const[n]=C(this,ae,am).call(this,[t]),i=`alpha_${n}`;if(s=u(this,ae,vs).get(i),s)return u(this,ae,vs).set(t,s),s;const o=`g_${u(this,_i)}_alpha_map_${Cs(this,ol)._++}`,c=C(this,ae,Bc).call(this,o);u(this,ae,vs).set(t,c),u(this,ae,vs).set(i,c);const d=C(this,ae,Uc).call(this,o);return C(this,ae,pw).call(this,n,d),c}addLuminosityFilter(t){let s=u(this,ae,vs).get(t||"luminosity");if(s)return s;let n,i;if(t?([n]=C(this,ae,am).call(this,[t]),i=`luminosity_${n}`):i="luminosity",s=u(this,ae,vs).get(i),s)return u(this,ae,vs).set(t,s),s;const o=`g_${u(this,_i)}_luminosity_map_${Cs(this,ol)._++}`,c=C(this,ae,Bc).call(this,o);u(this,ae,vs).set(t,c),u(this,ae,vs).set(i,c);const d=C(this,ae,Uc).call(this,o);return C(this,ae,HE).call(this,d),t&&C(this,ae,pw).call(this,n,d),c}addHighlightHCMFilter(t,s,n,i,o){var R;const c=`${s}-${n}-${i}-${o}`;let d=u(this,ae,cd).get(t);if((d==null?void 0:d.key)===c||(d?((R=d.filter)==null||R.remove(),d.key=c,d.url="none",d.filter=null):(d={key:c,url:"none",filter:null},u(this,ae,cd).set(t,d)),!s||!n))return d.url;const[f,p]=[s,n].map(C(this,ae,dd).bind(this));let m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),w=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[b,A]=[i,o].map(C(this,ae,dd).bind(this));w<m&&([m,w,b,A]=[w,m,A,b]),u(this,ae,$c).style.color="";const _=(N,j,I)=>{const F=new Array(256),B=(w-m)/I,W=N/255,K=(j-N)/(255*I);let te=0;for(let Q=0;Q<=I;Q++){const _e=Math.round(m+Q*B),we=W+Q*K;for(let pe=te;pe<=_e;pe++)F[pe]=we;te=_e+1}for(let Q=te;Q<256;Q++)F[Q]=F[te-1];return F.join(",")},E=`g_${u(this,_i)}_hcm_${t}_filter`,T=d.filter=C(this,ae,Uc).call(this,E);return C(this,ae,fw).call(this,T),C(this,ae,hd).call(this,_(b[0],A[0],5),_(b[1],A[1],5),_(b[2],A[2],5),T),d.url=C(this,ae,Bc).call(this,E),d.url}destroy(t=!1){var s,n,i,o;t&&((s=u(this,al))!=null&&s.size)||((n=u(this,bi))==null||n.parentNode.parentNode.remove(),S(this,bi,null),(i=u(this,pu))==null||i.clear(),S(this,pu,null),(o=u(this,al))==null||o.clear(),S(this,al,null),S(this,ol,0))}}il=new WeakMap,pu=new WeakMap,bi=new WeakMap,_i=new WeakMap,xs=new WeakMap,al=new WeakMap,ol=new WeakMap,ae=new WeakSet,vs=function(){return u(this,pu)||S(this,pu,new Map)},cd=function(){return u(this,al)||S(this,al,new Map)},$c=function(){if(!u(this,bi)){const t=u(this,xs).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const n=u(this,xs).createElementNS(ii,"svg");n.setAttribute("width",0),n.setAttribute("height",0),S(this,bi,u(this,xs).createElementNS(ii,"defs")),t.append(n),n.append(u(this,bi)),u(this,xs).body.append(t)}return u(this,bi)},am=function(t){if(t.length===1){const f=t[0],p=new Array(256);for(let w=0;w<256;w++)p[w]=f[w]/255;const m=p.join(",");return[m,m,m]}const[s,n,i]=t,o=new Array(256),c=new Array(256),d=new Array(256);for(let f=0;f<256;f++)o[f]=s[f]/255,c[f]=n[f]/255,d[f]=i[f]/255;return[o.join(","),c.join(","),d.join(",")]},Bc=function(t){if(u(this,il)===void 0){S(this,il,"");const s=u(this,xs).URL;s!==u(this,xs).baseURI&&(wp(s)?Ne('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,il,_x(s,"")))}return`url(${u(this,il)}#${t})`},HE=function(t){const s=u(this,xs).createElementNS(ii,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},fw=function(t){const s=u(this,xs).createElementNS(ii,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},Uc=function(t){const s=u(this,xs).createElementNS(ii,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),u(this,ae,$c).append(s),s},ud=function(t,s,n){const i=u(this,xs).createElementNS(ii,s);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)},hd=function(t,s,n,i){const o=u(this,xs).createElementNS(ii,"feComponentTransfer");i.append(o),C(this,ae,ud).call(this,o,"feFuncR",t),C(this,ae,ud).call(this,o,"feFuncG",s),C(this,ae,ud).call(this,o,"feFuncB",n)},pw=function(t,s){const n=u(this,xs).createElementNS(ii,"feComponentTransfer");s.append(n),C(this,ae,ud).call(this,n,"feFuncA",t)},dd=function(t){return u(this,ae,$c).style.color=t,Ex(getComputedStyle(u(this,ae,$c)).getPropertyValue("color"))};class VE{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){tt("Abstract method `_fetch` called.")}}class PS extends VE{async _fetch(e){const t=await uh(e,"arraybuffer");return new Uint8Array(t)}}class WE{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){tt("Abstract method `_fetch` called.")}}class TS extends WE{async _fetch(e){const t=await uh(e,"arraybuffer");return new Uint8Array(t)}}Ls&&Ne("Please use the `legacy` build in Node.js environments.");async function Cx(l){const t=await process.getBuiltinModule("fs").promises.readFile(l);return new Uint8Array(t)}class AL extends zE{}class EL extends BE{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class kL extends UE{async _fetch(e){return Cx(e)}}class CL extends VE{async _fetch(e){return Cx(e)}}class PL extends WE{async _fetch(e){return Cx(e)}}const cs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function gw(l,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],n=new Path2D;n.rect(e[0],e[1],t,s),l.clip(n)}class Px{isModifyingCurrentTransform(){return!1}getPattern(){tt("Abstract method `getPattern` called.")}}class TL extends Px{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,n){let i;if(n===cs.STROKE||n===cs.FILL){const o=t.current.getClippedPathBoundingBox(n,wt(e))||[0,0,0,0],c=Math.ceil(o[2]-o[0])||1,d=Math.ceil(o[3]-o[1])||1,f=t.cachedCanvases.getCanvas("pattern",c,d),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-o[0],-o[1]),s=ve.transform(s,[1,0,0,1,o[0],o[1]]),p.transform(...t.baseTransform),this.matrix&&p.transform(...this.matrix),gw(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),i=e.createPattern(f.canvas,"no-repeat");const m=new DOMMatrix(s);i.setTransform(m)}else gw(e,this._bbox),i=this._createGradient(e);return i}}function Cy(l,e,t,s,n,i,o,c){const d=e.coords,f=e.colors,p=l.data,m=l.width*4;let w;d[t+1]>d[s+1]&&(w=t,t=s,s=w,w=i,i=o,o=w),d[s+1]>d[n+1]&&(w=s,s=n,n=w,w=o,o=c,c=w),d[t+1]>d[s+1]&&(w=t,t=s,s=w,w=i,i=o,o=w);const b=(d[t]+e.offsetX)*e.scaleX,A=(d[t+1]+e.offsetY)*e.scaleY,_=(d[s]+e.offsetX)*e.scaleX,E=(d[s+1]+e.offsetY)*e.scaleY,T=(d[n]+e.offsetX)*e.scaleX,R=(d[n+1]+e.offsetY)*e.scaleY;if(A>=R)return;const N=f[i],j=f[i+1],I=f[i+2],F=f[o],B=f[o+1],W=f[o+2],K=f[c],te=f[c+1],Q=f[c+2],_e=Math.round(A),we=Math.round(R);let pe,Ee,Z,X,Y,oe,ne,$;for(let V=_e;V<=we;V++){if(V<E){const ye=V<A?0:(A-V)/(A-E);pe=b-(b-_)*ye,Ee=N-(N-F)*ye,Z=j-(j-B)*ye,X=I-(I-W)*ye}else{let ye;V>R?ye=1:E===R?ye=0:ye=(E-V)/(E-R),pe=_-(_-T)*ye,Ee=F-(F-K)*ye,Z=B-(B-te)*ye,X=W-(W-Q)*ye}let le;V<A?le=0:V>R?le=1:le=(A-V)/(A-R),Y=b-(b-T)*le,oe=N-(N-K)*le,ne=j-(j-te)*le,$=I-(I-Q)*le;const Se=Math.round(Math.min(pe,Y)),ke=Math.round(Math.max(pe,Y));let Ce=m*V+Se*4;for(let ye=Se;ye<=ke;ye++)le=(pe-ye)/(pe-Y),le<0?le=0:le>1&&(le=1),p[Ce++]=Ee-(Ee-oe)*le|0,p[Ce++]=Z-(Z-ne)*le|0,p[Ce++]=X-(X-$)*le|0,p[Ce++]=255}}function NL(l,e,t){const s=e.coords,n=e.colors;let i,o;switch(e.type){case"lattice":const c=e.verticesPerRow,d=Math.floor(s.length/c)-1,f=c-1;for(i=0;i<d;i++){let p=i*c;for(let m=0;m<f;m++,p++)Cy(l,t,s[p],s[p+1],s[p+c],n[p],n[p+1],n[p+c]),Cy(l,t,s[p+c+1],s[p+1],s[p+c],n[p+c+1],n[p+1],n[p+c])}break;case"triangles":for(i=0,o=s.length;i<o;i+=3)Cy(l,t,s[i],s[i+1],s[i+2],n[i],n[i+1],n[i+2]);break;default:throw new Error("illegal figure")}}class RL extends Px{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-c,p=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(f*e[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),b=f/m,A=p/w,_={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/b,scaleY:1/A},E=m+2*2,T=w+2*2,R=s.getCanvas("mesh",E,T),N=R.context,j=N.createImageData(m,w);if(t){const F=j.data;for(let B=0,W=F.length;B<W;B+=4)F[B]=t[0],F[B+1]=t[1],F[B+2]=t[2],F[B+3]=255}for(const F of this._figures)NL(j,F,_);return N.putImageData(j,2,2),{canvas:R.canvas,offsetX:c-2*b,offsetY:d-2*A,scaleX:b,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,n){gw(e,this._bbox);const i=new Float32Array(2);if(n===cs.SHADING)ve.singularValueDecompose2dScale(wt(e),i);else if(this.matrix){ve.singularValueDecompose2dScale(this.matrix,i);const[c,d]=i;ve.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=c,i[1]*=d}else ve.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,n===cs.SHADING?null:this._background,t.cachedCanvases);return n!==cs.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class jL extends Px{getPattern(){return"hotpink"}}function LL(l){switch(l[0]){case"RadialAxial":return new TL(l);case"Mesh":return new RL(l);case"Dummy":return new jL}throw new Error(`Unknown IR type: ${l[0]}`)}const NS={COLORED:1,UNCOLORED:2},Km=class Km{constructor(e,t,s,n){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=n}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:n,tilingType:i,color:o,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),u0("TilingType: "+i);const p=t[0],m=t[1],w=t[2],b=t[3],A=w-p,_=b-m,E=new Float32Array(2);ve.singularValueDecompose2dScale(this.matrix,E);const[T,R]=E;ve.singularValueDecompose2dScale(this.baseTransform,E);const N=T*E[0],j=R*E[1];let I=A,F=_,B=!1,W=!1;const K=Math.ceil(d*N),te=Math.ceil(f*j),Q=Math.ceil(A*N),_e=Math.ceil(_*j);K>=Q?I=d:B=!0,te>=_e?F=f:W=!0;const we=this.getSizeAndScale(I,this.ctx.canvas.width,N),pe=this.getSizeAndScale(F,this.ctx.canvas.height,j),Ee=e.cachedCanvases.getCanvas("pattern",we.size,pe.size),Z=Ee.context,X=c.createCanvasGraphics(Z);if(X.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(X,n,o),Z.translate(-we.scale*p,-pe.scale*m),X.transform(we.scale,0,0,pe.scale,0,0),Z.save(),this.clipBbox(X,p,m,w,b),X.baseTransform=wt(X.ctx),X.executeOperatorList(s),X.endDrawing(),Z.restore(),B||W){const Y=Ee.canvas;B&&(I=d),W&&(F=f);const oe=this.getSizeAndScale(I,this.ctx.canvas.width,N),ne=this.getSizeAndScale(F,this.ctx.canvas.height,j),$=oe.size,V=ne.size,le=e.cachedCanvases.getCanvas("pattern-workaround",$,V),Se=le.context,ke=B?Math.floor(A/d):0,Ce=W?Math.floor(_/f):0;for(let ye=0;ye<=ke;ye++)for(let Le=0;Le<=Ce;Le++)Se.drawImage(Y,$*ye,V*Le,$,V,0,0,$,V);return{canvas:le.canvas,scaleX:oe.scale,scaleY:ne.scale,offsetX:p,offsetY:m}}return{canvas:Ee.canvas,scaleX:we.scale,scaleY:pe.scale,offsetX:p,offsetY:m}}getSizeAndScale(e,t,s){const n=Math.max(Km.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*s);return i>=n?i=n:s=i/e,{scale:s,size:i}}clipBbox(e,t,s,n,i){const o=n-t,c=i-s;e.ctx.rect(t,s,o,c),ve.axialAlignedBoundingBox([t,s,n,i],wt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const n=e.ctx,i=e.current;switch(t){case NS.COLORED:const{fillStyle:o,strokeStyle:c}=this.ctx;n.fillStyle=i.fillColor=o,n.strokeStyle=i.strokeColor=c;break;case NS.UNCOLORED:n.fillStyle=n.strokeStyle=s,i.fillColor=i.strokeColor=s;break;default:throw new nL(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,n){let i=s;n!==cs.SHADING&&(i=ve.transform(i,t.baseTransform),this.matrix&&(i=ve.transform(i,this.matrix)));const o=this.createPatternCanvas(t);let c=new DOMMatrix(i);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);const d=e.createPattern(o.canvas,"repeat");return d.setTransform(c),d}};ee(Km,"MAX_PATTERN_SIZE",3e3);let mw=Km;function IL({src:l,srcPos:e=0,dest:t,width:s,height:n,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const c=ts.isLittleEndian?4278190080:255,[d,f]=o?[i,c]:[c,i],p=s>>3,m=s&7,w=l.length;t=new Uint32Array(t.buffer);let b=0;for(let A=0;A<n;A++){for(const E=e+p;e<E;e++){const T=e<w?l[e]:255;t[b++]=T&128?f:d,t[b++]=T&64?f:d,t[b++]=T&32?f:d,t[b++]=T&16?f:d,t[b++]=T&8?f:d,t[b++]=T&4?f:d,t[b++]=T&2?f:d,t[b++]=T&1?f:d}if(m===0)continue;const _=e<w?l[e++]:255;for(let E=0;E<m;E++)t[b++]=_&1<<7-E?f:d}return{srcPos:e,destPos:b}}const RS=16,jS=100,ML=15,LS=10,Js=16,Py=new DOMMatrix,yn=new Float32Array(2),Wc=new Float32Array([1/0,1/0,-1/0,-1/0]);function DL(l,e){if(l._removeMirroring)throw new Error("Context is already forwarding operations.");l.__originalSave=l.save,l.__originalRestore=l.restore,l.__originalRotate=l.rotate,l.__originalScale=l.scale,l.__originalTranslate=l.translate,l.__originalTransform=l.transform,l.__originalSetTransform=l.setTransform,l.__originalResetTransform=l.resetTransform,l.__originalClip=l.clip,l.__originalMoveTo=l.moveTo,l.__originalLineTo=l.lineTo,l.__originalBezierCurveTo=l.bezierCurveTo,l.__originalRect=l.rect,l.__originalClosePath=l.closePath,l.__originalBeginPath=l.beginPath,l._removeMirroring=()=>{l.save=l.__originalSave,l.restore=l.__originalRestore,l.rotate=l.__originalRotate,l.scale=l.__originalScale,l.translate=l.__originalTranslate,l.transform=l.__originalTransform,l.setTransform=l.__originalSetTransform,l.resetTransform=l.__originalResetTransform,l.clip=l.__originalClip,l.moveTo=l.__originalMoveTo,l.lineTo=l.__originalLineTo,l.bezierCurveTo=l.__originalBezierCurveTo,l.rect=l.__originalRect,l.closePath=l.__originalClosePath,l.beginPath=l.__originalBeginPath,delete l._removeMirroring},l.save=function(){e.save(),this.__originalSave()},l.restore=function(){e.restore(),this.__originalRestore()},l.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},l.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},l.transform=function(t,s,n,i,o,c){e.transform(t,s,n,i,o,c),this.__originalTransform(t,s,n,i,o,c)},l.setTransform=function(t,s,n,i,o,c){e.setTransform(t,s,n,i,o,c),this.__originalSetTransform(t,s,n,i,o,c)},l.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},l.rotate=function(t){e.rotate(t),this.__originalRotate(t)},l.clip=function(t){e.clip(t),this.__originalClip(t)},l.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},l.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},l.bezierCurveTo=function(t,s,n,i,o,c){e.bezierCurveTo(t,s,n,i,o,c),this.__originalBezierCurveTo(t,s,n,i,o,c)},l.rect=function(t,s,n,i){e.rect(t,s,n,i),this.__originalRect(t,s,n,i)},l.closePath=function(){e.closePath(),this.__originalClosePath()},l.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class OL{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let n;return this.cache[e]!==void 0?(n=this.cache[e],this.canvasFactory.reset(n,t,s)):(n=this.canvasFactory.create(t,s),this.cache[e]=n),n}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Wg(l,e,t,s,n,i,o,c,d,f){const[p,m,w,b,A,_]=wt(l);if(m===0&&w===0){const R=o*p+A,N=Math.round(R),j=c*b+_,I=Math.round(j),F=(o+d)*p+A,B=Math.abs(Math.round(F)-N)||1,W=(c+f)*b+_,K=Math.abs(Math.round(W)-I)||1;return l.setTransform(Math.sign(p),0,0,Math.sign(b),N,I),l.drawImage(e,t,s,n,i,0,0,B,K),l.setTransform(p,m,w,b,A,_),[B,K]}if(p===0&&b===0){const R=c*w+A,N=Math.round(R),j=o*m+_,I=Math.round(j),F=(c+f)*w+A,B=Math.abs(Math.round(F)-N)||1,W=(o+d)*m+_,K=Math.abs(Math.round(W)-I)||1;return l.setTransform(0,Math.sign(m),Math.sign(w),0,N,I),l.drawImage(e,t,s,n,i,0,0,K,B),l.setTransform(p,m,w,b,A,_),[K,B]}l.drawImage(e,t,s,n,i,o,c,d,f);const E=Math.hypot(p,m),T=Math.hypot(w,b);return[E*d,T*f]}class IS{constructor(e,t){ee(this,"alphaIsShape",!1);ee(this,"fontSize",0);ee(this,"fontSizeScale",1);ee(this,"textMatrix",null);ee(this,"textMatrixScale",1);ee(this,"fontMatrix",qy);ee(this,"leading",0);ee(this,"x",0);ee(this,"y",0);ee(this,"lineX",0);ee(this,"lineY",0);ee(this,"charSpacing",0);ee(this,"wordSpacing",0);ee(this,"textHScale",1);ee(this,"textRenderingMode",ms.FILL);ee(this,"textRise",0);ee(this,"fillColor","#000000");ee(this,"strokeColor","#000000");ee(this,"patternFill",!1);ee(this,"patternStroke",!1);ee(this,"fillAlpha",1);ee(this,"strokeAlpha",1);ee(this,"lineWidth",1);ee(this,"activeSMask",null);ee(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Wc.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=cs.FILL,t=null){const s=this.minMax.slice();if(e===cs.STROKE){t||tt("Stroke bounding box must include transform."),ve.singularValueDecompose2dScale(t,yn);const n=yn[0]*this.lineWidth/2,i=yn[1]*this.lineWidth/2;s[0]-=n,s[1]-=i,s[2]+=n,s[3]+=i}return s}updateClipFromPath(){const e=ve.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Wc,0)}getClippedPathBoundingBox(e=cs.FILL,t=null){return ve.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function MS(l,e){if(e instanceof ImageData){l.putImageData(e,0,0);return}const t=e.height,s=e.width,n=t%Js,i=(t-n)/Js,o=n===0?i:i+1,c=l.createImageData(s,Js);let d=0,f;const p=e.data,m=c.data;let w,b,A,_;if(e.kind===Ed.GRAYSCALE_1BPP){const E=p.byteLength,T=new Uint32Array(m.buffer,0,m.byteLength>>2),R=T.length,N=s+7>>3,j=4294967295,I=ts.isLittleEndian?4278190080:255;for(w=0;w<o;w++){for(A=w<i?Js:n,f=0,b=0;b<A;b++){const F=E-d;let B=0;const W=F>N?s:F*8-7,K=W&-8;let te=0,Q=0;for(;B<K;B+=8)Q=p[d++],T[f++]=Q&128?j:I,T[f++]=Q&64?j:I,T[f++]=Q&32?j:I,T[f++]=Q&16?j:I,T[f++]=Q&8?j:I,T[f++]=Q&4?j:I,T[f++]=Q&2?j:I,T[f++]=Q&1?j:I;for(;B<W;B++)te===0&&(Q=p[d++],te=128),T[f++]=Q&te?j:I,te>>=1}for(;f<R;)T[f++]=0;l.putImageData(c,0,w*Js)}}else if(e.kind===Ed.RGBA_32BPP){for(b=0,_=s*Js*4,w=0;w<i;w++)m.set(p.subarray(d,d+_)),d+=_,l.putImageData(c,0,b),b+=Js;w<o&&(_=s*n*4,m.set(p.subarray(d,d+_)),l.putImageData(c,0,b))}else if(e.kind===Ed.RGB_24BPP)for(A=Js,_=s*A,w=0;w<o;w++){for(w>=i&&(A=n,_=s*A),f=0,b=_;b--;)m[f++]=p[d++],m[f++]=p[d++],m[f++]=p[d++],m[f++]=255;l.putImageData(c,0,w*Js)}else throw new Error(`bad image kind: ${e.kind}`)}function DS(l,e){if(e.bitmap){l.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,n=t%Js,i=(t-n)/Js,o=n===0?i:i+1,c=l.createImageData(s,Js);let d=0;const f=e.data,p=c.data;for(let m=0;m<o;m++){const w=m<i?Js:n;({srcPos:d}=IL({src:f,srcPos:d,dest:p,width:s,height:w,nonBlackColor:0})),l.putImageData(c,0,m*Js)}}function Qh(l,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)l[s]!==void 0&&(e[s]=l[s]);l.setLineDash!==void 0&&(e.setLineDash(l.getLineDash()),e.lineDashOffset=l.lineDashOffset)}function Gg(l){l.strokeStyle=l.fillStyle="#000000",l.fillRule="nonzero",l.globalAlpha=1,l.lineWidth=1,l.lineCap="butt",l.lineJoin="miter",l.miterLimit=10,l.globalCompositeOperation="source-over",l.font="10px sans-serif",l.setLineDash!==void 0&&(l.setLineDash([]),l.lineDashOffset=0);const{filter:e}=l;e!=="none"&&e!==""&&(l.filter="none")}function OS(l,e){if(e)return!0;ve.singularValueDecompose2dScale(l,yn);const t=Math.fround(gr.pixelRatio*Vi.PDF_TO_CSS_UNITS);return yn[0]<=t&&yn[1]<=t}const FL=["butt","round","square"],$L=["miter","round","bevel"],BL={},FS={};var mr,vw,yw,ww;const Fx=class Fx{constructor(e,t,s,n,i,{optionalContentConfig:o,markedContentStack:c=null},d,f){k(this,mr);this.ctx=e,this.current=new IS(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=n,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=o,this.cachedCanvases=new OL(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:n=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=c,s){const d=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...wt(this.compositeCtx))}this.ctx.save(),Gg(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=wt(this.ctx)}executeOperatorList(e,t,s,n){const i=e.argsArray,o=e.fnArray;let c=t||0;const d=i.length;if(d===c)return c;const f=d-c>LS&&typeof s=="function",p=f?Date.now()+ML:0;let m=0;const w=this.commonObjs,b=this.objs;let A;for(;;){if(n!==void 0&&c===n.nextBreakPoint)return n.breakIt(c,s),c;if(A=o[c],A!==Rd.dependency)this[A].apply(this,i[c]);else for(const _ of i[c]){const E=_.startsWith("g_")?w:b;if(!E.has(_))return E.get(_,s),c}if(c++,c===d)return c;if(f&&++m>LS){if(Date.now()>p)return s(),c;m=0}}}endDrawing(){C(this,mr,vw).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),C(this,mr,yw).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,n=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),c=s,d=n,f="prescale1",p,m;for(;i>2&&c>1||o>2&&d>1;){let w=c,b=d;i>2&&c>1&&(w=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),i/=c/w),o>2&&d>1&&(b=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,o/=d/b),p=this.cachedCanvases.getCanvas(f,w,b),m=p.context,m.clearRect(0,0,w,b),m.drawImage(e,0,0,c,d,0,0,w,b),e=p.canvas,c=w,d=b,f=f==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:n}=e,i=this.current.fillColor,o=this.current.patternFill,c=wt(t);let d,f,p,m;if((e.bitmap||e.data)&&e.count>1){const K=e.bitmap||e.data.buffer;f=JSON.stringify(o?c:[c.slice(0,4),i]),d=this._cachedBitmapsMap.get(K),d||(d=new Map,this._cachedBitmapsMap.set(K,d));const te=d.get(f);if(te&&!o){const Q=Math.round(Math.min(c[0],c[2])+c[4]),_e=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:te,offsetX:Q,offsetY:_e}}p=te}p||(m=this.cachedCanvases.getCanvas("maskCanvas",s,n),DS(m.context,e));let w=ve.transform(c,[1/s,0,0,-1/n,0,0]);w=ve.transform(w,[1,0,0,1,0,-n]);const b=Wc.slice();ve.axialAlignedBoundingBox([0,0,s,n],w,b);const[A,_,E,T]=b,R=Math.round(E-A)||1,N=Math.round(T-_)||1,j=this.cachedCanvases.getCanvas("fillCanvas",R,N),I=j.context,F=A,B=_;I.translate(-F,-B),I.transform(...w),p||(p=this._scaleImage(m.canvas,Sr(I)),p=p.img,d&&o&&d.set(f,p)),I.imageSmoothingEnabled=OS(wt(I),e.interpolate),Wg(I,p,0,0,p.width,p.height,0,0,s,n),I.globalCompositeOperation="source-in";const W=ve.transform(Sr(I),[1,0,0,1,-F,-B]);return I.fillStyle=o?i.getPattern(t,this,W,cs.FILL):i,I.fillRect(0,0,s,n),d&&!o&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,j.canvas)),{canvas:j.canvas,offsetX:Math.round(F),offsetY:Math.round(B)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=FL[e]}setLineJoin(e){this.ctx.lineJoin=$L[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx;const i=this.ctx=n.context;i.setTransform(this.suspendedCtx.getTransform()),Qh(this.suspendedCtx,i),DL(i,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Qh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,n){const i=n[0],o=n[1],c=n[2]-i,d=n[3]-o;c===0||d===0||(this.genericComposeSMask(t.context,s,c,d,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,n,i,o,c,d,f,p,m){let w=e.canvas,b=d-p,A=f-m;if(o)if(b<0||A<0||b+s>w.width||A+n>w.height){const E=this.cachedCanvases.getCanvas("maskExtension",s,n),T=E.context;T.drawImage(w,-b,-A),T.globalCompositeOperation="destination-atop",T.fillStyle=o,T.fillRect(0,0,s,n),T.globalCompositeOperation="source-over",w=E.canvas,b=A=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(b,A,s,n),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(b,A,s,n),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const _=new Path2D;_.rect(d,f,s,n),t.clip(_),t.globalCompositeOperation="destination-in",t.drawImage(w,b,A,s,n,d,f,s,n),t.restore()}save(){this.inSMaskMode&&Qh(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Qh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,n,i,o){this.ctx.transform(e,t,s,n,i,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){let[n]=t;if(!s){n||(n=t[0]=new Path2D),this[e](n);return}if(!(n instanceof Path2D)){const i=t[0]=new Path2D;for(let o=0,c=n.length;o<c;)switch(n[o++]){case zg.moveTo:i.moveTo(n[o++],n[o++]);break;case zg.lineTo:i.lineTo(n[o++],n[o++]);break;case zg.curveTo:i.bezierCurveTo(n[o++],n[o++],n[o++],n[o++],n[o++],n[o++]);break;case zg.closePath:i.closePath();break;default:Ne(`Unrecognized drawing path operator: ${n[o-1]}`);break}n=i}ve.axialAlignedBoundingBox(s,wt(this.ctx),this.current.minMax),this[e](n)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const s=this.ctx,n=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof n=="object"&&(n!=null&&n.getPattern)){const i=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=n.getPattern(s,this,Sr(s),cs.STROKE),i){const o=new Path2D;o.addPath(e,s.getTransform().invertSelf().multiplySelf(i)),e=o}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(cs.STROKE,wt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const s=this.ctx,n=this.current.fillColor,i=this.current.patternFill;let o=!1;if(i){const d=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=n.getPattern(s,this,Sr(s),cs.FILL),d){const f=new Path2D;f.addPath(e,s.getTransform().invertSelf().multiplySelf(d)),e=f}o=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),o&&s.restore(),t&&this.consumePath(e,c)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=BL}eoClip(){this.pendingClip=FS}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const s=new Path2D,n=t.getTransform().invertSelf();for(const{transform:i,x:o,y:c,fontSize:d,path:f}of e)s.addPath(f,new DOMMatrix(i).preMultiplySelf(n).translate(o,c).scale(d,-d));t.clip(s),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var p;const s=this.commonObjs.get(e),n=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(n.fontMatrix=s.fontMatrix||qy,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&Ne("Invalid font matrix for font "+e),t<0?(t=-t,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const i=s.loadedName||"sans-serif",o=((p=s.systemFontInfo)==null?void 0:p.css)||`"${i}", ${s.fallbackName}`;let c="normal";s.black?c="900":s.bold&&(c="bold");const d=s.italic?"italic":"normal";let f=t;t<RS?f=RS:t>jS&&(f=jS),this.current.fontSizeScale=t/f,this.ctx.font=`${d} ${c} ${f}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,n,i){const o=this.ctx,c=this.current,d=c.font,f=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,m=f&ms.FILL_STROKE_MASK,w=!!(f&ms.ADD_TO_PATH_FLAG),b=c.patternFill&&!d.missingFile,A=c.patternStroke&&!d.missingFile;let _;if((d.disableFontFace||w||b||A)&&(_=d.getPathGenerator(this.commonObjs,e)),d.disableFontFace||b||A){o.save(),o.translate(t,s),o.scale(p,-p);let E;if((m===ms.FILL||m===ms.FILL_STROKE)&&(n?(E=o.getTransform(),o.setTransform(...n),o.fill(C(this,mr,ww).call(this,_,E,n))):o.fill(_)),m===ms.STROKE||m===ms.FILL_STROKE)if(i){E||(E=o.getTransform()),o.setTransform(...i);const{a:T,b:R,c:N,d:j}=E,I=ve.inverseTransform(i),F=ve.transform([T,R,N,j,0,0],I);ve.singularValueDecompose2dScale(F,yn),o.lineWidth*=Math.max(yn[0],yn[1])/p,o.stroke(C(this,mr,ww).call(this,_,E,i))}else o.lineWidth/=p,o.stroke(_);o.restore()}else(m===ms.FILL||m===ms.FILL_STROKE)&&o.fillText(e,t,s),(m===ms.STROKE||m===ms.FILL_STROKE)&&o.strokeText(e,t,s);w&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:wt(o),x:t,y:s,fontSize:p,path:_})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let n=3;n<t.length;n+=4)if(t[n]>0&&t[n]<255){s=!0;break}return $e(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const n=t.fontSize;if(n===0)return;const i=this.ctx,o=t.fontSizeScale,c=t.charSpacing,d=t.wordSpacing,f=t.fontDirection,p=t.textHScale*f,m=e.length,w=s.vertical,b=w?1:-1,A=s.defaultVMetrics,_=n*t.fontMatrix[0],E=t.textRenderingMode===ms.FILL&&!s.disableFontFace&&!t.patternFill;i.save(),t.textMatrix&&i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),f>0?i.scale(p,-1):i.scale(p,1);let T,R;if(t.patternFill){i.save();const B=t.fillColor.getPattern(i,this,Sr(i),cs.FILL);T=wt(i),i.restore(),i.fillStyle=B}if(t.patternStroke){i.save();const B=t.strokeColor.getPattern(i,this,Sr(i),cs.STROKE);R=wt(i),i.restore(),i.strokeStyle=B}let N=t.lineWidth;const j=t.textMatrixScale;if(j===0||N===0){const B=t.textRenderingMode&ms.FILL_STROKE_MASK;(B===ms.STROKE||B===ms.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=j;if(o!==1&&(i.scale(o,o),N/=o),i.lineWidth=N,s.isInvalidPDFjsFont){const B=[];let W=0;for(const K of e)B.push(K.unicode),W+=K.width;i.fillText(B.join(""),0,0),t.x+=W*_*p,i.restore(),this.compose();return}let I=0,F;for(F=0;F<m;++F){const B=e[F];if(typeof B=="number"){I+=b*B*n/1e3;continue}let W=!1;const K=(B.isSpace?d:0)+c,te=B.fontChar,Q=B.accent;let _e,we,pe=B.width;if(w){const Z=B.vmetric||A,X=-(B.vmetric?Z[1]:pe*.5)*_,Y=Z[2]*_;pe=Z?-Z[0]:pe,_e=X/o,we=(I+Y)/o}else _e=I/o,we=0;if(s.remeasure&&pe>0){const Z=i.measureText(te).width*1e3/n*o;if(pe<Z&&this.isFontSubpixelAAEnabled){const X=pe/Z;W=!0,i.save(),i.scale(X,1),_e/=X}else pe!==Z&&(_e+=(pe-Z)/2e3*n/o)}if(this.contentVisible&&(B.isInFont||s.missingFile)){if(E&&!Q)i.fillText(te,_e,we);else if(this.paintChar(te,_e,we,T,R),Q){const Z=_e+n*Q.offset.x/o,X=we-n*Q.offset.y/o;this.paintChar(Q.fontChar,Z,X,T,R)}}const Ee=w?pe*_-K*f:pe*_+K*f;I+=Ee,W&&i.restore()}w?t.y-=I:t.x+=I*p,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,n=s.font,i=s.fontSize,o=s.fontDirection,c=n.vertical?1:-1,d=s.charSpacing,f=s.wordSpacing,p=s.textHScale*o,m=s.fontMatrix||qy,w=e.length,b=s.textRenderingMode===ms.INVISIBLE;let A,_,E,T;if(!(b||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),s.textMatrix&&t.transform(...s.textMatrix),t.translate(s.x,s.y+s.textRise),t.scale(p,o),A=0;A<w;++A){if(_=e[A],typeof _=="number"){T=c*_*i/1e3,this.ctx.translate(T,0),s.x+=T*p;continue}const R=(_.isSpace?f:0)+d,N=n.charProcOperatorList[_.operatorListId];N?this.contentVisible&&(this.save(),t.scale(i,i),t.transform(...m),this.executeOperatorList(N),this.restore()):Ne(`Type3 character "${_.operatorListId}" is not available.`);const j=[_.width,0];ve.applyTransform(j,m),E=j[0]*i+R,t.translate(E,0),s.x+=E*p}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,n,i,o){const c=new Path2D;c.rect(s,n,i-s,o-n),this.ctx.clip(c),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=this.baseTransform||wt(this.ctx),n={createCanvasGraphics:i=>new Fx(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new mw(e,this.ctx,n,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=LL(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,Sr(t),cs.SHADING);const n=Sr(t);if(n){const{width:i,height:o}=t.canvas,c=Wc.slice();ve.axialAlignedBoundingBox([0,0,i,o],n,c);const[d,f,p,m]=c;this.ctx.fillRect(d,f,p-d,m-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){tt("Should not call beginInlineImage")}beginImageData(){tt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=wt(this.ctx),t)){ve.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[s,n,i,o]=t,c=new Path2D;c.rect(s,n,i-s,o-n),this.ctx.clip(c),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||u0("TODO: Support non-isolated groups."),e.knockout&&Ne("Knockout groups not supported.");const s=wt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let n=Wc.slice();ve.axialAlignedBoundingBox(e.bbox,wt(t),n);const i=[0,0,t.canvas.width,t.canvas.height];n=ve.intersect(n,i)||[0,0,0,0];const o=Math.floor(n[0]),c=Math.floor(n[1]),d=Math.max(Math.ceil(n[2])-o,1),f=Math.max(Math.ceil(n[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,f]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(p,d,f),w=m.context;w.translate(-o,-c),w.transform(...s);let b=new Path2D;const[A,_,E,T]=e.bbox;if(b.rect(A,_,E-A,T-_),e.matrix){const R=new Path2D;R.addPath(b,new DOMMatrix(e.matrix)),b=R}w.clip(b),e.smask?this.smaskStack.push({canvas:m.canvas,context:w,offsetX:o,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,c),t.save()),Qh(t,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=wt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const i=Wc.slice();ve.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],n,i),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,s,n,i){if(C(this,mr,vw).call(this),Gg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],c=t[3]-t[1];if(i&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=c,ve.singularValueDecompose2dScale(wt(this.ctx),yn);const{viewportScale:d}=this,f=Math.ceil(o*this.outputScaleX*d),p=Math.ceil(c*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:m,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform(yn[0],0,0,-yn[1],0,c*yn[1]),Gg(this.ctx)}else{Gg(this.ctx),this.endPath();const d=new Path2D;d.rect(t[0],t[1],o,c),this.ctx.clip(d)}}this.current=new IS(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),C(this,mr,yw).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,n=this._createMaskCanvas(e),i=n.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(i,n.offsetX,n.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,n=0,i,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const c=this.ctx;c.save();const d=wt(c);c.transform(t,s,n,i,0,0);const f=this._createMaskCanvas(e);c.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let p=0,m=o.length;p<m;p+=2){const w=ve.transform(d,[t,s,n,i,o[p],o[p+1]]);c.drawImage(f.canvas,w[4],w[5])}c.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,n=this.current.patternFill;for(const i of e){const{data:o,width:c,height:d,transform:f}=i,p=this.cachedCanvases.getCanvas("maskCanvas",c,d),m=p.context;m.save();const w=this.getObject(o,i);DS(m,w),m.globalCompositeOperation="source-in",m.fillStyle=n?s.getPattern(m,this,Sr(t),cs.FILL):s,m.fillRect(0,0,c,d),m.restore(),t.save(),t.transform(...f),t.scale(1,-1),Wg(t,p.canvas,0,0,c,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ne("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,n){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){Ne("Dependent image isn't ready yet");return}const o=i.width,c=i.height,d=[];for(let f=0,p=n.length;f<p;f+=2)d.push({transform:[t,0,0,s,n[f],n[f+1]],x:0,y:0,w:o,h:c});this.paintInlineImageXObjectGroup(i,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:n}=e,i=this.cachedCanvases.getCanvas("inlineImage",s,n),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,n=this.ctx;this.save();const{filter:i}=n;i!=="none"&&i!==""&&(n.filter="none"),n.scale(1/t,-1/s);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const f=this.cachedCanvases.getCanvas("inlineImage",t,s).context;MS(f,e),o=this.applyTransferMapsToCanvas(f)}const c=this._scaleImage(o,Sr(n));n.imageSmoothingEnabled=OS(wt(n),e.interpolate),Wg(n,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let n;if(e.bitmap)n=e.bitmap;else{const i=e.width,o=e.height,d=this.cachedCanvases.getCanvas("inlineImage",i,o).context;MS(d,e),n=this.applyTransferMapsToCanvas(d)}for(const i of t)s.save(),s.transform(...i.transform),s.scale(1,-1),Wg(s,n,i.x,i.y,i.w,i.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(s||(this.pendingClip===FS?n.clip(e,"evenodd"):n.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=wt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),n=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,n)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:n,d:i}=this.ctx.getTransform();let o,c;if(s===0&&n===0){const d=Math.abs(t),f=Math.abs(i);if(d===f)if(e===0)o=c=1/d;else{const p=d*e;o=c=p<1?1/p:1}else if(e===0)o=1/d,c=1/f;else{const p=d*e,m=f*e;o=p<1?1/p:1,c=m<1?1/m:1}}else{const d=Math.abs(t*i-s*n),f=Math.hypot(t,s),p=Math.hypot(n,i);if(e===0)o=p/d,c=f/d;else{const m=e*d;o=p>m?p/m:1,c=f>m?f/m:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:n}}=this,[i,o]=this.getScaleForStroking();if(i===o){s.lineWidth=(n||1)*i,s.stroke(e);return}const c=s.getLineDash();t&&s.save(),s.scale(i,o),Py.a=1/i,Py.d=1/o;const d=new Path2D;if(d.addPath(e,Py),c.length>0){const f=Math.max(i,o);s.setLineDash(c.map(p=>p/f)),s.lineDashOffset/=f}s.lineWidth=n||1,s.stroke(d),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};mr=new WeakSet,vw=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},yw=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},ww=function(e,t,s){const n=new Path2D;return n.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),n};let Kc=Fx;for(const l in Rd)Kc.prototype[l]!==void 0&&(Kc.prototype[Rd[l]]=Kc.prototype[l]);var hf,df;class Fn{static get workerPort(){return u(this,hf)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");S(this,hf,e)}static get workerSrc(){return u(this,df)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");S(this,df,e)}}hf=new WeakMap,df=new WeakMap,k(Fn,hf,null),k(Fn,df,"");var gu,ff;class UL{constructor({parsedData:e,rawData:t}){k(this,gu);k(this,ff);S(this,gu,e),S(this,ff,t)}getRaw(){return u(this,ff)}get(e){return u(this,gu).get(e)??null}[Symbol.iterator](){return u(this,gu).entries()}}gu=new WeakMap,ff=new WeakMap;const zc=Symbol("INTERNAL");var pf,gf,mf,mu;class zL{constructor(e,{name:t,intent:s,usage:n,rbGroups:i}){k(this,pf,!1);k(this,gf,!1);k(this,mf,!1);k(this,mu,!0);S(this,pf,!!(e&vn.DISPLAY)),S(this,gf,!!(e&vn.PRINT)),this.name=t,this.intent=s,this.usage=n,this.rbGroups=i}get visible(){if(u(this,mf))return u(this,mu);if(!u(this,mu))return!1;const{print:e,view:t}=this.usage;return u(this,pf)?(t==null?void 0:t.viewState)!=="OFF":u(this,gf)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==zc&&tt("Internal method `_setVisible` called."),S(this,mf,s),S(this,mu,t)}}pf=new WeakMap,gf=new WeakMap,mf=new WeakMap,mu=new WeakMap;var Ia,Ze,vu,yu,vf,xw;class HL{constructor(e,t=vn.DISPLAY){k(this,vf);k(this,Ia,null);k(this,Ze,new Map);k(this,vu,null);k(this,yu,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,S(this,yu,e.order);for(const s of e.groups)u(this,Ze).set(s.id,new zL(t,s));if(e.baseState==="OFF")for(const s of u(this,Ze).values())s._setVisible(zc,!1);for(const s of e.on)u(this,Ze).get(s)._setVisible(zc,!0);for(const s of e.off)u(this,Ze).get(s)._setVisible(zc,!1);S(this,vu,this.getHash())}}isVisible(e){if(u(this,Ze).size===0)return!0;if(!e)return u0("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,Ze).has(e.id)?u(this,Ze).get(e.id).visible:(Ne(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return C(this,vf,xw).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,Ze).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(u(this,Ze).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,Ze).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(!u(this,Ze).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,Ze).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(!u(this,Ze).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,Ze).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(u(this,Ze).get(t).visible)return!1}return!0}return Ne(`Unknown optional content policy ${e.policy}.`),!0}return Ne(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var i;const n=u(this,Ze).get(e);if(!n){Ne(`Optional content group not found: ${e}`);return}if(s&&t&&n.rbGroups.length)for(const o of n.rbGroups)for(const c of o)c!==e&&((i=u(this,Ze).get(c))==null||i._setVisible(zc,!1,!0));n._setVisible(zc,!!t,!0),S(this,Ia,null)}setOCGState({state:e,preserveRB:t}){let s;for(const n of e){switch(n){case"ON":case"OFF":case"Toggle":s=n;continue}const i=u(this,Ze).get(n);if(i)switch(s){case"ON":this.setVisibility(n,!0,t);break;case"OFF":this.setVisibility(n,!1,t);break;case"Toggle":this.setVisibility(n,!i.visible,t);break}}S(this,Ia,null)}get hasInitialVisibility(){return u(this,vu)===null||this.getHash()===u(this,vu)}getOrder(){return u(this,Ze).size?u(this,yu)?u(this,yu).slice():[...u(this,Ze).keys()]:null}getGroup(e){return u(this,Ze).get(e)||null}getHash(){if(u(this,Ia)!==null)return u(this,Ia);const e=new LE;for(const[t,s]of u(this,Ze))e.update(`${t}:${s.visible}`);return S(this,Ia,e.hexdigest())}[Symbol.iterator](){return u(this,Ze).entries()}}Ia=new WeakMap,Ze=new WeakMap,vu=new WeakMap,yu=new WeakMap,vf=new WeakSet,xw=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let n=1;n<t;n++){const i=e[n];let o;if(Array.isArray(i))o=C(this,vf,xw).call(this,i);else if(u(this,Ze).has(i))o=u(this,Ze).get(i).visible;else return Ne(`Optional content group not found: ${i}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class VL{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Mt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:i,progressiveDone:o,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=c,(i==null?void 0:i.length)>0){const d=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),e.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const n=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(s),!0)});Mt(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,n,i;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(i=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||i.call(n,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Mt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new WL(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new GL(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class WL{constructor(e,t,s=!1,n=null){this._stream=e,this._done=s||!1,this._filename=d0(n)?n:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class GL{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function qL(l){let e=!0,t=s("filename\\*","i").exec(l);if(t){t=t[1];let p=c(t);return p=unescape(p),p=d(p),p=f(p),i(p)}if(t=o(l),t){const p=f(t);return i(p)}if(t=s("filename","i").exec(l),t){t=t[1];let p=c(t);return p=f(p),i(p)}function s(p,m){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function n(p,m){if(p){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const w=new TextDecoder(p,{fatal:!0}),b=vp(m);m=w.decode(b),e=!1}catch{}}return m}function i(p){return e&&/[\x80-\xff]/.test(p)&&(p=n("utf-8",p),e&&(p=n("iso-8859-1",p))),p}function o(p){const m=[];let w;const b=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=b.exec(p))!==null;){let[,_,E,T]=w;if(_=parseInt(_,10),_ in m){if(_===0)break;continue}m[_]=[E,T]}const A=[];for(let _=0;_<m.length&&_ in m;++_){let[E,T]=m[_];T=c(T),E&&(T=unescape(T),_===0&&(T=d(T))),A.push(T)}return A.join("")}function c(p){if(p.startsWith('"')){const m=p.slice(1).split('\\"');for(let w=0;w<m.length;++w){const b=m[w].indexOf('"');b!==-1&&(m[w]=m[w].slice(0,b),m.length=w+1),m[w]=m[w].replaceAll(/\\(.)/g,"$1")}p=m.join('"')}return p}function d(p){const m=p.indexOf("'");if(m===-1)return p;const w=p.slice(0,m),A=p.slice(m+1).replace(/^[^']*'/,"");return n(w,A)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,w,b,A){if(b==="q"||b==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,E){return String.fromCharCode(parseInt(E,16))}),n(w,A);try{A=atob(A)}catch{}return n(w,A)})}return""}function GE(l,e){const t=new Headers;if(!l||!e||typeof e!="object")return t;for(const s in e){const n=e[s];n!==void 0&&t.append(s,n)}return t}function p0(l){var e;return((e=URL.parse(l))==null?void 0:e.origin)??null}function qE({responseHeaders:l,isHttp:e,rangeChunkSize:t,disableRange:s}){const n={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(l.get("Content-Length"),10);return!Number.isInteger(i)||(n.suggestedLength=i,i<=2*t)||s||!e||l.get("Accept-Ranges")!=="bytes"||(l.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function KE(l){const e=l.get("Content-Disposition");if(e){let t=qL(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(d0(t))return t}return null}function bp(l,e){return new jd(`Unexpected server response (${l}) while retrieving PDF "${e}".`,l,l===404||l===0&&e.startsWith("file:"))}function XE(l){return l===200||l===206}function YE(l,e,t){return{method:"GET",headers:l,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function JE(l){return l instanceof Uint8Array?l.buffer:l instanceof ArrayBuffer?l:(Ne(`getArrayBuffer - unexpected data format: ${l}`),new Uint8Array(l).buffer)}class KL{constructor(e){ee(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=GE(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new XL(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new YL(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class XL{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),n=t.url;fetch(n,YE(s,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=p0(i.url),!XE(i.status))throw bp(i.status,n);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:c,suggestedLength:d}=qE({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=KE(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Hi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:JE(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class YL{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const n=e.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${s-1}`);const o=n.url;fetch(o,YE(i,this._withCredentials,this._abortController)).then(c=>{const d=p0(c.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!XE(c.status))throw bp(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:JE(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Ty=200,Ny=206;function JL(l){const e=l.response;return typeof e!="string"?e:vp(e).buffer}class QL{constructor({url:e,httpHeaders:t,withCredentials:s}){ee(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=GE(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,n=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),n.expectedStatus=Ny):n.expectedStatus=Ty,t.responseType="arraybuffer",Mt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var n;const s=this.pendingRequests[e];s&&((n=s.onProgress)==null||n.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const n=s.xhr;if(n.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),n.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],n.status===0&&this.isHttp){s.onError(n.status);return}const i=n.status||Ty;if(!(i===Ty&&s.expectedStatus===Ny)&&i!==s.expectedStatus){s.onError(n.status);return}const c=JL(n);if(i===Ny){const d=n.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?s.onDone({begin:parseInt(f[1],10),chunk:c}):(Ne('Missing or invalid "Content-Range" header.'),s.onError(0))}else c?s.onDone({begin:0,chunk:c}):s.onError(n.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class ZL{constructor(e){this._source=e,this._manager=new QL(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Mt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new eI(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new tI(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class eI{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=p0(t.responseURL);const s=t.getAllResponseHeaders(),n=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[d,...f]=c.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=qE({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=KE(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=bp(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class tI{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=p0((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=bp(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const sI=/^[a-z][a-z0-9\-+.]+:/i;function nI(l){if(sI.test(l))return new URL(l);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(l))}class rI{constructor(e){this.source=e,this.url=nI(e.url),Mt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new iI(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new aI(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class iI{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=bp(0,this._url.href)),this._storedError=n,this._headersCapability.reject(n)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Hi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class aI{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=e.source;this._isStreamingSupported=!n.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Zh=Symbol("INITIAL_DATA");var on,yf,bw;class QE{constructor(){k(this,yf);k(this,on,Object.create(null))}get(e,t=null){if(t){const n=C(this,yf,bw).call(this,e);return n.promise.then(()=>t(n.data)),null}const s=u(this,on)[e];if(!s||s.data===Zh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=u(this,on)[e];return!!t&&t.data!==Zh}delete(e){const t=u(this,on)[e];return!t||t.data===Zh?!1:(delete u(this,on)[e],!0)}resolve(e,t=null){const s=C(this,yf,bw).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in u(this,on)){const{data:s}=u(this,on)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}S(this,on,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,on)){const{data:t}=u(this,on)[e];t!==Zh&&(yield[e,t])}}}on=new WeakMap,yf=new WeakSet,bw=function(e){var t;return(t=u(this,on))[e]||(t[e]={...Promise.withResolvers(),data:Zh})};const oI=1e5,$S=30;var ZS,Ma,Xs,wf,xf,ll,Si,bf,_f,cl,wu,xu,Da,bu,Sf,_u,ul,Af,Ef,_t,Su,hl,kf,Oa,Au,Wi,ZE,ek,_w,xn,om,Sw,tk,sk;let Id=(_t=class{constructor({textContentSource:e,container:t,viewport:s}){k(this,Wi);k(this,Ma,Promise.withResolvers());k(this,Xs,null);k(this,wf,!1);k(this,xf,!!((ZS=globalThis.FontInspector)!=null&&ZS.enabled));k(this,ll,null);k(this,Si,null);k(this,bf,0);k(this,_f,0);k(this,cl,null);k(this,wu,null);k(this,xu,0);k(this,Da,0);k(this,bu,Object.create(null));k(this,Sf,[]);k(this,_u,null);k(this,ul,[]);k(this,Af,new WeakMap);k(this,Ef,null);var d;if(e instanceof ReadableStream)S(this,_u,e);else if(typeof e=="object")S(this,_u,new ReadableStream({start(f){f.enqueue(e),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,Xs,S(this,wu,t)),S(this,Da,s.scale*gr.pixelRatio),S(this,xu,s.rotation),S(this,Si,{div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:i,pageX:o,pageY:c}=s.rawDims;S(this,Ef,[1,0,0,-1,-o,c+i]),S(this,_f,n),S(this,bf,i),C(d=_t,xn,tk).call(d),ro(t,s),u(this,Ma).promise.finally(()=>{u(_t,Au).delete(this),S(this,Si,null),S(this,bu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=ts.platform;return $e(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,cl).read().then(({value:t,done:s})=>{if(s){u(this,Ma).resolve();return}u(this,ll)??S(this,ll,t.lang),Object.assign(u(this,bu),t.styles),C(this,Wi,ZE).call(this,t.items),e()},u(this,Ma).reject)};return S(this,cl,u(this,_u).getReader()),u(_t,Au).add(this),e(),u(this,Ma).promise}update({viewport:e,onBefore:t=null}){var i;const s=e.scale*gr.pixelRatio,n=e.rotation;if(n!==u(this,xu)&&(t==null||t(),S(this,xu,n),ro(u(this,wu),{rotation:n})),s!==u(this,Da)){t==null||t(),S(this,Da,s);const o={div:null,properties:null,ctx:C(i=_t,xn,om).call(i,u(this,ll))};for(const c of u(this,ul))o.properties=u(this,Af).get(c),o.div=c,C(this,Wi,_w).call(this,o)}}cancel(){var t;const e=new Hi("TextLayer task cancelled.");(t=u(this,cl))==null||t.cancel(e).catch(()=>{}),S(this,cl,null),u(this,Ma).reject(e)}get textDivs(){return u(this,ul)}get textContentItemsStr(){return u(this,Sf)}static cleanup(){if(!(u(this,Au).size>0)){u(this,Su).clear();for(const{canvas:e}of u(this,hl).values())e.remove();u(this,hl).clear()}}},Ma=new WeakMap,Xs=new WeakMap,wf=new WeakMap,xf=new WeakMap,ll=new WeakMap,Si=new WeakMap,bf=new WeakMap,_f=new WeakMap,cl=new WeakMap,wu=new WeakMap,xu=new WeakMap,Da=new WeakMap,bu=new WeakMap,Sf=new WeakMap,_u=new WeakMap,ul=new WeakMap,Af=new WeakMap,Ef=new WeakMap,Su=new WeakMap,hl=new WeakMap,kf=new WeakMap,Oa=new WeakMap,Au=new WeakMap,Wi=new WeakSet,ZE=function(e){var n,i;if(u(this,wf))return;(i=u(this,Si)).ctx??(i.ctx=C(n=_t,xn,om).call(n,u(this,ll)));const t=u(this,ul),s=u(this,Sf);for(const o of e){if(t.length>oI){Ne("Ignoring additional textDivs for performance reasons."),S(this,wf,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const c=u(this,Xs);S(this,Xs,document.createElement("span")),u(this,Xs).classList.add("markedContent"),o.id!==null&&u(this,Xs).setAttribute("id",`${o.id}`),c.append(u(this,Xs))}else o.type==="endMarkedContent"&&S(this,Xs,u(this,Xs).parentNode);continue}s.push(o.str),C(this,Wi,ek).call(this,o)}},ek=function(e){var _;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,ul).push(t);const n=ve.transform(u(this,Ef),e.transform);let i=Math.atan2(n[1],n[0]);const o=u(this,bu)[e.fontName];o.vertical&&(i+=Math.PI/2);let c=u(this,xf)&&o.fontSubstitution||o.fontFamily;c=_t.fontFamilyMap.get(c)||c;const d=Math.hypot(n[2],n[3]),f=d*C(_=_t,xn,sk).call(_,c,o,u(this,ll));let p,m;i===0?(p=n[4],m=n[5]-f):(p=n[4]+f*Math.sin(i),m=n[5]-f*Math.cos(i));const w="calc(var(--total-scale-factor) *",b=t.style;u(this,Xs)===u(this,wu)?(b.left=`${(100*p/u(this,_f)).toFixed(2)}%`,b.top=`${(100*m/u(this,bf)).toFixed(2)}%`):(b.left=`${w}${p.toFixed(2)}px)`,b.top=`${w}${m.toFixed(2)}px)`),b.fontSize=`${w}${(u(_t,Oa)*d).toFixed(2)}px)`,b.fontFamily=c,s.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,xf)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(s.angle=i*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const E=Math.abs(e.transform[0]),T=Math.abs(e.transform[3]);E!==T&&Math.max(E,T)/Math.min(E,T)>1.5&&(A=!0)}if(A&&(s.canvasWidth=o.vertical?e.height:e.width),u(this,Af).set(t,s),u(this,Si).div=t,u(this,Si).properties=s,C(this,Wi,_w).call(this,u(this,Si)),s.hasText&&u(this,Xs).append(t),s.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),u(this,Xs).append(E)}},_w=function(e){var c;const{div:t,properties:s,ctx:n}=e,{style:i}=t;let o="";if(u(_t,Oa)>1&&(o=`scale(${1/u(_t,Oa)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:d}=i,{canvasWidth:f,fontSize:p}=s;C(c=_t,xn,Sw).call(c,n,p*u(this,Da),d);const{width:m}=n.measureText(t.textContent);m>0&&(o=`scaleX(${f*u(this,Da)/m}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(i.transform=o)},xn=new WeakSet,om=function(e=null){let t=u(this,hl).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,hl).set(e,t),u(this,kf).set(t,{size:0,family:""})}return t},Sw=function(e,t,s){const n=u(this,kf).get(e);t===n.size&&s===n.family||(e.font=`${t}px ${s}`,n.size=t,n.family=s)},tk=function(){if(u(this,Oa)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),S(this,Oa,e.getBoundingClientRect().height),e.remove()},sk=function(e,t,s){const n=u(this,Su).get(e);if(n)return n;const i=C(this,xn,om).call(this,s);i.canvas.width=i.canvas.height=$S,C(this,xn,Sw).call(this,i,$S,e);const o=i.measureText(""),c=o.fontBoundingBoxAscent,d=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let f=.8;return c?f=c/(c+d):(ts.platform.isFirefox&&Ne("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?f=t.ascent:t.descent&&(f=1+t.descent)),u(this,Su).set(e,f),f},k(_t,xn),k(_t,Su,new Map),k(_t,hl,new Map),k(_t,kf,new WeakMap),k(_t,Oa,null),k(_t,Au,new Set),_t);class Md{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function n(i){var d;if(!i)return;let o=null;const c=i.name;if(c==="#text")o=i.value;else if(Md.shouldBuildText(c))(d=i==null?void 0:i.attributes)!=null&&d.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const f of i.children)n(f)}return n(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const lI=100;function Tx(l={}){typeof l=="string"||l instanceof URL?l={url:l}:(l instanceof ArrayBuffer||ArrayBuffer.isView(l))&&(l={data:l});const e=new Aw,{docId:t}=e,s=l.url?yL(l.url):null,n=l.data?wL(l.data):null,i=l.httpHeaders||null,o=l.withCredentials===!0,c=l.password??null,d=l.range instanceof Nx?l.range:null,f=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:2**16;let p=l.worker instanceof ih?l.worker:null;const m=l.verbosity,w=typeof l.docBaseUrl=="string"&&!wp(l.docBaseUrl)?l.docBaseUrl:null,b=Hg(l.cMapUrl),A=l.cMapPacked!==!1,_=l.CMapReaderFactory||(Ls?kL:CS),E=Hg(l.iccUrl),T=Hg(l.standardFontDataUrl),R=l.StandardFontDataFactory||(Ls?CL:PS),N=Hg(l.wasmUrl),j=l.WasmFactory||(Ls?PL:TS),I=l.stopAtErrors!==!0,F=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,B=l.isEvalSupported!==!1,W=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!Ls,K=typeof l.isImageDecoderSupported=="boolean"?l.isImageDecoderSupported:!Ls&&(ts.platform.isFirefox||!globalThis.chrome),te=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,Q=typeof l.disableFontFace=="boolean"?l.disableFontFace:Ls,_e=l.fontExtraProperties===!0,we=l.enableXfa===!0,pe=l.ownerDocument||globalThis.document,Ee=l.disableRange===!0,Z=l.disableStream===!0,X=l.disableAutoFetch===!0,Y=l.pdfBug===!0,oe=l.CanvasFactory||(Ls?EL:_L),ne=l.FilterFactory||(Ls?AL:SL),$=l.enableHWA===!0,V=l.useWasm!==!1,le=d?d.length:l.length??NaN,Se=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!Ls&&!Q,ke=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:!!(_===CS&&R===PS&&j===TS&&b&&T&&N&&nd(b,document.baseURI)&&nd(T,document.baseURI)&&nd(N,document.baseURI)),Ce=null;eL(m);const ye={canvasFactory:new oe({ownerDocument:pe,enableHWA:$}),filterFactory:new ne({docId:t,ownerDocument:pe}),cMapReaderFactory:ke?null:new _({baseUrl:b,isCompressed:A}),standardFontDataFactory:ke?null:new R({baseUrl:T}),wasmFactory:ke?null:new j({baseUrl:N})};p||(p=ih.create({verbosity:m,port:Fn.workerPort}),e._worker=p);const Le={docId:t,apiVersion:"5.3.31",data:n,password:c,disableAutoFetch:X,rangeChunkSize:f,length:le,docBaseUrl:w,enableXfa:we,evaluatorOptions:{maxImageSize:F,disableFontFace:Q,ignoreErrors:I,isEvalSupported:B,isOffscreenCanvasSupported:W,isImageDecoderSupported:K,canvasMaxAreaInBytes:te,fontExtraProperties:_e,useSystemFonts:Se,useWasm:V,useWorkerFetch:ke,cMapUrl:b,iccUrl:E,standardFontDataUrl:T,wasmUrl:N}},ze={ownerDocument:pe,pdfBug:Y,styleElement:Ce,loadingParams:{disableAutoFetch:X,enableXfa:we}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Me=p.messageHandler.sendWithPromise("GetDocRequest",Le,n?[n.buffer]:null);let Fs;if(d)Fs=new VL(d,{disableRange:Ee,disableStream:Z});else if(!n){if(!s)throw new Error("getDocument - no `url` parameter provided.");const bn=nd(s)?KL:Ls?rI:ZL;Fs=new bn({url:s,length:le,httpHeaders:i,withCredentials:o,rangeChunkSize:f,disableRange:Ee,disableStream:Z})}return Me.then(bn=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const jt=new ld(t,bn,p.port),Xe=new hI(jt,e,Fs,ze,ye);e._transport=Xe,jt.send("Ready",null)})}).catch(e._capability.reject),e}var Xm;const Ym=class Ym{constructor(){ee(this,"_capability",Promise.withResolvers());ee(this,"_transport",null);ee(this,"_worker",null);ee(this,"docId",`d${Cs(Ym,Xm)._++}`);ee(this,"destroyed",!1);ee(this,"onPassword",null);ee(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,(n=this._worker)==null||n.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Xm=new WeakMap,k(Ym,Xm,0);let Aw=Ym;var dl,Cf,Pf,Tf,Nf,eA;let Nx=(eA=class{constructor(e,t,s=!1,n=null){k(this,dl,Promise.withResolvers());k(this,Cf,[]);k(this,Pf,[]);k(this,Tf,[]);k(this,Nf,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=n}addRangeListener(e){u(this,Nf).push(e)}addProgressListener(e){u(this,Tf).push(e)}addProgressiveReadListener(e){u(this,Pf).push(e)}addProgressiveDoneListener(e){u(this,Cf).push(e)}onDataRange(e,t){for(const s of u(this,Nf))s(e,t)}onDataProgress(e,t){u(this,dl).promise.then(()=>{for(const s of u(this,Tf))s(e,t)})}onDataProgressiveRead(e){u(this,dl).promise.then(()=>{for(const t of u(this,Pf))t(e)})}onDataProgressiveDone(){u(this,dl).promise.then(()=>{for(const e of u(this,Cf))e()})}transportReady(){u(this,dl).resolve()}requestDataRange(e,t){tt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},dl=new WeakMap,Cf=new WeakMap,Pf=new WeakMap,Tf=new WeakMap,Nf=new WeakMap,eA);class cI{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return $e(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ai,fl,fd;class uI{constructor(e,t,s,n=!1){k(this,fl);k(this,Ai,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=n?new AS:null,this._pdfBug=n,this.commonObjs=s.commonObjs,this.objs=new QE,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:n=0,dontFlip:i=!1}={}){return new yp({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:n,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return $e(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:n=zr.ENABLE,transform:i=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:m=!1}){var j,I;(j=this._stats)==null||j.time("Overall");const w=this._transport.getRenderingIntent(s,n,p,m),{renderingIntent:b,cacheKey:A}=w;S(this,Ai,!1),c||(c=this._transport.getOptionalContentConfig(b));let _=this._intentStates.get(A);_||(_=Object.create(null),this._intentStates.set(A,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const E=!!(b&vn.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(w));const T=F=>{var B;_.renderTasks.delete(R),E&&S(this,Ai,!0),C(this,fl,fd).call(this),F?(R.capability.reject(F),this._abortOperatorList({intentState:_,reason:F instanceof Error?F:new Error(F)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(B=globalThis.Stats)!=null&&B.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new Ew({callback:T,params:{canvasContext:e,viewport:t,transform:i,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:f});(_.renderTasks||(_.renderTasks=new Set)).add(R);const N=R.task;return Promise.all([_.displayReadyCapability.promise,c]).then(([F,B])=>{var W;if(this.destroyed){T();return}if((W=this._stats)==null||W.time("Rendering"),!(B.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:F,optionalContentConfig:B}),R.operatorListChanged()}).catch(T),N}getOperatorList({intent:e="display",annotationMode:t=zr.ENABLE,printAnnotationStorage:s=null,isEditing:n=!1}={}){var f;function i(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const o=this._transport.getRenderingIntent(e,t,s,n,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=i,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Md.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,n){function i(){o.read().then(function({value:d,done:f}){if(f){s(c);return}c.lang??(c.lang=d.lang),Object.assign(c.styles,d.styles),c.items.push(...d.items),i()},n)}const o=t.getReader(),c={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),S(this,Ai,!1),Promise.all(e)}cleanup(e=!1){S(this,Ai,!0);const t=C(this,fl,fd).call(this);return e&&t&&this._stats&&(this._stats=new AS),t}_startRenderPage(e,t){var n,i;const s=this._intentStates.get(t);s&&((n=this._stats)==null||n.timeEnd("Page Request"),(i=s.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let s=0,n=e.length;s<n;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&C(this,fl,fd).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:n}){const{map:i,transfer:o}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:n},o).getReader(),f=this._intentStates.get(t);f.streamReader=d;const p=()=>{d.read().then(({value:m,done:w})=>{if(w){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,f),p())},m=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const w of f.renderTasks)w.operatorListChanged();C(this,fl,fd).call(this)}if(f.displayReadyCapability)f.displayReadyCapability.reject(m);else if(f.opListReadCapability)f.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof h0){let n=lI;t.extraDelay>0&&t.extraDelay<1e3&&(n+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},n);return}}if(e.streamReader.cancel(new Hi(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[n,i]of this._intentStates)if(i===e){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}Ai=new WeakMap,fl=new WeakSet,fd=function(){if(!u(this,Ai)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,Ai,!1),!0};var Fa,nr,Ei,pl,Jm,gl,ml,Ds,lm,nk,rk,pd,Eu,cm;const ft=class ft{constructor({name:e=null,port:t=null,verbosity:s=tL()}={}){k(this,Ds);k(this,Fa,Promise.withResolvers());k(this,nr,null);k(this,Ei,null);k(this,pl,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(u(ft,ml).has(t))throw new Error("Cannot use more than one PDFWorker per port.");u(ft,ml).set(t,this),C(this,Ds,nk).call(this,t)}else C(this,Ds,rk).call(this)}get promise(){return u(this,Fa).promise}get port(){return u(this,Ei)}get messageHandler(){return u(this,nr)}destroy(){var e,t;this.destroyed=!0,(e=u(this,pl))==null||e.terminate(),S(this,pl,null),u(ft,ml).delete(u(this,Ei)),S(this,Ei,null),(t=u(this,nr))==null||t.destroy(),S(this,nr,null)}static create(e){const t=u(this,ml).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ft(e)}static get workerSrc(){if(Fn.workerSrc)return Fn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return $e(this,"_setupFakeWorkerGlobal",(async()=>u(this,Eu,cm)?u(this,Eu,cm):(await import(this.workerSrc)).WorkerMessageHandler)())}};Fa=new WeakMap,nr=new WeakMap,Ei=new WeakMap,pl=new WeakMap,Jm=new WeakMap,gl=new WeakMap,ml=new WeakMap,Ds=new WeakSet,lm=function(){u(this,Fa).resolve(),u(this,nr).send("configure",{verbosity:this.verbosity})},nk=function(e){S(this,Ei,e),S(this,nr,new ld("main","worker",e)),u(this,nr).on("ready",()=>{}),C(this,Ds,lm).call(this)},rk=function(){if(u(ft,gl)||u(ft,Eu,cm)){C(this,Ds,pd).call(this);return}let{workerSrc:e}=ft;try{ft._isSameOrigin(window.location,e)||(e=ft._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new ld("main","worker",t),n=()=>{i.abort(),s.destroy(),t.terminate(),this.destroyed?u(this,Fa).reject(new Error("Worker was destroyed")):C(this,Ds,pd).call(this)},i=new AbortController;t.addEventListener("error",()=>{u(this,pl)||n()},{signal:i.signal}),s.on("test",c=>{if(i.abort(),this.destroyed||!c){n();return}S(this,nr,s),S(this,Ei,t),S(this,pl,t),C(this,Ds,lm).call(this)}),s.on("ready",c=>{if(i.abort(),this.destroyed){n();return}try{o()}catch{C(this,Ds,pd).call(this)}});const o=()=>{const c=new Uint8Array;s.send("test",c,[c.buffer])};o();return}catch{u0("The worker has been disabled.")}C(this,Ds,pd).call(this)},pd=function(){u(ft,gl)||(Ne("Setting up fake worker."),S(ft,gl,!0)),ft._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,Fa).reject(new Error("Worker was destroyed"));return}const t=new bL;S(this,Ei,t);const s=`fake${Cs(ft,Jm)._++}`,n=new ld(s+"_worker",s,t);e.setup(n,t),S(this,nr,new ld(s,s+"_worker",t)),C(this,Ds,lm).call(this)}).catch(e=>{u(this,Fa).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Eu=new WeakSet,cm=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},k(ft,Eu),k(ft,Jm,0),k(ft,gl,!1),k(ft,ml,new WeakMap),Ls&&(S(ft,gl,!0),Fn.workerSrc||(Fn.workerSrc="./pdf.worker.mjs")),ft._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const n=new URL(t,s);return s.origin===n.origin},ft._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},ft.fromPort=e=>{if(uL("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ft.create(e)};let ih=ft;var ki,Mr,ku,Cu,Ci,vl,gd;class hI{constructor(e,t,s,n,i){k(this,vl);k(this,ki,new Map);k(this,Mr,new Map);k(this,ku,new Map);k(this,Cu,new Map);k(this,Ci,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new QE,this.fontLoader=new mL({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return $e(this,"annotationStorage",new kx)}getRenderingIntent(e,t=zr.ENABLE,s=null,n=!1,i=!1){let o=vn.DISPLAY,c=hw;switch(e){case"any":o=vn.ANY;break;case"display":break;case"print":o=vn.PRINT;break;default:Ne(`getRenderingIntent - invalid intent: ${e}`)}const d=o&vn.PRINT&&s instanceof ME?s:this.annotationStorage;switch(t){case zr.DISABLE:o+=vn.ANNOTATIONS_DISABLE;break;case zr.ENABLE:break;case zr.ENABLE_FORMS:o+=vn.ANNOTATIONS_FORMS;break;case zr.ENABLE_STORAGE:o+=vn.ANNOTATIONS_STORAGE,c=d.serializable;break;default:Ne(`getRenderingIntent - invalid annotationMode: ${t}`)}n&&(o+=vn.IS_EDITING),i&&(o+=vn.OPLIST);const{ids:f,hash:p}=d.modifiedIds,m=[o,c.hash,p];return{renderingIntent:o,cacheKey:m.join("_"),annotationStorageSerializable:c,modifiedIds:f}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=u(this,Ci))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of u(this,Mr).values())e.push(n._destroy());u(this,Mr).clear(),u(this,ku).clear(),u(this,Cu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var n,i;this.commonObjs.clear(),this.fontLoader.clear(),u(this,ki).clear(),this.filterFactory.destroy(),Id.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new Hi("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,n)=>{Mt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},n.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){n.close();return}Mt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{n.error(i)})},n.onCancel=i=>{this._fullReader.cancel(i),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var c;await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:o}=this._fullReader;return(!n||!i)&&(this._lastProgress&&((c=t.onProgress)==null||c.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var f;(f=t.onProgress)==null||f.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:n,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(s,n)=>{Mt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(s.begin,s.end);if(!i){n.close();return}n.onPull=()=>{i.read().then(function({value:o,done:c}){if(c){n.close();return}Mt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{n.error(o)})},n.onCancel=o=>{i.cancel(o),n.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new cI(s,this))}),e.on("DocException",s=>{t._capability.reject(Gs(s))}),e.on("PasswordRequest",s=>{S(this,Ci,Promise.withResolvers());try{if(!t.onPassword)throw Gs(s);const n=i=>{i instanceof Error?u(this,Ci).reject(i):u(this,Ci).resolve({password:i})};t.onPassword(n,s.code)}catch(n){u(this,Ci).reject(n)}return u(this,Ci).promise}),e.on("DataLoaded",s=>{var n;(n=t.onProgress)==null||n.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;u(this,Mr).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,n,i])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(n){case"Font":if("error"in i){const p=i.error;Ne(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new vL(i,c);this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&(d.data=null),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=i;Mt(f,"The imageRef must be defined.");for(const p of u(this,Mr).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,i);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),e.on("obj",([s,n,i,o])=>{var d;if(this.destroyed)return;const c=u(this,Mr).get(n);if(!c.objs.has(s)){if(c._intentStates.size===0){(d=o==null?void 0:o.bitmap)==null||d.close();return}switch(i){case"Image":case"Pattern":c.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",s=>{var n;this.destroyed||(n=t.onProgress)==null||n.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const n=this[s.type];if(!n)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return n.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&Ne("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=u(this,ku).get(t);if(s)return s;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&u(this,Cu).set(i.refStr,e);const o=new uI(t,i,this,this._params.pdfBug);return u(this,Mr).set(t,o),o});return u(this,ku).set(t,n),n}getPageIndex(e){return dw(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return C(this,vl,gd).call(this,"GetFieldObjects")}hasJSActions(){return C(this,vl,gd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return C(this,vl,gd).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return C(this,vl,gd).call(this,"GetOptionalContentConfig").then(t=>new HL(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,ki).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(n=>{var i,o;return{info:n[0],metadata:n[1]?new UL(n[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return u(this,ki).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,Mr).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,ki).clear(),this.filterFactory.destroy(!0),Id.cleanup()}}cachedPageNumber(e){if(!dw(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,Cu).get(t)??null}}ki=new WeakMap,Mr=new WeakMap,ku=new WeakMap,Cu=new WeakMap,Ci=new WeakMap,vl=new WeakSet,gd=function(e,t=null){const s=u(this,ki).get(e);if(s)return s;const n=this.messageHandler.sendWithPromise(e,t);return u(this,ki).set(e,n),n};var $a;class dI{constructor(e){k(this,$a,null);ee(this,"onContinue",null);ee(this,"onError",null);S(this,$a,e)}get promise(){return u(this,$a).capability.promise}cancel(e=0){u(this,$a).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,$a).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,$a);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}$a=new WeakMap;var Ba,yl;const Oo=class Oo{constructor({callback:e,params:t,objs:s,commonObjs:n,annotationCanvasMap:i,operatorList:o,pageIndex:c,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:m=!1,pageColors:w=null}){k(this,Ba,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=n,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=m,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new dI(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,d;if(this.cancelled)return;if(this._canvas){if(u(Oo,yl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Oo,yl).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:n,transform:i,background:o}=this.params;this.gfx=new Kc(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var s,n,i;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),u(this,Ba)&&(window.cancelAnimationFrame(u(this,Ba)),S(this,Ba,null)),u(Oo,yl).delete(this._canvas),e||(e=new h0(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(n=this.task).onError)==null||i.call(n,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,Ba,window.requestAnimationFrame(()=>{S(this,Ba,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Oo,yl).delete(this._canvas),this.callback())))}};Ba=new WeakMap,yl=new WeakMap,k(Oo,yl,new WeakSet);let Ew=Oo;const ik="5.3.31",ak="47ad820d9";function BS(l){return Math.floor(Math.max(0,Math.min(1,l))*255).toString(16).padStart(2,"0")}function ed(l){return Math.max(0,Math.min(255,255*l))}class US{static CMYK_G([e,t,s,n]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+n)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=ed(e),[e,e,e]}static G_HTML([e]){const t=BS(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(ed)}static RGB_HTML(e){return`#${e.map(BS).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,n]){return["RGB",1-Math.min(1,e+n),1-Math.min(1,s+n),1-Math.min(1,t+n)]}static CMYK_rgb([e,t,s,n]){return[ed(1-Math.min(1,e+n)),ed(1-Math.min(1,s+n)),ed(1-Math.min(1,t+n))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const n=1-e,i=1-t,o=1-s,c=Math.min(n,i,o);return["CMYK",n,i,o,c]}}class fI{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),s||(n.setAttribute("width",`${e}px`),n.setAttribute("height",`${t}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${e} ${t}`),n}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){tt("Abstract method `_createSVG` called.")}}class Dd extends fI{_createSVG(e){return document.createElementNS(ii,e)}}class Rx{static setupStorage(e,t,s,n,i){const o=n.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",c=>{n.setValue(t,{value:c.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",c=>{n.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",c=>{n.setValue(t,{value:c.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const c of s.children)c.attributes.value===o.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const d=c.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;n.setValue(t,{value:f})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:n,linkService:i}){const{attributes:o}=t,c=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${n}`);for(const[d,f]of Object.entries(o))if(f!=null)switch(d){case"class":f.length&&e.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!c||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,f)}c&&i.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var m,w;const t=e.annotationStorage,s=e.linkService,n=e.xfaHtml,i=e.intent||"display",o=document.createElement(n.name);n.attributes&&this.setAttributes({html:o,element:n,intent:i,linkService:s});const c=i!=="richText",d=e.div;if(d.append(o),e.viewport){const b=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=b}c&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(n.children.length===0){if(n.value){const b=document.createTextNode(n.value);o.append(b),c&&Md.shouldBuildText(n.name)&&f.push(b)}return{textDivs:f}}const p=[[n,-1,o]];for(;p.length>0;){const[b,A,_]=p.at(-1);if(A+1===b.children.length){p.pop();continue}const E=b.children[++p.at(-1)[1]];if(E===null)continue;const{name:T}=E;if(T==="#text"){const N=document.createTextNode(E.value);f.push(N),_.append(N);continue}const R=(m=E==null?void 0:E.attributes)!=null&&m.xmlns?document.createElementNS(E.attributes.xmlns,T):document.createElement(T);if(_.append(R),E.attributes&&this.setAttributes({html:R,element:E,storage:t,intent:i,linkService:s}),((w=E.children)==null?void 0:w.length)>0)p.push([E,-1,R]);else if(E.value){const N=document.createTextNode(E.value);c&&Md.shouldBuildText(T)&&f.push(N),R.append(N)}}for(const b of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:f}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const _p=1e3,pI=9,ql=new WeakSet;class zS{static create(e){switch(e.data.annotationType){case kt.LINK:return new ok(e);case kt.TEXT:return new gI(e);case kt.WIDGET:switch(e.data.fieldType){case"Tx":return new mI(e);case"Btn":return e.data.radioButton?new uk(e):e.data.checkBox?new yI(e):new wI(e);case"Ch":return new xI(e);case"Sig":return new vI(e)}return new tc(e);case kt.POPUP:return new Cw(e);case kt.FREETEXT:return new gk(e);case kt.LINE:return new _I(e);case kt.SQUARE:return new SI(e);case kt.CIRCLE:return new AI(e);case kt.POLYLINE:return new mk(e);case kt.CARET:return new kI(e);case kt.INK:return new jx(e);case kt.POLYGON:return new EI(e);case kt.HIGHLIGHT:return new vk(e);case kt.UNDERLINE:return new CI(e);case kt.SQUIGGLY:return new PI(e);case kt.STRIKEOUT:return new TI(e);case kt.STAMP:return new yk(e);case kt.FILEATTACHMENT:return new NI(e);default:return new Rt(e)}}}var wl,Pu,Tu,Rf,kw;const $x=class $x{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}={}){k(this,Rf);k(this,wl,null);k(this,Pu,!1);k(this,Tu,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:s}){return!!(e!=null&&e.str||t!=null&&t.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return $x._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;u(this,wl)||S(this,wl,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&C(this,Rf,kw).call(this,t),(s=u(this,Tu))==null||s.popup.updateEdited(e)}resetEdited(){var e;u(this,wl)&&(C(this,Rf,kw).call(this,u(this,wl).rect),(e=u(this,Tu))==null||e.popup.resetEdited(),S(this,wl,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:n}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof tc||(i.tabIndex=_p);const{style:o}=i;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof Cw){const{rotation:_}=t;return!t.hasOwnCanvas&&_!==0&&this.setRotation(_,i),i}const{width:c,height:d}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const _=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(_>0||E>0){const R=`calc(${_}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;o.borderRadius=R}else if(this instanceof uk){const R=`calc(${c}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;o.borderRadius=R}switch(t.borderStyle.style){case Fc.SOLID:o.borderStyle="solid";break;case Fc.DASHED:o.borderStyle="dashed";break;case Fc.BEVELED:Ne("Unimplemented border style: beveled");break;case Fc.INSET:Ne("Unimplemented border style: inset");break;case Fc.UNDERLINE:o.borderBottomStyle="solid";break}const T=t.borderColor||null;T?(S(this,Pu,!0),o.borderColor=ve.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):o.borderWidth=0}const f=ve.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:p,pageHeight:m,pageX:w,pageY:b}=n.rawDims;o.left=`${100*(f[0]-w)/p}%`,o.top=`${100*(f[1]-b)/m}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(o.width=`${100*c/p}%`,o.height=`${100*d/m}%`):this.setRotation(A,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:n}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/s}%`,t.style.height=`${100*o/n}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,n)=>{const i=n.detail[t],o=i[0],c=i.slice(1);n.target.style[s]=US[`${o}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[s]:US[`${o}_rgb`](c)})};return $e(this,"_commonActions",{display:t=>{const{display:s}=t.detail,n=s%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const n of Object.keys(t.detail)){const i=e[n]||s[n];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[n,i]of Object.entries(t)){const o=s[n];if(o){const c={detail:{[n]:i},target:e};o(c),delete t[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,n,i]=this.data.rect.map(_=>Math.fround(_));if(e.length===8){const[_,E,T,R]=e.subarray(2,6);if(n===_&&i===E&&t===T&&s===R)return}const{style:o}=this.container;let c;if(u(this,Pu)){const{borderColor:_,borderWidth:E}=o;o.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=n-t,f=i-s,{svgFactory:p}=this,m=p.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0);const w=p.createElement("defs");m.append(w);const b=p.createElement("clipPath"),A=`clippath_${this.data.id}`;b.setAttribute("id",A),b.setAttribute("clipPathUnits","objectBoundingBox"),w.append(b);for(let _=2,E=e.length;_<E;_+=8){const T=e[_],R=e[_+1],N=e[_+2],j=e[_+3],I=p.createElement("rect"),F=(N-t)/d,B=(i-R)/f,W=(T-N)/d,K=(R-j)/f;I.setAttribute("x",F),I.setAttribute("y",B),I.setAttribute("width",W),I.setAttribute("height",K),b.append(I),c==null||c.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${B}" width="${W}" height="${K}"/>`)}u(this,Pu)&&(c.push("</g></svg>')"),o.backgroundImage=c.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{data:e}=this,t=S(this,Tu,new Cw({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){tt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const n=this._fieldObjects[e];if(n)for(const{page:i,id:o,exportValues:c}of n){if(i===-1||o===t)continue;const d=typeof c=="string"?c:null,f=document.querySelector(`[data-element-id="${o}"]`);if(f&&!ql.has(f)){Ne(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:d,domElement:f})}return s}for(const n of document.getElementsByName(e)){const{exportValue:i}=n,o=n.getAttribute("data-element-id");o!==t&&ql.has(n)&&s.push({id:o,exportValue:i,domElement:n})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};wl=new WeakMap,Pu=new WeakMap,Tu=new WeakMap,Rf=new WeakSet,kw=function(e){const{container:{style:t},data:{rect:s,rotation:n},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:c,pageY:d}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-c)/i}%`,t.top=`${100*(o-e[3]+d)/o}%`,n===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(n)};let Rt=$x;var wn,jo,lk,ck;class ok extends Rt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});k(this,wn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let i=!1;return t.url?(s.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action),i=!0):t.attachment?(C(this,wn,lk).call(this,n,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(C(this,wn,ck).call(this,n,t.setOCGState),i=!0):t.dest?(this._bindLink(n,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&C(this,wn,jo).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),C(this,wn,jo).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(s.actions)){const o=n.get(i);o&&(t[o]=()=>{var c;return(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),C(this,wn,jo).call(this)}_bindResetFormAction(t,s){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),C(this,wn,jo).call(this),!this._fieldObjects){Ne('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{var m;n==null||n();const{fields:i,refs:o,include:c}=s,d=[];if(i.length!==0||o.length!==0){const w=new Set(o);for(const b of i){const A=this._fieldObjects[b]||[];for(const{id:_}of A)w.add(_)}for(const b of Object.values(this._fieldObjects))for(const A of b)w.has(A.id)===c&&d.push(A)}else for(const w of Object.values(this._fieldObjects))d.push(...w);const f=this.annotationStorage,p=[];for(const w of d){const{id:b}=w;switch(p.push(b),w.type){case"text":{const _=w.defaultValue||"";f.setValue(b,{value:_});break}case"checkbox":case"radiobutton":{const _=w.defaultValue===w.exportValues;f.setValue(b,{value:_});break}case"combobox":case"listbox":{const _=w.defaultValue||"";f.setValue(b,{value:_});break}default:continue}const A=document.querySelector(`[data-element-id="${b}"]`);if(A){if(!ql.has(A)){Ne(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;A.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}})),!1}}}wn=new WeakSet,jo=function(){this.container.setAttribute("data-internal-link","")},lk=function(t,s,n=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(s.content,s.filename,n),!1},C(this,wn,jo).call(this)},ck=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),C(this,wn,jo).call(this)};class gI extends Rt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class tc extends Rt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return ts.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,n,i){s.includes("mouse")?e.addEventListener(s,o=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var c;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}i&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:i(o)}}))})}_setEventListeners(e,t,s,n){var i,o,c;for(const[d,f]of s)(f==="Action"||(i=this.data.actions)!=null&&i[f])&&((f==="Focus"||f==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,f,n),f==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):f==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ve.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||pI,i=e.style;let o;const c=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c),p=Math.round(f/(Sy*n))||1,m=f/p;o=Math.min(n,d(m/Sy))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-c);o=Math.min(n,d(f/Sy))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=ve.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class mI extends tc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,n){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),i.setValue(o.id,{[n]:s})}render(){var n,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let c=o.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&c.length>d&&(c=c.slice(0,d));let f=o.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const p={userValue:c,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=f??c,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",f??c),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),ql.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=_p,this._setRequired(s,this.data.required),d&&(s.maxLength=d),s.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),p.formattedValue=null}),s.addEventListener("resetform",w=>{const b=this.data.defaultFieldValue??"";s.value=p.userValue=b,p.formattedValue=null});let m=w=>{const{formattedValue:b}=p;b!=null&&(w.target.value=b),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",b=>{var _;if(p.focused)return;const{target:A}=b;p.userValue&&(A.value=p.userValue),p.lastCommittedValue=A.value,p.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(p.focused=!0)}),s.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const A={value(_){p.userValue=_.detail.value??"",e.setValue(t,{value:p.userValue.toString()}),_.target.value=p.userValue},formattedValue(_){const{formattedValue:E}=_.detail;p.formattedValue=E,E!=null&&_.target!==document.activeElement&&(_.target.value=E),e.setValue(t,{formattedValue:E})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var N;const{charLimit:E}=_.detail,{target:T}=_;if(E===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",E);let R=p.userValue;!R||R.length<=E||(R=R.slice(0,E),T.value=p.userValue=R,e.setValue(t,{value:R}),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(A,b)}),s.addEventListener("keydown",b=>{var E;p.commitKey=1;let A=-1;if(b.key==="Escape"?A=0:b.key==="Enter"&&!this.data.multiLine?A=2:b.key==="Tab"&&(p.commitKey=3),A===-1)return;const{value:_}=b.target;p.lastCommittedValue!==_&&(p.lastCommittedValue=_,p.userValue=_,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:A,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const w=m;m=null,s.addEventListener("blur",b=>{var _,E;if(!p.focused||!b.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(p.focused=!1);const{value:A}=b.target;p.userValue=A,p.lastCommittedValue!==A&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:p.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}})),w(b)}),(i=this.data.actions)!=null&&i.Keystroke&&s.addEventListener("beforeinput",b=>{var I;p.lastCommittedValue=null;const{data:A,target:_}=b,{value:E,selectionStart:T,selectionEnd:R}=_;let N=T,j=R;switch(b.inputType){case"deleteWordBackward":{const F=E.substring(0,T).match(/\w*[^\w]*$/);F&&(N-=F[0].length);break}case"deleteWordForward":{const F=E.substring(T).match(/^[^\w]*\w*/);F&&(j+=F[0].length);break}case"deleteContentBackward":T===R&&(N-=1);break;case"deleteContentForward":T===R&&(j+=1);break}b.preventDefault(),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:A||"",willCommit:!1,selStart:N,selEnd:j}})}),this._setEventListeners(s,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(m&&s.addEventListener("blur",m),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/d;s.classList.add("comb"),s.style.letterSpacing=`calc(${b}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class vI extends tc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class yI extends tc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let n=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",e.setValue(s,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return ql.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,n&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=_p,i.addEventListener("change",o=>{const{name:c,checked:d}=o.target;for(const f of this._getElementsByName(c,s)){const p=d&&f.exportValue===t.exportValue;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}e.setValue(s,{value:d})}),i.addEventListener("resetform",o=>{const c=t.defaultFieldValue||"Off";o.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const c={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class uk extends tc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let n=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof n=="string"&&(n=n!==t.buttonValue,e.setValue(s,{value:n})),n)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(ql.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,n&&i.setAttribute("checked",!0),i.tabIndex=_p,i.addEventListener("change",o=>{const{name:c,checked:d}=o.target;for(const f of this._getElementsByName(c,s))e.setValue(f.id,{value:!1});e.setValue(s,{value:d})}),i.addEventListener("resetform",o=>{const c=t.defaultFieldValue;o.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",c=>{const d={value:f=>{const p=o===f.detail.value;for(const m of this._getElementsByName(f.target.name)){const w=p&&m.id===s;m.domElement&&(m.domElement.checked=w),e.setValue(m.id,{value:w})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class wI extends ok{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class xI extends tc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),n=document.createElement("select");ql.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=_p;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue;for(const w of n.options)w.selected=w.value===m});for(const p of this.data.options){const m=document.createElement("option");m.textContent=p.displayValue,m.value=p.exportValue,s.value.includes(p.exportValue)&&(m.setAttribute("selected",!0),i=!1),n.append(m)}let o=null;if(i){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),n.prepend(p),o=()=>{p.remove(),n.removeEventListener("input",o),o=null},n.addEventListener("input",o)}const c=p=>{const m=p?"value":"textContent",{options:w,multiple:b}=n;return b?Array.prototype.filter.call(w,A=>A.selected).map(A=>A[m]):w.selectedIndex===-1?null:w[w.selectedIndex][m]};let d=c(!1);const f=p=>{const m=p.target.options;return Array.prototype.map.call(m,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",p=>{const m={value(w){o==null||o();const b=w.detail.value,A=new Set(Array.isArray(b)?b:[b]);for(const _ of n.options)_.selected=A.has(_.value);e.setValue(t,{value:c(!0)}),d=c(!1)},multipleSelection(w){n.multiple=!0},remove(w){const b=n.options,A=w.detail.remove;b[A].selected=!1,n.remove(A),b.length>0&&Array.prototype.findIndex.call(b,E=>E.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:c(!0),items:f(w)}),d=c(!1)},clear(w){for(;n.length!==0;)n.remove(0);e.setValue(t,{value:null,items:[]}),d=c(!1)},insert(w){const{index:b,displayValue:A,exportValue:_}=w.detail.insert,E=n.children[b],T=document.createElement("option");T.textContent=A,T.value=_,E?E.before(T):n.append(T),e.setValue(t,{value:c(!0),items:f(w)}),d=c(!1)},items(w){const{items:b}=w.detail;for(;n.length!==0;)n.remove(0);for(const A of b){const{displayValue:_,exportValue:E}=A,T=document.createElement("option");T.textContent=_,T.value=E,n.append(T)}n.options.length>0&&(n.options[0].selected=!0),e.setValue(t,{value:c(!0),items:f(w)}),d=c(!1)},indices(w){const b=new Set(w.detail.indices);for(const A of w.target.options)A.selected=b.has(A.index);e.setValue(t,{value:c(!0)}),d=c(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(m,p)}),n.addEventListener("input",p=>{var b;const m=c(!0),w=c(!1);e.setValue(t,{value:m}),p.preventDefault(),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:w,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):n.addEventListener("input",function(p){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Cw extends Rt{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:Rt._hasPopupData(t)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new bI({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",t.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(s=>`${Ax}${s}`).join(",")),this.container}}var Nu,Qm,Zm,Ru,ju,bt,Pi,Lu,jf,Lf,Iu,Ti,rr,Ni,If,Ri,Mf,xl,bl,st,um,Pw,hk,dk,fk,pk,hm,dm,Tw;class bI{constructor({container:e,color:t,elements:s,titleObj:n,modificationDate:i,contentsObj:o,richText:c,parent:d,rect:f,parentRect:p,open:m}){k(this,st);k(this,Nu,C(this,st,fk).bind(this));k(this,Qm,C(this,st,Tw).bind(this));k(this,Zm,C(this,st,dm).bind(this));k(this,Ru,C(this,st,hm).bind(this));k(this,ju,null);k(this,bt,null);k(this,Pi,null);k(this,Lu,null);k(this,jf,null);k(this,Lf,null);k(this,Iu,null);k(this,Ti,!1);k(this,rr,null);k(this,Ni,null);k(this,If,null);k(this,Ri,null);k(this,Mf,null);k(this,xl,null);k(this,bl,!1);var w;S(this,bt,e),S(this,Mf,n),S(this,Pi,o),S(this,Ri,c),S(this,Lf,d),S(this,ju,t),S(this,If,f),S(this,Iu,p),S(this,jf,s),S(this,Lu,f0.toDateObject(i)),this.trigger=s.flatMap(b=>b.getElementsToTriggerPopup());for(const b of this.trigger)b.addEventListener("click",u(this,Ru)),b.addEventListener("mouseenter",u(this,Zm)),b.addEventListener("mouseleave",u(this,Qm)),b.classList.add("popupTriggerArea");for(const b of s)(w=b.container)==null||w.addEventListener("keydown",u(this,Nu));u(this,bt).hidden=!0,m&&C(this,st,hm).call(this)}render(){if(u(this,rr))return;const e=S(this,rr,document.createElement("div"));if(e.className="popup",u(this,ju)){const i=e.style.outlineColor=ve.makeHexColor(...u(this,ju));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=u(this,Mf),e.append(t),u(this,Lu)){const i=document.createElement("span");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,Lu).valueOf()})),t.append(i)}const n=u(this,st,um);if(n)Rx.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(u(this,Pi));e.append(i)}u(this,bt).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const n=e.split(/(?:\r\n?|\n)/);for(let i=0,o=n.length;i<o;++i){const c=n[i];s.append(document.createTextNode(c)),i<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;u(this,xl)||S(this,xl,{contentsObj:u(this,Pi),richText:u(this,Ri)}),e&&S(this,Ni,null),t&&(S(this,Ri,C(this,st,dk).call(this,t)),S(this,Pi,null)),(s=u(this,rr))==null||s.remove(),S(this,rr,null)}resetEdited(){var e;u(this,xl)&&({contentsObj:Cs(this,Pi)._,richText:Cs(this,Ri)._}=u(this,xl),S(this,xl,null),(e=u(this,rr))==null||e.remove(),S(this,rr,null),S(this,Ni,null))}forceHide(){S(this,bl,this.isVisible),u(this,bl)&&(u(this,bt).hidden=!0)}maybeShow(){u(this,bl)&&(u(this,rr)||C(this,st,dm).call(this),S(this,bl,!1),u(this,bt).hidden=!1)}get isVisible(){return u(this,bt).hidden===!1}}Nu=new WeakMap,Qm=new WeakMap,Zm=new WeakMap,Ru=new WeakMap,ju=new WeakMap,bt=new WeakMap,Pi=new WeakMap,Lu=new WeakMap,jf=new WeakMap,Lf=new WeakMap,Iu=new WeakMap,Ti=new WeakMap,rr=new WeakMap,Ni=new WeakMap,If=new WeakMap,Ri=new WeakMap,Mf=new WeakMap,xl=new WeakMap,bl=new WeakMap,st=new WeakSet,um=function(){const e=u(this,Ri),t=u(this,Pi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,Ri).html||null},Pw=function(){var e,t,s;return((s=(t=(e=u(this,st,um))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},hk=function(){var e,t,s;return((s=(t=(e=u(this,st,um))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},dk=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},n={style:{color:u(this,st,hk),fontSize:u(this,st,Pw)?`calc(${u(this,st,Pw)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:n});return s},fk=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Ti))&&C(this,st,hm).call(this)},pk=function(){if(u(this,Ni)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:n,pageY:i}}}=u(this,Lf);let o=!!u(this,Iu),c=o?u(this,Iu):u(this,If);for(const A of u(this,jf))if(!c||ve.intersect(A.data.rect,c)!==null){c=A.data.rect,o=!0;break}const d=ve.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),p=o?c[2]-c[0]+5:0,m=d[0]+p,w=d[1];S(this,Ni,[100*(m-n)/t,100*(w-i)/s]);const{style:b}=u(this,bt);b.left=`${u(this,Ni)[0]}%`,b.top=`${u(this,Ni)[1]}%`},hm=function(){S(this,Ti,!u(this,Ti)),u(this,Ti)?(C(this,st,dm).call(this),u(this,bt).addEventListener("click",u(this,Ru)),u(this,bt).addEventListener("keydown",u(this,Nu))):(C(this,st,Tw).call(this),u(this,bt).removeEventListener("click",u(this,Ru)),u(this,bt).removeEventListener("keydown",u(this,Nu)))},dm=function(){u(this,rr)||this.render(),this.isVisible?u(this,Ti)&&u(this,bt).classList.add("focused"):(C(this,st,pk).call(this),u(this,bt).hidden=!1,u(this,bt).style.zIndex=parseInt(u(this,bt).style.zIndex)+1e3)},Tw=function(){u(this,bt).classList.remove("focused"),!(u(this,Ti)||!this.isVisible)&&(u(this,bt).hidden=!0,u(this,bt).style.zIndex=parseInt(u(this,bt).style.zIndex)-1e3)};class gk extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Te.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Df;class _I extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Df,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:n}=this,i=this.svgFactory.create(s,n,!0),o=S(this,Df,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Df)}addHighlightArea(){this.container.classList.add("highlightArea")}}Df=new WeakMap;var Of;class SI extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Of,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:n}=this,i=this.svgFactory.create(s,n,!0),o=t.borderStyle.width,c=S(this,Of,this.svgFactory.createElement("svg:rect"));return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",s-o),c.setAttribute("height",n-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),i.append(c),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Of)}addHighlightArea(){this.container.classList.add("highlightArea")}}Of=new WeakMap;var Ff;class AI extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Ff,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:n}=this,i=this.svgFactory.create(s,n,!0),o=t.borderStyle.width,c=S(this,Ff,this.svgFactory.createElement("svg:ellipse"));return c.setAttribute("cx",s/2),c.setAttribute("cy",n/2),c.setAttribute("rx",s/2-o/2),c.setAttribute("ry",n/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),i.append(c),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Ff)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ff=new WeakMap;var $f;class mk extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,$f,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:n,popupRef:i},width:o,height:c}=this;if(!s)return this.container;const d=this.svgFactory.create(o,c,!0);let f=[];for(let m=0,w=s.length;m<w;m+=2){const b=s[m]-t[0],A=t[3]-s[m+1];f.push(`${b},${A}`)}f=f.join(" ");const p=S(this,$f,this.svgFactory.createElement(this.svgElementName));return p.setAttribute("points",f),p.setAttribute("stroke-width",n.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),d.append(p),this.container.append(d),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,$f)}addHighlightArea(){this.container.classList.add("highlightArea")}}$f=new WeakMap;class EI extends mk{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class kI extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Bf,_l,Uf,Nw;class jx extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Uf);k(this,Bf,null);k(this,_l,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Te.HIGHLIGHT:Te.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:n,borderStyle:i,popupRef:o}}=this,{transform:c,width:d,height:f}=C(this,Uf,Nw).call(this,s,t),p=this.svgFactory.create(d,f,!0),m=S(this,Bf,this.svgFactory.createElement("svg:g"));p.append(m),m.setAttribute("stroke-width",i.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",c);for(let w=0,b=n.length;w<b;w++){const A=this.svgFactory.createElement(this.svgElementName);u(this,_l).push(A),A.setAttribute("points",n[w].join(",")),m.append(A)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:n,rect:i}=t,o=u(this,Bf);if(s>=0&&o.setAttribute("stroke-width",s||1),n)for(let c=0,d=u(this,_l).length;c<d;c++)u(this,_l)[c].setAttribute("points",n[c].join(","));if(i){const{transform:c,width:d,height:f}=C(this,Uf,Nw).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${d} ${f}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return u(this,_l)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bf=new WeakMap,_l=new WeakMap,Uf=new WeakSet,Nw=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class vk extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Te.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class CI extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class PI extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class TI extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class yk extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Te.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var zf,Hf,Rw;class NI extends Rt{constructor(t){var n;super(t,{isRenderable:!0});k(this,Hf);k(this,zf,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let n;s.hasAppearance||s.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),n.addEventListener("dblclick",C(this,Hf,Rw).bind(this)),S(this,zf,n);const{isMac:i}=ts.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&C(this,Hf,Rw).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return u(this,zf)}addHighlightArea(){this.container.classList.add("highlightArea")}}zf=new WeakMap,Hf=new WeakSet,Rw=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Vf,Sl,Ua,Wf,lo,jw,Lw,Mu;let Lx=(Mu=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:n,page:i,viewport:o,structTreeLayer:c}){k(this,lo);k(this,Vf,null);k(this,Sl,null);k(this,Ua,new Map);k(this,Wf,null);this.div=e,S(this,Vf,t),S(this,Sl,s),S(this,Wf,c||null),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return u(this,Ua).size>0}async render(e){var o;const{annotations:t}=e,s=this.div;ro(s,this.viewport);const n=new Map,i={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Dd,annotationStorage:e.annotationStorage||new kx,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const d=c.annotationType===kt.POPUP;if(d){const m=n.get(c.id);if(!m)continue;i.elements=m}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;i.data=c;const f=zS.create(i);if(!f.isRenderable)continue;if(!d&&c.popupRef){const m=n.get(c.popupRef);m?m.push(f):n.set(c.popupRef,[f])}const p=f.render();c.hidden&&(p.style.visibility="hidden"),await C(this,lo,jw).call(this,p,c.id),f._isEditable&&(u(this,Ua).set(f.data.id,f),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(f))}C(this,lo,Lw).call(this)}async addLinkAnnotations(e,t){const s={data:null,layer:this.div,linkService:t,svgFactory:new Dd,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=Mu._defaultBorderStyle),s.data=n;const i=zS.create(s);if(!i.isRenderable)continue;const o=i.render();await C(this,lo,jw).call(this,o,n.id)}}update({viewport:e}){const t=this.div;this.viewport=e,ro(t,{rotation:e.rotation}),C(this,lo,Lw).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,Ua).values())}getEditableAnnotation(e){return u(this,Ua).get(e)}static get _defaultBorderStyle(){return $e(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Fc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Vf=new WeakMap,Sl=new WeakMap,Ua=new WeakMap,Wf=new WeakMap,lo=new WeakSet,jw=async function(e,t){var o,c;const s=e.firstChild||e,n=s.id=`${Ax}${t}`,i=await((o=u(this,Wf))==null?void 0:o.getAriaAttributes(n));if(i)for(const[d,f]of i)s.setAttribute(d,f);this.div.append(e),(c=u(this,Vf))==null||c.moveElementInDOM(this.div,e,s,!1)},Lw=function(){var t;if(!u(this,Sl))return;const e=this.div;for(const[s,n]of u(this,Sl)){const i=e.querySelector(`[data-annotation-id="${s}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):i.append(n);const c=u(this,Ua).get(s);c&&(c._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,i.id,n),c._hasNoCanvas=!1):c.canvas=n)}u(this,Sl).clear()},Mu);const qg=/\r\n?|\n/g;var ir,ln,Gf,Al,cn,Dt,wk,xk,bk,fm,Ui,pm,gm,_k,Mw,Sk;const at=class at extends ot{constructor(t){super({...t,name:"freeTextEditor"});k(this,Dt);k(this,ir);k(this,ln,"");k(this,Gf,`${this.id}-editor`);k(this,Al,null);k(this,cn);S(this,ir,t.color||at._defaultColor||ot._defaultLineColor),S(this,cn,t.fontSize||at._defaultFontSize)}static get _keyboardManager(){const t=at.prototype,s=o=>o.isEmpty(),n=io.TRANSLATE_SMALL,i=io.TRANSLATE_BIG;return $e(this,"_keyboardManager",new xp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}]]))}static initialize(t,s){ot.initialize(t,s);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case Ue.FREETEXT_SIZE:at._defaultFontSize=s;break;case Ue.FREETEXT_COLOR:at._defaultColor=s;break}}updateParams(t,s){switch(t){case Ue.FREETEXT_SIZE:C(this,Dt,wk).call(this,s);break;case Ue.FREETEXT_COLOR:C(this,Dt,xk).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Ue.FREETEXT_SIZE,at._defaultFontSize],[Ue.FREETEXT_COLOR,at._defaultColor||ot._defaultLineColor]]}get propertiesToUpdate(){return[[Ue.FREETEXT_SIZE,u(this,cn)],[Ue.FREETEXT_COLOR,u(this,ir)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-at._internalPadding*t,-(at._internalPadding+u(this,cn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,Al,new AbortController);const t=this._uiManager.combinedSignal(u(this,Al));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Gf)),this._isDraggable=!0,(t=u(this,Al))==null||t.abort(),S(this,Al,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,ln),s=S(this,ln,C(this,Dt,bk).call(this).trimEnd());if(t===s)return;const n=i=>{if(S(this,ln,i),!i){this.remove();return}C(this,Dt,gm).call(this),this._uiManager.rebuild(this),C(this,Dt,fm).call(this)};this.addCommands({cmd:()=>{n(s)},undo:()=>{n(t)},mustExec:!1}),C(this,Dt,fm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){at._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Gf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${u(this,cn)}px * var(--total-scale-factor))`,n.color=u(this,ir),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[p,m]=this.pageDimensions,[w,b]=this.pageTranslation;let A,_;switch(this.rotation){case 0:A=t+(c[0]-w)/p,_=s+this.height-(c[1]-b)/m;break;case 90:A=t+(c[0]-w)/p,_=s-(c[1]-b)/m,[d,f]=[f,-d];break;case 180:A=t-this.width+(c[0]-w)/p,_=s-(c[1]-b)/m,[d,f]=[-d,-f];break;case 270:A=t+(c[0]-w-this.height*m)/p,_=s+(c[1]-b-this.width*p)/m,[d,f]=[-f,d];break}this.setAt(A*i,_*o,d,f)}else this._moveAfterPaste(t,s);C(this,Dt,gm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var A,_,E;const s=t.clipboardData||window.clipboardData,{types:n}=s;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const i=C(A=at,Ui,Mw).call(A,s.getData("text")||"").replaceAll(qg,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!i.includes(`
`)){c.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:d,startOffset:f}=c,p=[],m=[];if(d.nodeType===Node.TEXT_NODE){const T=d.parentElement;if(m.push(d.nodeValue.slice(f).replaceAll(qg,"")),T!==this.editorDiv){let R=p;for(const N of this.editorDiv.childNodes){if(N===T){R=m;continue}R.push(C(_=at,Ui,pm).call(_,N))}}p.push(d.nodeValue.slice(0,f).replaceAll(qg,""))}else if(d===this.editorDiv){let T=p,R=0;for(const N of this.editorDiv.childNodes)R++===f&&(T=m),T.push(C(E=at,Ui,pm).call(E,N))}S(this,ln,`${p.join(`
`)}${i}${m.join(`
`)}`),C(this,Dt,gm).call(this);const w=new Range;let b=Math.sumPrecise(p.map(T=>T.length));for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const R=T.nodeValue.length;if(b<=R){w.setStart(T,b),w.setEnd(T,b);break}b-=R}o.removeAllRanges(),o.addRange(w)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,n){var c;let i=null;if(t instanceof gk){const{data:{defaultAppearanceData:{fontSize:d,fontColor:f},rect:p,rotation:m,id:w,popupRef:b},textContent:A,textPosition:_,parent:{page:{pageNumber:E}}}=t;if(!A||A.length===0)return null;i=t={annotationType:Te.FREETEXT,color:Array.from(f),fontSize:d,value:A.join(`
`),position:_,pageIndex:E-1,rect:p.slice(0),rotation:m,id:w,deleted:!1,popupRef:b}}const o=await super.deserialize(t,s,n);return S(o,cn,t.fontSize),S(o,ir,ve.makeHexColor(...t.color)),S(o,ln,C(c=at,Ui,Mw).call(c,t.value)),o.annotationElementId=t.id||null,o._initialData=i,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=at._internalPadding*this.parentScale,n=this.getRect(s,s),i=ot._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,ir)),o={annotationType:Te.FREETEXT,color:i,fontSize:u(this,cn),value:C(this,Dt,_k).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.isCopy=!0,o):this.annotationElementId&&!C(this,Dt,Sk).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:n}=s;n.fontSize=`calc(${u(this,cn)}px * var(--total-scale-factor))`,n.color=u(this,ir),s.replaceChildren();for(const o of u(this,ln).split(`
`)){const c=document.createElement("div");c.append(o?document.createTextNode(o):document.createElement("br")),s.append(c)}const i=at._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:u(this,ln)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ir=new WeakMap,ln=new WeakMap,Gf=new WeakMap,Al=new WeakMap,cn=new WeakMap,Dt=new WeakSet,wk=function(t){const s=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-u(this,cn))*this.parentScale),S(this,cn,i),C(this,Dt,fm).call(this)},n=u(this,cn);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},xk=function(t){const s=i=>{S(this,ir,this.editorDiv.style.color=i)},n=u(this,ir);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},bk=function(){var n;const t=[];this.editorDiv.normalize();let s=null;for(const i of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(C(n=at,Ui,pm).call(n,i)),s=i);return t.join(`
`)},fm=function(){const[t,s]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,c=o.style.display,d=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/s):(this.width=n.height/t,this.height=n.width/s),this.fixAndSetPosition()},Ui=new WeakSet,pm=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(qg,"")},gm=function(){if(this.editorDiv.replaceChildren(),!!u(this,ln))for(const t of u(this,ln).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},_k=function(){return u(this,ln).replaceAll(""," ")},Mw=function(t){return t.replaceAll(" ","")},Sk=function(t){const{value:s,fontSize:n,color:i,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==n||t.color.some((c,d)=>c!==i[d])||t.pageIndex!==o},k(at,Ui),ee(at,"_freeTextDefaultContent",""),ee(at,"_internalPadding",0),ee(at,"_defaultColor",null),ee(at,"_defaultFontSize",10),ee(at,"_type","freetext"),ee(at,"_editorType",Te.FREETEXT);let Iw=at;class ce{toSVGPath(){tt("Abstract method `toSVGPath` must be implemented.")}get box(){tt("Abstract getter `box` must be implemented.")}serialize(e,t){tt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,n,i,o){o||(o=new Float32Array(e.length));for(let c=0,d=e.length;c<d;c+=2)o[c]=t+e[c]*n,o[c+1]=s+e[c+1]*i;return o}static _rescaleAndSwap(e,t,s,n,i,o){o||(o=new Float32Array(e.length));for(let c=0,d=e.length;c<d;c+=2)o[c]=t+e[c+1]*n,o[c+1]=s+e[c]*i;return o}static _translate(e,t,s,n){n||(n=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)n[i]=t+e[i],n[i+1]=s+e[i+1];return n}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,n,i){switch(i){case 90:return[1-t/s,e/n];case 180:return[1-e/s,1-t/n];case 270:return[t/s,1-e/n];default:return[e/s,t/n]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,n,i,o){return[(e+5*s)/6,(t+5*n)/6,(5*s+i)/6,(5*n+o)/6,(s+i)/2,(n+o)/2]}}ee(ce,"PRECISION",1e-4);var un,ar,Du,Ou,Dr,Oe,El,kl,qf,Kf,Fu,$u,za,Xf,e0,t0,Ht,md,Ak,Ek,kk,Ck,Pk,Tk;const ui=class ui{constructor({x:e,y:t},s,n,i,o,c=0){k(this,Ht);k(this,un);k(this,ar,[]);k(this,Du);k(this,Ou);k(this,Dr,[]);k(this,Oe,new Float32Array(18));k(this,El);k(this,kl);k(this,qf);k(this,Kf);k(this,Fu);k(this,$u);k(this,za,[]);S(this,un,s),S(this,$u,i*n),S(this,Ou,o),u(this,Oe).set([NaN,NaN,NaN,NaN,e,t],6),S(this,Du,c),S(this,Kf,u(ui,Xf)*n),S(this,qf,u(ui,t0)*n),S(this,Fu,n),u(this,za).push(e,t)}isEmpty(){return isNaN(u(this,Oe)[8])}add({x:e,y:t}){var K;S(this,El,e),S(this,kl,t);const[s,n,i,o]=u(this,un);let[c,d,f,p]=u(this,Oe).subarray(8,12);const m=e-f,w=t-p,b=Math.hypot(m,w);if(b<u(this,qf))return!1;const A=b-u(this,Kf),_=A/b,E=_*m,T=_*w;let R=c,N=d;c=f,d=p,f+=E,p+=T,(K=u(this,za))==null||K.push(e,t);const j=-T/A,I=E/A,F=j*u(this,$u),B=I*u(this,$u);return u(this,Oe).set(u(this,Oe).subarray(2,8),0),u(this,Oe).set([f+F,p+B],4),u(this,Oe).set(u(this,Oe).subarray(14,18),12),u(this,Oe).set([f-F,p-B],16),isNaN(u(this,Oe)[6])?(u(this,Dr).length===0&&(u(this,Oe).set([c+F,d+B],2),u(this,Dr).push(NaN,NaN,NaN,NaN,(c+F-s)/i,(d+B-n)/o),u(this,Oe).set([c-F,d-B],14),u(this,ar).push(NaN,NaN,NaN,NaN,(c-F-s)/i,(d-B-n)/o)),u(this,Oe).set([R,N,c,d,f,p],6),!this.isEmpty()):(u(this,Oe).set([R,N,c,d,f,p],6),Math.abs(Math.atan2(N-d,R-c)-Math.atan2(T,E))<Math.PI/2?([c,d,f,p]=u(this,Oe).subarray(2,6),u(this,Dr).push(NaN,NaN,NaN,NaN,((c+f)/2-s)/i,((d+p)/2-n)/o),[c,d,R,N]=u(this,Oe).subarray(14,18),u(this,ar).push(NaN,NaN,NaN,NaN,((R+c)/2-s)/i,((N+d)/2-n)/o),!0):([R,N,c,d,f,p]=u(this,Oe).subarray(0,6),u(this,Dr).push(((R+5*c)/6-s)/i,((N+5*d)/6-n)/o,((5*c+f)/6-s)/i,((5*d+p)/6-n)/o,((c+f)/2-s)/i,((d+p)/2-n)/o),[f,p,c,d,R,N]=u(this,Oe).subarray(12,18),u(this,ar).push(((R+5*c)/6-s)/i,((N+5*d)/6-n)/o,((5*c+f)/6-s)/i,((5*d+p)/6-n)/o,((c+f)/2-s)/i,((d+p)/2-n)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Dr),t=u(this,ar);if(isNaN(u(this,Oe)[6])&&!this.isEmpty())return C(this,Ht,Ak).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let n=6;n<e.length;n+=6)isNaN(e[n])?s.push(`L${e[n+4]} ${e[n+5]}`):s.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);C(this,Ht,kk).call(this,s);for(let n=t.length-6;n>=6;n-=6)isNaN(t[n])?s.push(`L${t[n+4]} ${t[n+5]}`):s.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);return C(this,Ht,Ek).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,n,i,o){return new Nk(e,t,s,n,i,o)}getOutlines(){var m;const e=u(this,Dr),t=u(this,ar),s=u(this,Oe),[n,i,o,c]=u(this,un),d=new Float32Array((((m=u(this,za))==null?void 0:m.length)??0)+2);for(let w=0,b=d.length-2;w<b;w+=2)d[w]=(u(this,za)[w]-n)/o,d[w+1]=(u(this,za)[w+1]-i)/c;if(d[d.length-2]=(u(this,El)-n)/o,d[d.length-1]=(u(this,kl)-i)/c,isNaN(s[6])&&!this.isEmpty())return C(this,Ht,Ck).call(this,d);const f=new Float32Array(u(this,Dr).length+24+u(this,ar).length);let p=e.length;for(let w=0;w<p;w+=2){if(isNaN(e[w])){f[w]=f[w+1]=NaN;continue}f[w]=e[w],f[w+1]=e[w+1]}p=C(this,Ht,Tk).call(this,f,p);for(let w=t.length-6;w>=6;w-=6)for(let b=0;b<6;b+=2){if(isNaN(t[w+b])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=t[w+b],f[p+1]=t[w+b+1],p+=2}return C(this,Ht,Pk).call(this,f,p),this.newFreeDrawOutline(f,d,u(this,un),u(this,Fu),u(this,Du),u(this,Ou))}};un=new WeakMap,ar=new WeakMap,Du=new WeakMap,Ou=new WeakMap,Dr=new WeakMap,Oe=new WeakMap,El=new WeakMap,kl=new WeakMap,qf=new WeakMap,Kf=new WeakMap,Fu=new WeakMap,$u=new WeakMap,za=new WeakMap,Xf=new WeakMap,e0=new WeakMap,t0=new WeakMap,Ht=new WeakSet,md=function(){const e=u(this,Oe).subarray(4,6),t=u(this,Oe).subarray(16,18),[s,n,i,o]=u(this,un);return[(u(this,El)+(e[0]-t[0])/2-s)/i,(u(this,kl)+(e[1]-t[1])/2-n)/o,(u(this,El)+(t[0]-e[0])/2-s)/i,(u(this,kl)+(t[1]-e[1])/2-n)/o]},Ak=function(){const[e,t,s,n]=u(this,un),[i,o,c,d]=C(this,Ht,md).call(this);return`M${(u(this,Oe)[2]-e)/s} ${(u(this,Oe)[3]-t)/n} L${(u(this,Oe)[4]-e)/s} ${(u(this,Oe)[5]-t)/n} L${i} ${o} L${c} ${d} L${(u(this,Oe)[16]-e)/s} ${(u(this,Oe)[17]-t)/n} L${(u(this,Oe)[14]-e)/s} ${(u(this,Oe)[15]-t)/n} Z`},Ek=function(e){const t=u(this,ar);e.push(`L${t[4]} ${t[5]} Z`)},kk=function(e){const[t,s,n,i]=u(this,un),o=u(this,Oe).subarray(4,6),c=u(this,Oe).subarray(16,18),[d,f,p,m]=C(this,Ht,md).call(this);e.push(`L${(o[0]-t)/n} ${(o[1]-s)/i} L${d} ${f} L${p} ${m} L${(c[0]-t)/n} ${(c[1]-s)/i}`)},Ck=function(e){const t=u(this,Oe),[s,n,i,o]=u(this,un),[c,d,f,p]=C(this,Ht,md).call(this),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-s)/i,(t[3]-n)/o,NaN,NaN,NaN,NaN,(t[4]-s)/i,(t[5]-n)/o,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(t[16]-s)/i,(t[17]-n)/o,NaN,NaN,NaN,NaN,(t[14]-s)/i,(t[15]-n)/o],0),this.newFreeDrawOutline(m,e,u(this,un),u(this,Fu),u(this,Du),u(this,Ou))},Pk=function(e,t){const s=u(this,ar);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},Tk=function(e,t){const s=u(this,Oe).subarray(4,6),n=u(this,Oe).subarray(16,18),[i,o,c,d]=u(this,un),[f,p,m,w]=C(this,Ht,md).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-i)/c,(s[1]-o)/d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,m,w,NaN,NaN,NaN,NaN,(n[0]-i)/c,(n[1]-o)/d],t),t+=24},k(ui,Xf,8),k(ui,e0,2),k(ui,t0,u(ui,Xf)+u(ui,e0));let Mm=ui;var Bu,Cl,ji,Yf,hn,Jf,Pt,s0,Rk;class Nk extends ce{constructor(t,s,n,i,o,c){super();k(this,s0);k(this,Bu);k(this,Cl,new Float32Array(4));k(this,ji);k(this,Yf);k(this,hn);k(this,Jf);k(this,Pt);S(this,Pt,t),S(this,hn,s),S(this,Bu,n),S(this,Jf,i),S(this,ji,o),S(this,Yf,c),this.lastPoint=[NaN,NaN],C(this,s0,Rk).call(this,c);const[d,f,p,m]=u(this,Cl);for(let w=0,b=t.length;w<b;w+=2)t[w]=(t[w]-d)/p,t[w+1]=(t[w+1]-f)/m;for(let w=0,b=s.length;w<b;w+=2)s[w]=(s[w]-d)/p,s[w+1]=(s[w+1]-f)/m}toSVGPath(){const t=[`M${u(this,Pt)[4]} ${u(this,Pt)[5]}`];for(let s=6,n=u(this,Pt).length;s<n;s+=6){if(isNaN(u(this,Pt)[s])){t.push(`L${u(this,Pt)[s+4]} ${u(this,Pt)[s+5]}`);continue}t.push(`C${u(this,Pt)[s]} ${u(this,Pt)[s+1]} ${u(this,Pt)[s+2]} ${u(this,Pt)[s+3]} ${u(this,Pt)[s+4]} ${u(this,Pt)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,n,i],o){const c=n-t,d=i-s;let f,p;switch(o){case 0:f=ce._rescale(u(this,Pt),t,i,c,-d),p=ce._rescale(u(this,hn),t,i,c,-d);break;case 90:f=ce._rescaleAndSwap(u(this,Pt),t,s,c,d),p=ce._rescaleAndSwap(u(this,hn),t,s,c,d);break;case 180:f=ce._rescale(u(this,Pt),n,s,-c,d),p=ce._rescale(u(this,hn),n,s,-c,d);break;case 270:f=ce._rescaleAndSwap(u(this,Pt),n,i,-c,-d),p=ce._rescaleAndSwap(u(this,hn),n,i,-c,-d);break}return{outline:Array.from(f),points:[Array.from(p)]}}get box(){return u(this,Cl)}newOutliner(t,s,n,i,o,c=0){return new Mm(t,s,n,i,o,c)}getNewOutline(t,s){const[n,i,o,c]=u(this,Cl),[d,f,p,m]=u(this,Bu),w=o*p,b=c*m,A=n*p+d,_=i*m+f,E=this.newOutliner({x:u(this,hn)[0]*w+A,y:u(this,hn)[1]*b+_},u(this,Bu),u(this,Jf),t,u(this,Yf),s??u(this,ji));for(let T=2;T<u(this,hn).length;T+=2)E.add({x:u(this,hn)[T]*w+A,y:u(this,hn)[T+1]*b+_});return E.getOutlines()}}Bu=new WeakMap,Cl=new WeakMap,ji=new WeakMap,Yf=new WeakMap,hn=new WeakMap,Jf=new WeakMap,Pt=new WeakMap,s0=new WeakSet,Rk=function(t){const s=u(this,Pt);let n=s[4],i=s[5];const o=[n,i,n,i];let c=n,d=i;const f=t?Math.max:Math.min;for(let m=6,w=s.length;m<w;m+=6){const b=s[m+4],A=s[m+5];if(isNaN(s[m]))ve.pointBoundingBox(b,A,o),d<A?(c=b,d=A):d===A&&(c=f(c,b));else{const _=[1/0,1/0,-1/0,-1/0];ve.bezierBoundingBox(n,i,...s.slice(m,m+6),_),ve.rectBoundingBox(..._,o),d<_[3]?(c=_[2],d=_[3]):d===_[3]&&(c=f(c,_[2]))}n=b,i=A}const p=u(this,Cl);p[0]=o[0]-u(this,ji),p[1]=o[1]-u(this,ji),p[2]=o[2]-o[0]+2*u(this,ji),p[3]=o[3]-o[1]+2*u(this,ji),this.lastPoint=[c,d]};var Qf,Zf,Ha,or,Os,jk,mm,Lk,Ik,Ow;class Dw{constructor(e,t=0,s=0,n=!0){k(this,Os);k(this,Qf);k(this,Zf);k(this,Ha,[]);k(this,or,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:b,y:A,width:_,height:E}of e){const T=Math.floor((b-t)/o)*o,R=Math.ceil((b+_+t)/o)*o,N=Math.floor((A-t)/o)*o,j=Math.ceil((A+E+t)/o)*o,I=[T,N,j,!0],F=[R,N,j,!1];u(this,Ha).push(I,F),ve.rectBoundingBox(T,N,R,j,i)}const c=i[2]-i[0]+2*s,d=i[3]-i[1]+2*s,f=i[0]-s,p=i[1]-s,m=u(this,Ha).at(n?-1:-2),w=[m[0],m[2]];for(const b of u(this,Ha)){const[A,_,E]=b;b[0]=(A-f)/c,b[1]=(_-p)/d,b[2]=(E-p)/d}S(this,Qf,new Float32Array([f,p,c,d])),S(this,Zf,w)}getOutlines(){u(this,Ha).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of u(this,Ha))t[3]?(e.push(...C(this,Os,Ow).call(this,t)),C(this,Os,Lk).call(this,t)):(C(this,Os,Ik).call(this,t),e.push(...C(this,Os,Ow).call(this,t)));return C(this,Os,jk).call(this,e)}}Qf=new WeakMap,Zf=new WeakMap,Ha=new WeakMap,or=new WeakMap,Os=new WeakSet,jk=function(e){const t=[],s=new Set;for(const o of e){const[c,d,f]=o;t.push([c,d,o],[c,f,o])}t.sort((o,c)=>o[1]-c[1]||o[0]-c[0]);for(let o=0,c=t.length;o<c;o+=2){const d=t[o][2],f=t[o+1][2];d.push(f),f.push(d),s.add(d),s.add(f)}const n=[];let i;for(;s.size>0;){const o=s.values().next().value;let[c,d,f,p,m]=o;s.delete(o);let w=c,b=d;for(i=[c,f],n.push(i);;){let A;if(s.has(p))A=p;else if(s.has(m))A=m;else break;s.delete(A),[c,d,f,p,m]=A,w!==c&&(i.push(w,b,c,b===d?d:f),w=c),b=b===d?f:d}i.push(w,b)}return new RI(n,u(this,Qf),u(this,Zf))},mm=function(e){const t=u(this,or);let s=0,n=t.length-1;for(;s<=n;){const i=s+n>>1,o=t[i][0];if(o===e)return i;o<e?s=i+1:n=i-1}return n+1},Lk=function([,e,t]){const s=C(this,Os,mm).call(this,e);u(this,or).splice(s,0,[e,t])},Ik=function([,e,t]){const s=C(this,Os,mm).call(this,e);for(let n=s;n<u(this,or).length;n++){const[i,o]=u(this,or)[n];if(i!==e)break;if(i===e&&o===t){u(this,or).splice(n,1);return}}for(let n=s-1;n>=0;n--){const[i,o]=u(this,or)[n];if(i!==e)break;if(i===e&&o===t){u(this,or).splice(n,1);return}}},Ow=function(e){const[t,s,n]=e,i=[[t,s,n]],o=C(this,Os,mm).call(this,n);for(let c=0;c<o;c++){const[d,f]=u(this,or)[c];for(let p=0,m=i.length;p<m;p++){const[,w,b]=i[p];if(!(f<=w||b<=d)){if(w>=d){if(b>f)i[p][1]=f;else{if(m===1)return[];i.splice(p,1),p--,m--}continue}i[p][2]=d,b>f&&i.push([t,f,b])}}}return i};var ep,Uu;class RI extends ce{constructor(t,s,n){super();k(this,ep);k(this,Uu);S(this,Uu,t),S(this,ep,s),this.lastPoint=n}toSVGPath(){const t=[];for(const s of u(this,Uu)){let[n,i]=s;t.push(`M${n} ${i}`);for(let o=2;o<s.length;o+=2){const c=s[o],d=s[o+1];c===n?(t.push(`V${d}`),i=d):d===i&&(t.push(`H${c}`),n=c)}t.push("Z")}return t.join(" ")}serialize([t,s,n,i],o){const c=[],d=n-t,f=i-s;for(const p of u(this,Uu)){const m=new Array(p.length);for(let w=0;w<p.length;w+=2)m[w]=t+p[w]*d,m[w+1]=i-p[w+1]*f;c.push(m)}return c}get box(){return u(this,ep)}get classNamesForOutlining(){return["highlightOutline"]}}ep=new WeakMap,Uu=new WeakMap;class Fw extends Mm{newFreeDrawOutline(e,t,s,n,i,o){return new jI(e,t,s,n,i,o)}}class jI extends Nk{newOutliner(e,t,s,n,i,o=0){return new Fw(e,t,s,n,i,o)}}var lr,Pl,zu,Ut,tp,Hu,sp,np,Va,cr,Vu,rp,et,$w,Bw,Uw,Lo,Mk,ga;const qs=class qs{constructor({editor:e=null,uiManager:t=null}){k(this,et);k(this,lr,null);k(this,Pl,null);k(this,zu);k(this,Ut,null);k(this,tp,!1);k(this,Hu,!1);k(this,sp,null);k(this,np);k(this,Va,null);k(this,cr,null);k(this,Vu);var s;e?(S(this,Hu,!1),S(this,Vu,Ue.HIGHLIGHT_COLOR),S(this,sp,e)):(S(this,Hu,!0),S(this,Vu,Ue.HIGHLIGHT_DEFAULT_COLOR)),S(this,cr,(e==null?void 0:e._uiManager)||t),S(this,np,u(this,cr)._eventBus),S(this,zu,(e==null?void 0:e.color)||((s=u(this,cr))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),u(qs,rp)||S(qs,rp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return $e(this,"_keyboardManager",new xp([[["Escape","mac+Escape"],qs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],qs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],qs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],qs.prototype._moveToPrevious],[["Home","mac+Home"],qs.prototype._moveToBeginning],[["End","mac+End"],qs.prototype._moveToEnd]]))}renderButton(){const e=S(this,lr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=u(this,cr)._signal;e.addEventListener("click",C(this,et,Lo).bind(this),{signal:t}),e.addEventListener("keydown",C(this,et,Uw).bind(this),{signal:t});const s=S(this,Pl,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=u(this,zu),e.append(s),e}renderMainDropdown(){const e=S(this,Ut,C(this,et,$w).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===u(this,lr)){C(this,et,Lo).call(this,e);return}const t=e.target.getAttribute("data-color");t&&C(this,et,Bw).call(this,t,e)}_moveToNext(e){var t,s;if(!u(this,et,ga)){C(this,et,Lo).call(this,e);return}if(e.target===u(this,lr)){(t=u(this,Ut).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=u(this,Ut))==null?void 0:t.firstChild)||e.target===u(this,lr)){u(this,et,ga)&&this._hideDropdownFromKeyboard();return}u(this,et,ga)||C(this,et,Lo).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!u(this,et,ga)){C(this,et,Lo).call(this,e);return}(t=u(this,Ut).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,et,ga)){C(this,et,Lo).call(this,e);return}(t=u(this,Ut).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,Ut))==null||e.classList.add("hidden"),(t=u(this,Va))==null||t.abort(),S(this,Va,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,Hu)){if(!u(this,et,ga)){(e=u(this,sp))==null||e.unselect();return}this.hideDropdown(),u(this,lr).focus({preventScroll:!0,focusVisible:u(this,tp)})}}updateColor(e){if(u(this,Pl)&&(u(this,Pl).style.backgroundColor=e),!u(this,Ut))return;const t=u(this,cr).highlightColors.values();for(const s of u(this,Ut).children)s.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=u(this,lr))==null||e.remove(),S(this,lr,null),S(this,Pl,null),(t=u(this,Ut))==null||t.remove(),S(this,Ut,null)}};lr=new WeakMap,Pl=new WeakMap,zu=new WeakMap,Ut=new WeakMap,tp=new WeakMap,Hu=new WeakMap,sp=new WeakMap,np=new WeakMap,Va=new WeakMap,cr=new WeakMap,Vu=new WeakMap,rp=new WeakMap,et=new WeakSet,$w=function(){const e=document.createElement("div"),t=u(this,cr)._signal;e.addEventListener("contextmenu",Hn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,n]of u(this,cr).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",n),i.title=s,i.setAttribute("data-l10n-id",u(qs,rp)[s]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=n,i.setAttribute("aria-selected",n===u(this,zu)),i.addEventListener("click",C(this,et,Bw).bind(this,n),{signal:t}),e.append(i)}return e.addEventListener("keydown",C(this,et,Uw).bind(this),{signal:t}),e},Bw=function(e,t){t.stopPropagation(),u(this,np).dispatch("switchannotationeditorparams",{source:this,type:u(this,Vu),value:e})},Uw=function(e){qs._keyboardManager.exec(this,e)},Lo=function(e){if(u(this,et,ga)){this.hideDropdown();return}if(S(this,tp,e.detail===0),u(this,Va)||(S(this,Va,new AbortController),window.addEventListener("pointerdown",C(this,et,Mk).bind(this),{signal:u(this,cr).combinedSignal(u(this,Va))})),u(this,Ut)){u(this,Ut).classList.remove("hidden");return}const t=S(this,Ut,C(this,et,$w).call(this));u(this,lr).append(t)},Mk=function(e){var t;(t=u(this,Ut))!=null&&t.contains(e.target)||this.hideDropdown()},ga=function(){return u(this,Ut)&&!u(this,Ut).classList.contains("hidden")},k(qs,rp,null);let Od=qs;var Wu,ip,Li,Tl,Gu,Ys,ap,op,Nl,In,dn,os,qu,Ii,bs,Ku,Mn,lp,je,zw,vm,Dk,Ok,Fk,Hw,Io,$n,Hc,$k,ym,vd,Bk,Uk,zk,Hk,Vk;const Ke=class Ke extends ot{constructor(t){super({...t,name:"highlightEditor"});k(this,je);k(this,Wu,null);k(this,ip,0);k(this,Li);k(this,Tl,null);k(this,Gu,null);k(this,Ys,null);k(this,ap,null);k(this,op,0);k(this,Nl,null);k(this,In,null);k(this,dn,null);k(this,os,!1);k(this,qu,null);k(this,Ii);k(this,bs,null);k(this,Ku,"");k(this,Mn);k(this,lp,"");this.color=t.color||Ke._defaultColor,S(this,Mn,t.thickness||Ke._defaultThickness),S(this,Ii,t.opacity||Ke._defaultOpacity),S(this,Li,t.boxes||null),S(this,lp,t.methodOfCreation||""),S(this,Ku,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(S(this,os,!0),C(this,je,vm).call(this,t),C(this,je,Io).call(this)):u(this,Li)&&(S(this,Wu,t.anchorNode),S(this,ip,t.anchorOffset),S(this,ap,t.focusNode),S(this,op,t.focusOffset),C(this,je,zw).call(this),C(this,je,Io).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Ke.prototype;return $e(this,"_keyboardManager",new xp([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,os)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:u(this,Mn),methodOfCreation:u(this,lp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var n;ot.initialize(t,s),Ke._defaultColor||(Ke._defaultColor=((n=s.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case Ue.HIGHLIGHT_DEFAULT_COLOR:Ke._defaultColor=s;break;case Ue.HIGHLIGHT_THICKNESS:Ke._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return u(this,qu)}updateParams(t,s){switch(t){case Ue.HIGHLIGHT_COLOR:C(this,je,Dk).call(this,s);break;case Ue.HIGHLIGHT_THICKNESS:C(this,je,Ok).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Ue.HIGHLIGHT_DEFAULT_COLOR,Ke._defaultColor],[Ue.HIGHLIGHT_THICKNESS,Ke._defaultThickness]]}get propertiesToUpdate(){return[[Ue.HIGHLIGHT_COLOR,this.color||Ke._defaultColor],[Ue.HIGHLIGHT_THICKNESS,u(this,Mn)||Ke._defaultThickness],[Ue.HIGHLIGHT_FREE,u(this,os)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(S(this,Gu,new Od({editor:this})),t.addColorPicker(u(this,Gu))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,je,vd).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,C(this,je,vd).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){C(this,je,Hw).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,je,Io).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var n;let s=!1;this.parent&&!t?C(this,je,Hw).call(this):t&&(C(this,je,Io).call(this,t),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var i,o,c;const{drawLayer:s}=this.parent;let n;u(this,os)?(t=(t-this.rotation+360)%360,n=C(i=Ke,$n,Hc).call(i,u(this,In).box,t)):n=C(o=Ke,$n,Hc).call(o,[this.x,this.y,this.width,this.height],t),s.updateProperties(u(this,dn),{bbox:n,root:{"data-main-rotation":t}}),s.updateProperties(u(this,bs),{bbox:C(c=Ke,$n,Hc).call(c,u(this,Ys).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,Ku)&&(t.setAttribute("aria-label",u(this,Ku)),t.setAttribute("role","mark")),u(this,os)?t.classList.add("free"):this.div.addEventListener("keydown",C(this,je,$k).bind(this),{signal:this._uiManager._signal});const s=S(this,Nl,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=u(this,Tl);const[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),cE(this,u(this,Nl),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,bs),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,bs),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:C(this,je,ym).call(this,!0);break;case 1:case 3:C(this,je,ym).call(this,!1);break}}select(){var t;super.select(),u(this,bs)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,bs),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,bs)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,bs),{rootClass:{selected:!1}}),u(this,os)||C(this,je,ym).call(this,!1))}get _mustFixPosition(){return!u(this,os)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,dn),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,bs),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:n,x:i,y:o}){const{x:c,y:d,width:f,height:p}=n.getBoundingClientRect(),m=new AbortController,w=t.combinedSignal(m),b=A=>{m.abort(),C(this,$n,Hk).call(this,t,A)};window.addEventListener("blur",b,{signal:w}),window.addEventListener("pointerup",b,{signal:w}),window.addEventListener("pointerdown",Tt,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Hn,{signal:w}),n.addEventListener("pointermove",C(this,$n,zk).bind(this,t),{signal:w}),this._freeHighlight=new Fw({x:i,y:o},[c,d,f,p],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,n){var _,E,T,R;let i=null;if(t instanceof vk){const{data:{quadPoints:N,rect:j,rotation:I,id:F,color:B,opacity:W,popupRef:K},parent:{page:{pageNumber:te}}}=t;i=t={annotationType:Te.HIGHLIGHT,color:Array.from(B),opacity:W,quadPoints:N,boxes:null,pageIndex:te-1,rect:j.slice(0),rotation:I,id:F,deleted:!1,popupRef:K}}else if(t instanceof jx){const{data:{inkLists:N,rect:j,rotation:I,id:F,color:B,borderStyle:{rawWidth:W},popupRef:K},parent:{page:{pageNumber:te}}}=t;i=t={annotationType:Te.HIGHLIGHT,color:Array.from(B),thickness:W,inkLists:N,boxes:null,pageIndex:te-1,rect:j.slice(0),rotation:I,id:F,deleted:!1,popupRef:K}}const{color:o,quadPoints:c,inkLists:d,opacity:f}=t,p=await super.deserialize(t,s,n);p.color=ve.makeHexColor(...o),S(p,Ii,f||1),d&&S(p,Mn,t.thickness),p.annotationElementId=t.id||null,p._initialData=i;const[m,w]=p.pageDimensions,[b,A]=p.pageTranslation;if(c){const N=S(p,Li,[]);for(let j=0;j<c.length;j+=8)N.push({x:(c[j]-b)/m,y:1-(c[j+1]-A)/w,width:(c[j+2]-c[j])/m,height:(c[j+1]-c[j+5])/w});C(_=p,je,zw).call(_),C(E=p,je,Io).call(E),p.rotate(p.rotation)}else if(d){S(p,os,!0);const N=d[0],j={x:N[0]-b,y:w-(N[1]-A)},I=new Fw(j,[0,0,m,w],1,u(p,Mn)/2,!0,.001);for(let W=0,K=N.length;W<K;W+=2)j.x=N[W]-b,j.y=w-(N[W+1]-A),I.add(j);const{id:F,clipPathId:B}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:I.toSVGPath()}},!0,!0);C(T=p,je,vm).call(T,{highlightOutlines:I.getOutlines(),highlightId:F,clipPathId:B}),C(R=p,je,Io).call(R),p.rotate(p.parentRotation)}return p}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),n=ot._colorManager.convert(this.color),i={annotationType:Te.HIGHLIGHT,color:n,opacity:u(this,Ii),thickness:u(this,Mn),quadPoints:C(this,je,Bk).call(this),outlines:C(this,je,Uk).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:C(this,je,vd).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!C(this,je,Vk).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Wu=new WeakMap,ip=new WeakMap,Li=new WeakMap,Tl=new WeakMap,Gu=new WeakMap,Ys=new WeakMap,ap=new WeakMap,op=new WeakMap,Nl=new WeakMap,In=new WeakMap,dn=new WeakMap,os=new WeakMap,qu=new WeakMap,Ii=new WeakMap,bs=new WeakMap,Ku=new WeakMap,Mn=new WeakMap,lp=new WeakMap,je=new WeakSet,zw=function(){const t=new Dw(u(this,Li),.001);S(this,In,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,In).box;const s=new Dw(u(this,Li),.0025,.001,this._uiManager.direction==="ltr");S(this,Ys,s.getOutlines());const{lastPoint:n}=u(this,Ys);S(this,qu,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},vm=function({highlightOutlines:t,highlightId:s,clipPathId:n}){var m,w;if(S(this,In,t),S(this,Ys,t.getNewOutline(u(this,Mn)/2+1.5,.0025)),s>=0)S(this,dn,s),S(this,Tl,n),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),S(this,bs,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,Ys).box,path:{d:u(this,Ys).toSVGPath()}},!0));else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,dn),{bbox:C(m=Ke,$n,Hc).call(m,u(this,In).box,(b-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,bs),{bbox:C(w=Ke,$n,Hc).call(w,u(this,Ys).box,b),path:{d:u(this,Ys).toSVGPath()}})}const[o,c,d,f]=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=d,this.height=f;break;case 90:{const[b,A]=this.parentDimensions;this.x=c,this.y=1-o,this.width=d*A/b,this.height=f*b/A;break}case 180:this.x=1-o,this.y=1-c,this.width=d,this.height=f;break;case 270:{const[b,A]=this.parentDimensions;this.x=1-c,this.y=o,this.width=d*A/b,this.height=f*b/A;break}}const{lastPoint:p}=u(this,Ys);S(this,qu,[(p[0]-o)/d,(p[1]-c)/f])},Dk=function(t){const s=(o,c)=>{var d,f;this.color=o,S(this,Ii,c),(d=this.parent)==null||d.drawLayer.updateProperties(u(this,dn),{root:{fill:o,"fill-opacity":c}}),(f=u(this,Gu))==null||f.updateColor(o)},n=this.color,i=u(this,Ii);this.addCommands({cmd:s.bind(this,t,Ke._defaultOpacity),undo:s.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},Ok=function(t){const s=u(this,Mn),n=i=>{S(this,Mn,i),C(this,je,Fk).call(this,i)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},Fk=function(t){if(!u(this,os))return;C(this,je,vm).call(this,{highlightOutlines:u(this,In).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)},Hw=function(){u(this,dn)===null||!this.parent||(this.parent.drawLayer.remove(u(this,dn)),S(this,dn,null),this.parent.drawLayer.remove(u(this,bs)),S(this,bs,null))},Io=function(t=this.parent){u(this,dn)===null&&({id:Cs(this,dn)._,clipPathId:Cs(this,Tl)._}=t.drawLayer.draw({bbox:u(this,In).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":u(this,Ii)},rootClass:{highlight:!0,free:u(this,os)},path:{d:u(this,In).toSVGPath()}},!1,!0),S(this,bs,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,os)},bbox:u(this,Ys).box,path:{d:u(this,Ys).toSVGPath()}},u(this,os))),u(this,Nl)&&(u(this,Nl).style.clipPath=u(this,Tl)))},$n=new WeakSet,Hc=function([t,s,n,i],o){switch(o){case 90:return[1-s-i,t,i,n];case 180:return[1-t-n,1-s-i,n,i];case 270:return[s,1-t-n,i,n]}return[t,s,n,i]},$k=function(t){Ke._keyboardManager.exec(this,t)},ym=function(t){if(!u(this,Wu))return;const s=window.getSelection();t?s.setPosition(u(this,Wu),u(this,ip)):s.setPosition(u(this,ap),u(this,op))},vd=function(){return u(this,os)?this.rotation:0},Bk=function(){if(u(this,os))return null;const[t,s]=this.pageDimensions,[n,i]=this.pageTranslation,o=u(this,Li),c=new Float32Array(o.length*8);let d=0;for(const{x:f,y:p,width:m,height:w}of o){const b=f*t+n,A=(1-p)*s+i;c[d]=c[d+4]=b,c[d+1]=c[d+3]=A,c[d+2]=c[d+6]=b+m*t,c[d+5]=c[d+7]=A-w*s,d+=8}return c},Uk=function(t){return u(this,In).serialize(t,C(this,je,vd).call(this))},zk=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Hk=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Vk=function(t){const{color:s}=this._initialData;return t.color.some((n,i)=>n!==s[i])},k(Ke,$n),ee(Ke,"_defaultColor",null),ee(Ke,"_defaultOpacity",1),ee(Ke,"_defaultThickness",12),ee(Ke,"_type","highlight"),ee(Ke,"_editorType",Te.HIGHLIGHT),ee(Ke,"_freeHighlightId",-1),ee(Ke,"_freeHighlight",null),ee(Ke,"_freeHighlightClipId","");let Dm=Ke;var Rl;class Wk{constructor(){k(this,Rl,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){u(this,Rl)[e]=t}toSVGProperties(){const e=u(this,Rl);return S(this,Rl,Object.create(null)),{root:e}}reset(){S(this,Rl,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){tt("Not implemented")}}Rl=new WeakMap;var fn,Xu,Yt,jl,Ll,Wa,Ga,qa,Il,We,Vw,Ww,Gw,yd,Gk,wm,wd,Vc;const he=class he extends ot{constructor(t){super(t);k(this,We);k(this,fn,null);k(this,Xu);ee(this,"_drawId",null);S(this,Xu,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(C(this,We,Vw).call(this,t),C(this,We,yd).call(this))}static _mergeSVGProperties(t,s){const n=new Set(Object.keys(t));for(const[i,o]of Object.entries(s))n.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){tt("Not implemented")}static get typesMap(){tt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,s),this._currentParent&&(u(he,Yt).updateProperty(n,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)t.push([n,s[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[n,i]of this.constructor.typesMap)t.push([n,s[i]]);return t}_updateProperty(t,s,n){const i=this._drawingOptions,o=i[s],c=d=>{var p;i.updateProperty(s,d);const f=u(this,fn).updateProperty(s,d);f&&C(this,We,wd).call(this,f),(p=this.parent)==null||p.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:c.bind(this,n),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,he._mergeSVGProperties(u(this,fn).getPathResizingSVGProperties(C(this,We,wm).call(this)),{bbox:C(this,We,Vc).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,he._mergeSVGProperties(u(this,fn).getPathResizedSVGProperties(C(this,We,wm).call(this)),{bbox:C(this,We,Vc).call(this)}))}_onTranslating(t,s){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{bbox:C(this,We,Vc).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,he._mergeSVGProperties(u(this,fn).getPathTranslatedSVGProperties(C(this,We,wm).call(this),this.parentDimensions),{bbox:C(this,We,Vc).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,Xu)&&(S(this,Xu,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){C(this,We,Gw).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,We,yd).call(this),C(this,We,wd).call(this,u(this,fn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var n;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),C(this,We,Gw).call(this)):t&&(this._uiManager.addShouldRescale(this),C(this,We,yd).call(this,t),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,he._mergeSVGProperties({bbox:C(this,We,Vc).call(this)},u(this,fn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,We,wd).call(this,u(this,fn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[o,c]=this.parentDimensions;return this.setDims(this.width*o,this.height*c),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),n}static createDrawerInstance(t,s,n,i,o){tt("Not implemented")}static startDrawing(t,s,n,i){var E;const{target:o,offsetX:c,offsetY:d,pointerId:f,pointerType:p}=i;if(u(he,Ga)&&u(he,Ga)!==p)return;const{viewport:{rotation:m}}=t,{width:w,height:b}=o.getBoundingClientRect(),A=S(he,jl,new AbortController),_=t.combinedSignal(A);if(u(he,Wa)||S(he,Wa,f),u(he,Ga)??S(he,Ga,p),window.addEventListener("pointerup",T=>{var R;u(he,Wa)===T.pointerId?this._endDraw(T):(R=u(he,qa))==null||R.delete(T.pointerId)},{signal:_}),window.addEventListener("pointercancel",T=>{var R;u(he,Wa)===T.pointerId?this._currentParent.endDrawingSession():(R=u(he,qa))==null||R.delete(T.pointerId)},{signal:_}),window.addEventListener("pointerdown",T=>{u(he,Ga)===T.pointerType&&((u(he,qa)||S(he,qa,new Set)).add(T.pointerId),u(he,Yt).isCancellable()&&(u(he,Yt).removeLastElement(),u(he,Yt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",Hn,{signal:_}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),o.addEventListener("touchmove",T=>{T.timeStamp===u(he,Il)&&Tt(T)},{signal:_}),t.toggleDrawing(),(E=s._editorUndoBar)==null||E.hide(),u(he,Yt)){t.drawLayer.updateProperties(this._currentDrawId,u(he,Yt).startNew(c,d,w,b,m));return}s.updateUIForDefaultProperties(this),S(he,Yt,this.createDrawerInstance(c,d,w,b,m)),S(he,Ll,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(he,Ll).toSVGProperties(),u(he,Yt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(S(he,Il,-1),!u(he,Yt))return;const{offsetX:s,offsetY:n,pointerId:i}=t;if(u(he,Wa)===i){if(((o=u(he,qa))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(he,Yt).add(s,n)),S(he,Il,t.timeStamp),Tt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,S(he,Yt,null),S(he,Ll,null),S(he,Ga,null),S(he,Il,NaN)),u(he,jl)&&(u(he,jl).abort(),S(he,jl,null),S(he,Wa,NaN),S(he,qa,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,u(he,Yt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=u(he,Yt),i=this._currentDrawId,o=n.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(i,n.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(i,n.removeLastElement())},mustExec:!1,type:Ue.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Ue.DRAW_STEP),!u(he,Yt).isEmpty()){const{pageDimensions:[n,i],scale:o}=s,c=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(he,Yt).getOutlines(n*o,i*o,o,this._INNER_MARGIN),drawingOptions:u(he,Ll),mustBeCommitted:!t});return this._cleanup(!0),c}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,n,i,o,c){tt("Not implemented")}static async deserialize(t,s,n){var m,w;const{rawDims:{pageWidth:i,pageHeight:o,pageX:c,pageY:d}}=s.viewport,f=this.deserializeDraw(c,d,i,o,this._INNER_MARGIN,t),p=await super.deserialize(t,s,n);return p.createDrawingOptions(t),C(m=p,We,Vw).call(m,{drawOutlines:f}),C(w=p,We,yd).call(w),p.onScaleChanging(),p.rotate(),p}serializeDraw(t){const[s,n]=this.pageTranslation,[i,o]=this.pageDimensions;return u(this,fn).serialize([s,n,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};fn=new WeakMap,Xu=new WeakMap,Yt=new WeakMap,jl=new WeakMap,Ll=new WeakMap,Wa=new WeakMap,Ga=new WeakMap,qa=new WeakMap,Il=new WeakMap,We=new WeakSet,Vw=function({drawOutlines:t,drawId:s,drawingOptions:n}){S(this,fn,t),this._drawingOptions||(this._drawingOptions=n),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=C(this,We,Ww).call(this,t,this.parent),C(this,We,wd).call(this,t.box)},Ww=function(t,s){const{id:n}=s.drawLayer.draw(he._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n},Gw=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},yd=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,We,Ww).call(this,u(this,fn),t)}},Gk=function([t,s,n,i]){const{parentDimensions:[o,c],rotation:d}=this;switch(d){case 90:return[s,1-t,n*(c/o),i*(o/c)];case 180:return[1-t,1-s,n,i];case 270:return[1-s,t,n*(c/o),i*(o/c)];default:return[t,s,n,i]}},wm=function(){const{x:t,y:s,width:n,height:i,parentDimensions:[o,c],rotation:d}=this;switch(d){case 90:return[1-s,t,n*(o/c),i*(c/o)];case 180:return[1-t,1-s,n,i];case 270:return[s,1-t,n*(o/c),i*(c/o)];default:return[t,s,n,i]}},wd=function(t){if([this.x,this.y,this.width,this.height]=C(this,We,Gk).call(this,t),this.div){this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)}this._onResized()},Vc=function(){const{x:t,y:s,width:n,height:i,rotation:o,parentRotation:c,parentDimensions:[d,f]}=this;switch((o*4+c)/90){case 1:return[1-s-i,t,i,n];case 2:return[1-t-n,1-s-i,n,i];case 3:return[s,1-t-n,i,n];case 4:return[t,s-n*(d/f),i*(f/d),n*(d/f)];case 5:return[1-s,t,n*(d/f),i*(f/d)];case 6:return[1-t-i*(f/d),1-s,i*(f/d),n*(d/f)];case 7:return[s-n*(d/f),1-t-i*(f/d),n*(d/f),i*(f/d)];case 8:return[t-n,s-i,n,i];case 9:return[1-s,t-n,i,n];case 10:return[1-t,1-s,n,i];case 11:return[s-i,1-t,i,n];case 12:return[t-i*(f/d),s,i*(f/d),n*(d/f)];case 13:return[1-s-n*(d/f),t-i*(f/d),n*(d/f),i*(f/d)];case 14:return[1-t,1-s-n*(d/f),i*(f/d),n*(d/f)];case 15:return[s,1-t,n*(d/f),i*(f/d)];default:return[t,s,n,i]}},ee(he,"_currentDrawId",-1),ee(he,"_currentParent",null),k(he,Yt,null),k(he,jl,null),k(he,Ll,null),k(he,Wa,NaN),k(he,Ga,null),k(he,qa,null),k(he,Il,NaN),ee(he,"_INNER_MARGIN",3);let Om=he;var Or,Jt,Qt,Ml,Yu,Ns,ls,Dn,Dl,Ol,Fl,Ju,xm;class LI{constructor(e,t,s,n,i,o){k(this,Ju);k(this,Or,new Float64Array(6));k(this,Jt);k(this,Qt);k(this,Ml);k(this,Yu);k(this,Ns);k(this,ls,"");k(this,Dn,0);k(this,Dl,new Sp);k(this,Ol);k(this,Fl);S(this,Ol,s),S(this,Fl,n),S(this,Ml,i),S(this,Yu,o),[e,t]=C(this,Ju,xm).call(this,e,t);const c=S(this,Jt,[NaN,NaN,NaN,NaN,e,t]);S(this,Ns,[e,t]),S(this,Qt,[{line:c,points:u(this,Ns)}]),u(this,Or).set(c,0)}updateProperty(e,t){e==="stroke-width"&&S(this,Yu,t)}isEmpty(){return!u(this,Qt)||u(this,Qt).length===0}isCancellable(){return u(this,Ns).length<=10}add(e,t){[e,t]=C(this,Ju,xm).call(this,e,t);const[s,n,i,o]=u(this,Or).subarray(2,6),c=e-i,d=t-o;return Math.hypot(u(this,Ol)*c,u(this,Fl)*d)<=2?null:(u(this,Ns).push(e,t),isNaN(s)?(u(this,Or).set([i,o,e,t],2),u(this,Jt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,Or)[0])&&u(this,Jt).splice(6,6),u(this,Or).set([s,n,i,o,e,t],0),u(this,Jt).push(...ce.createBezierPoints(s,n,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(u(this,Ns).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,n,i){S(this,Ol,s),S(this,Fl,n),S(this,Ml,i),[e,t]=C(this,Ju,xm).call(this,e,t);const o=S(this,Jt,[NaN,NaN,NaN,NaN,e,t]);S(this,Ns,[e,t]);const c=u(this,Qt).at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),u(this,Qt).push({line:o,points:u(this,Ns)}),u(this,Or).set(o,0),S(this,Dn,0),this.toSVGPath(),null}getLastElement(){return u(this,Qt).at(-1)}setLastElement(e){return u(this,Qt)?(u(this,Qt).push(e),S(this,Jt,e.line),S(this,Ns,e.points),S(this,Dn,0),{path:{d:this.toSVGPath()}}):u(this,Dl).setLastElement(e)}removeLastElement(){if(!u(this,Qt))return u(this,Dl).removeLastElement();u(this,Qt).pop(),S(this,ls,"");for(let e=0,t=u(this,Qt).length;e<t;e++){const{line:s,points:n}=u(this,Qt)[e];S(this,Jt,s),S(this,Ns,n),S(this,Dn,0),this.toSVGPath()}return{path:{d:u(this,ls)}}}toSVGPath(){const e=ce.svgRound(u(this,Jt)[4]),t=ce.svgRound(u(this,Jt)[5]);if(u(this,Ns).length===2)return S(this,ls,`${u(this,ls)} M ${e} ${t} Z`),u(this,ls);if(u(this,Ns).length<=6){const n=u(this,ls).lastIndexOf("M");S(this,ls,`${u(this,ls).slice(0,n)} M ${e} ${t}`),S(this,Dn,6)}if(u(this,Ns).length===4){const n=ce.svgRound(u(this,Jt)[10]),i=ce.svgRound(u(this,Jt)[11]);return S(this,ls,`${u(this,ls)} L ${n} ${i}`),S(this,Dn,12),u(this,ls)}const s=[];u(this,Dn)===0&&(s.push(`M ${e} ${t}`),S(this,Dn,6));for(let n=u(this,Dn),i=u(this,Jt).length;n<i;n+=6){const[o,c,d,f,p,m]=u(this,Jt).slice(n,n+6).map(ce.svgRound);s.push(`C${o} ${c} ${d} ${f} ${p} ${m}`)}return S(this,ls,u(this,ls)+s.join(" ")),S(this,Dn,u(this,Jt).length),u(this,ls)}getOutlines(e,t,s,n){const i=u(this,Qt).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),u(this,Dl).build(u(this,Qt),e,t,s,u(this,Ml),u(this,Yu),n),S(this,Or,null),S(this,Jt,null),S(this,Qt,null),S(this,ls,null),u(this,Dl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Or=new WeakMap,Jt=new WeakMap,Qt=new WeakMap,Ml=new WeakMap,Yu=new WeakMap,Ns=new WeakMap,ls=new WeakMap,Dn=new WeakMap,Dl=new WeakMap,Ol=new WeakMap,Fl=new WeakMap,Ju=new WeakSet,xm=function(e,t){return ce._normalizePoint(e,t,u(this,Ol),u(this,Fl),u(this,Ml))};var Rs,cp,up,pn,Fr,$r,Qu,Zu,$l,us,oi,qk,Kk,Xk;class Sp extends ce{constructor(){super(...arguments);k(this,us);k(this,Rs);k(this,cp,0);k(this,up);k(this,pn);k(this,Fr);k(this,$r);k(this,Qu);k(this,Zu);k(this,$l)}build(t,s,n,i,o,c,d){S(this,Fr,s),S(this,$r,n),S(this,Qu,i),S(this,Zu,o),S(this,$l,c),S(this,up,d??0),S(this,pn,t),C(this,us,Kk).call(this)}get thickness(){return u(this,$l)}setLastElement(t){return u(this,pn).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,pn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of u(this,pn)){if(t.push(`M${ce.svgRound(s[4])} ${ce.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${ce.svgRound(s[10])} ${ce.svgRound(s[11])}`);continue}for(let n=6,i=s.length;n<i;n+=6){const[o,c,d,f,p,m]=s.subarray(n,n+6).map(ce.svgRound);t.push(`C${o} ${c} ${d} ${f} ${p} ${m}`)}}return t.join("")}serialize([t,s,n,i],o){const c=[],d=[],[f,p,m,w]=C(this,us,qk).call(this);let b,A,_,E,T,R,N,j,I;switch(u(this,Zu)){case 0:I=ce._rescale,b=t,A=s+i,_=n,E=-i,T=t+f*n,R=s+(1-p-w)*i,N=t+(f+m)*n,j=s+(1-p)*i;break;case 90:I=ce._rescaleAndSwap,b=t,A=s,_=n,E=i,T=t+p*n,R=s+f*i,N=t+(p+w)*n,j=s+(f+m)*i;break;case 180:I=ce._rescale,b=t+n,A=s,_=-n,E=i,T=t+(1-f-m)*n,R=s+p*i,N=t+(1-f)*n,j=s+(p+w)*i;break;case 270:I=ce._rescaleAndSwap,b=t+n,A=s+i,_=-n,E=-i,T=t+(1-p-w)*n,R=s+(1-f-m)*i,N=t+(1-p)*n,j=s+(1-f)*i;break}for(const{line:F,points:B}of u(this,pn))c.push(I(F,b,A,_,E,o?new Array(F.length):null)),d.push(I(B,b,A,_,E,o?new Array(B.length):null));return{lines:c,points:d,rect:[T,R,N,j]}}static deserialize(t,s,n,i,o,{paths:{lines:c,points:d},rotation:f,thickness:p}){const m=[];let w,b,A,_,E;switch(f){case 0:E=ce._rescale,w=-t/n,b=s/i+1,A=1/n,_=-1/i;break;case 90:E=ce._rescaleAndSwap,w=-s/i,b=-t/n,A=1/i,_=1/n;break;case 180:E=ce._rescale,w=t/n+1,b=-s/i,A=-1/n,_=1/i;break;case 270:E=ce._rescaleAndSwap,w=s/i+1,b=t/n+1,A=-1/i,_=-1/n;break}if(!c){c=[];for(const R of d){const N=R.length;if(N===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,R[0],R[1]]));continue}if(N===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,R[0],R[1],NaN,NaN,NaN,NaN,R[2],R[3]]));continue}const j=new Float32Array(3*(N-2));c.push(j);let[I,F,B,W]=R.subarray(0,4);j.set([NaN,NaN,NaN,NaN,I,F],0);for(let K=4;K<N;K+=2){const te=R[K],Q=R[K+1];j.set(ce.createBezierPoints(I,F,B,W,te,Q),(K-2)*3),[I,F,B,W]=[B,W,te,Q]}}}for(let R=0,N=c.length;R<N;R++)m.push({line:E(c[R].map(j=>j??NaN),w,b,A,_),points:E(d[R].map(j=>j??NaN),w,b,A,_)});const T=new this.prototype.constructor;return T.build(m,n,i,1,f,p,o),T}get box(){return u(this,Rs)}updateProperty(t,s){return t==="stroke-width"?C(this,us,Xk).call(this,s):null}updateParentDimensions([t,s],n){const[i,o]=C(this,us,oi).call(this);S(this,Fr,t),S(this,$r,s),S(this,Qu,n);const[c,d]=C(this,us,oi).call(this),f=c-i,p=d-o,m=u(this,Rs);return m[0]-=f,m[1]-=p,m[2]+=2*f,m[3]+=2*p,m}updateRotation(t){return S(this,cp,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,Rs).map(ce.svgRound).join(" ")}get defaultProperties(){const[t,s]=u(this,Rs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ce.svgRound(t)} ${ce.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=u(this,Rs);let n=0,i=0,o=0,c=0,d=0,f=0;switch(u(this,cp)){case 90:i=s/t,o=-t/s,d=t;break;case 180:n=-1,c=-1,d=t,f=s;break;case 270:i=-s/t,o=t/s,f=s;break;default:return""}return`matrix(${n} ${i} ${o} ${c} ${ce.svgRound(d)} ${ce.svgRound(f)})`}getPathResizingSVGProperties([t,s,n,i]){const[o,c]=C(this,us,oi).call(this),[d,f,p,m]=u(this,Rs);if(Math.abs(p-o)<=ce.PRECISION||Math.abs(m-c)<=ce.PRECISION){const E=t+n/2-(d+p/2),T=s+i/2-(f+m/2);return{path:{"transform-origin":`${ce.svgRound(t)} ${ce.svgRound(s)}`,transform:`${this.rotationTransform} translate(${E} ${T})`}}}const w=(n-2*o)/(p-2*o),b=(i-2*c)/(m-2*c),A=p/n,_=m/i;return{path:{"transform-origin":`${ce.svgRound(d)} ${ce.svgRound(f)}`,transform:`${this.rotationTransform} scale(${A} ${_}) translate(${ce.svgRound(o)} ${ce.svgRound(c)}) scale(${w} ${b}) translate(${ce.svgRound(-o)} ${ce.svgRound(-c)})`}}}getPathResizedSVGProperties([t,s,n,i]){const[o,c]=C(this,us,oi).call(this),d=u(this,Rs),[f,p,m,w]=d;if(d[0]=t,d[1]=s,d[2]=n,d[3]=i,Math.abs(m-o)<=ce.PRECISION||Math.abs(w-c)<=ce.PRECISION){const T=t+n/2-(f+m/2),R=s+i/2-(p+w/2);for(const{line:N,points:j}of u(this,pn))ce._translate(N,T,R,N),ce._translate(j,T,R,j);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ce.svgRound(t)} ${ce.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(n-2*o)/(m-2*o),A=(i-2*c)/(w-2*c),_=-b*(f+o)+t+o,E=-A*(p+c)+s+c;if(b!==1||A!==1||_!==0||E!==0)for(const{line:T,points:R}of u(this,pn))ce._rescale(T,_,E,b,A,T),ce._rescale(R,_,E,b,A,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ce.svgRound(t)} ${ce.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],n){const[i,o]=n,c=u(this,Rs),d=t-c[0],f=s-c[1];if(u(this,Fr)===i&&u(this,$r)===o)for(const{line:p,points:m}of u(this,pn))ce._translate(p,d,f,p),ce._translate(m,d,f,m);else{const p=u(this,Fr)/i,m=u(this,$r)/o;S(this,Fr,i),S(this,$r,o);for(const{line:w,points:b}of u(this,pn))ce._rescale(w,d,f,p,m,w),ce._rescale(b,d,f,p,m,b);c[2]*=p,c[3]*=m}return c[0]=t,c[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ce.svgRound(t)} ${ce.svgRound(s)}`}}}get defaultSVGProperties(){const t=u(this,Rs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ce.svgRound(t[0])} ${ce.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Rs=new WeakMap,cp=new WeakMap,up=new WeakMap,pn=new WeakMap,Fr=new WeakMap,$r=new WeakMap,Qu=new WeakMap,Zu=new WeakMap,$l=new WeakMap,us=new WeakSet,oi=function(t=u(this,$l)){const s=u(this,up)+t/2*u(this,Qu);return u(this,Zu)%180===0?[s/u(this,Fr),s/u(this,$r)]:[s/u(this,$r),s/u(this,Fr)]},qk=function(){const[t,s,n,i]=u(this,Rs),[o,c]=C(this,us,oi).call(this,0);return[t+o,s+c,n-2*o,i-2*c]},Kk=function(){const t=S(this,Rs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of u(this,pn)){if(i.length<=12){for(let d=4,f=i.length;d<f;d+=6)ve.pointBoundingBox(i[d],i[d+1],t);continue}let o=i[4],c=i[5];for(let d=6,f=i.length;d<f;d+=6){const[p,m,w,b,A,_]=i.subarray(d,d+6);ve.bezierBoundingBox(o,c,p,m,w,b,A,_,t),o=A,c=_}}const[s,n]=C(this,us,oi).call(this);t[0]=Ss(t[0]-s,0,1),t[1]=Ss(t[1]-n,0,1),t[2]=Ss(t[2]+s,0,1),t[3]=Ss(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]},Xk=function(t){const[s,n]=C(this,us,oi).call(this);S(this,$l,t);const[i,o]=C(this,us,oi).call(this),[c,d]=[i-s,o-n],f=u(this,Rs);return f[0]-=c,f[1]-=d,f[2]+=2*c,f[3]+=2*d,f};class g0 extends Wk{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ot._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new g0(this._viewParameters);return e.updateAll(this),e}}var n0,Yk;const qc=class qc extends Om{constructor(t){super({...t,name:"inkEditor"});k(this,n0);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){ot.initialize(t,s),this._defaultDrawingOptions=new g0(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return $e(this,"typesMap",new Map([[Ue.INK_THICKNESS,"stroke-width"],[Ue.INK_COLOR,"stroke"],[Ue.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,n,i,o){return new LI(t,s,n,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,n,i,o,c){return Sp.deserialize(t,s,n,i,o,c)}static async deserialize(t,s,n){let i=null;if(t instanceof jx){const{data:{inkLists:c,rect:d,rotation:f,id:p,color:m,opacity:w,borderStyle:{rawWidth:b},popupRef:A},parent:{page:{pageNumber:_}}}=t;i=t={annotationType:Te.INK,color:Array.from(m),thickness:b,opacity:w,paths:{points:c},boxes:null,pageIndex:_-1,rect:d.slice(0),rotation:f,id:p,deleted:!1,popupRef:A}}const o=await super.deserialize(t,s,n);return o.annotationElementId=t.id||null,o._initialData=i,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:n}=this;s.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:n}){this._drawingOptions=qc.getDefaultDrawingOptions({stroke:ve.makeHexColor(...t),"stroke-width":s,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:n,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":c,"stroke-width":d}}=this,f={annotationType:Te.INK,color:ot._colorManager.convert(o),opacity:c,thickness:d,paths:{lines:s,points:n},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(f.isCopy=!0,f):this.annotationElementId&&!C(this,n0,Yk).call(this,f)?null:(f.id=this.annotationElementId,f)}renderAnnotationElement(t){const{points:s,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:s}),null}};n0=new WeakSet,Yk=function(t){const{color:s,thickness:n,opacity:i,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((c,d)=>c!==s[d])||t.thickness!==n||t.opacity!==i||t.pageIndex!==o},ee(qc,"_type","ink"),ee(qc,"_editorType",Te.INK),ee(qc,"_defaultDrawingOptions",null);let qw=qc;class Kw extends Sp{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Kg=8,td=3;var Bl,Ye,Xw,ur,Jk,Qk,Yw,bm,Zk,eC,tC,Jw,Qw,sC;class Hr{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:n},i,o,c,d){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const m=200,w=p.font=`${s} ${n} ${m}px ${t}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:A,actualBoundingBoxAscent:_,actualBoundingBoxDescent:E,fontBoundingBoxAscent:T,fontBoundingBoxDescent:R,width:N}=p.measureText(e),j=1.5,I=Math.ceil(Math.max(Math.abs(b)+Math.abs(A)||0,N)*j),F=Math.ceil(Math.max(Math.abs(_)+Math.abs(E)||m,Math.abs(T)+Math.abs(R)||m)*j);f=new OffscreenCanvas(I,F),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=w,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,I,F),p.fillStyle="black",p.fillText(e,I*(j-1)/2,F*(3-j)/2);const B=C(this,Ye,Jw).call(this,p.getImageData(0,0,I,F).data),W=C(this,Ye,tC).call(this,B),K=C(this,Ye,Qw).call(this,W),te=C(this,Ye,Yw).call(this,B,I,F,K);return this.processDrawnLines({lines:{curves:te,width:I,height:F},pageWidth:i,pageHeight:o,rotation:c,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(e,t,s,n,i){const[o,c,d]=C(this,Ye,sC).call(this,e),[f,p]=C(this,Ye,eC).call(this,o,c,d,Math.hypot(c,d)*u(this,Bl).sigmaSFactor,u(this,Bl).sigmaR,u(this,Bl).kernelSize),m=C(this,Ye,Qw).call(this,p),w=C(this,Ye,Yw).call(this,f,c,d,m);return this.processDrawnLines({lines:{curves:w,width:c,height:d},pageWidth:t,pageHeight:s,rotation:n,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:n,innerMargin:i,mustSmooth:o,areContours:c}){n%180!==0&&([t,s]=[s,t]);const{curves:d,width:f,height:p}=e,m=e.thickness??0,w=[],b=Math.min(t/f,s/p),A=b/t,_=b/s,E=[];for(const{points:R}of d){const N=o?C(this,Ye,Zk).call(this,R):R;if(!N)continue;E.push(N);const j=N.length,I=new Float32Array(j),F=new Float32Array(3*(j===2?2:j-2));if(w.push({line:F,points:I}),j===2){I[0]=N[0]*A,I[1]=N[1]*_,F.set([NaN,NaN,NaN,NaN,I[0],I[1]],0);continue}let[B,W,K,te]=N;B*=A,W*=_,K*=A,te*=_,I.set([B,W,K,te],0),F.set([NaN,NaN,NaN,NaN,B,W],0);for(let Q=4;Q<j;Q+=2){const _e=I[Q]=N[Q]*A,we=I[Q+1]=N[Q+1]*_;F.set(ce.createBezierPoints(B,W,K,te,_e,we),(Q-2)*3),[B,W,K,te]=[K,te,_e,we]}}if(w.length===0)return null;const T=c?new Kw:new Sp;return T.build(w,t,s,1,n,c?0:m,i),{outline:T,newCurves:E,areContours:c,thickness:m,width:f,height:p}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:n,height:i}){let o=1/0,c=-1/0,d=0;for(const N of e){d+=N.length;for(let j=2,I=N.length;j<I;j++){const F=N[j]-N[j-2];o=Math.min(o,F),c=Math.max(c,F)}}let f;o>=-128&&c<=127?f=Int8Array:o>=-32768&&c<=32767?f=Int16Array:f=Int32Array;const p=e.length,m=Kg+td*p,w=new Uint32Array(m);let b=0;w[b++]=m*Uint32Array.BYTES_PER_ELEMENT+(d-2*p)*f.BYTES_PER_ELEMENT,w[b++]=0,w[b++]=n,w[b++]=i,w[b++]=t?0:1,w[b++]=Math.max(0,Math.floor(s??0)),w[b++]=p,w[b++]=f.BYTES_PER_ELEMENT;for(const N of e)w[b++]=N.length-2,w[b++]=N[0],w[b++]=N[1];const A=new CompressionStream("deflate-raw"),_=A.writable.getWriter();await _.ready,_.write(w);const E=f.prototype.constructor;for(const N of e){const j=new E(N.length-2);for(let I=2,F=N.length;I<F;I++)j[I-2]=N[I]-N[I-2];_.write(j)}_.close();const T=await new Response(A.readable).arrayBuffer(),R=new Uint8Array(T);return QA(R)}static async decompressSignature(e){try{const t=cL(e),{readable:s,writable:n}=new DecompressionStream("deflate-raw"),i=n.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,c=0;for await(const N of s)o||(o=new Uint8Array(new Uint32Array(N.buffer,0,4)[0])),o.set(N,c),c+=N.length;const d=new Uint32Array(o.buffer,0,o.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=d[2],m=d[3],w=d[4]===0,b=d[5],A=d[6],_=d[7],E=[],T=(Kg+td*A)*Uint32Array.BYTES_PER_ELEMENT;let R;switch(_){case Int8Array.BYTES_PER_ELEMENT:R=new Int8Array(o.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:R=new Int16Array(o.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:R=new Int32Array(o.buffer,T);break}c=0;for(let N=0;N<A;N++){const j=d[td*N+Kg],I=new Float32Array(j+2);E.push(I);for(let F=0;F<td-1;F++)I[F]=d[td*N+Kg+F+1];for(let F=0;F<j;F++)I[F+2]=I[F]+R[c++]}return{areContours:w,thickness:b,outlines:E,width:p,height:m}}catch(t){return Ne(`decompressSignature: ${t}`),null}}}Bl=new WeakMap,Ye=new WeakSet,Xw=function(e,t,s,n){return s-=e,n-=t,s===0?n>0?0:4:s===1?n+6:2-n},ur=new WeakMap,Jk=function(e,t,s,n,i,o,c){const d=C(this,Ye,Xw).call(this,s,n,i,o);for(let f=0;f<8;f++){const p=(-f+d-c+16)%8,m=u(this,ur)[2*p],w=u(this,ur)[2*p+1];if(e[(s+m)*t+(n+w)]!==0)return p}return-1},Qk=function(e,t,s,n,i,o,c){const d=C(this,Ye,Xw).call(this,s,n,i,o);for(let f=0;f<8;f++){const p=(f+d+c+16)%8,m=u(this,ur)[2*p],w=u(this,ur)[2*p+1];if(e[(s+m)*t+(n+w)]!==0)return p}return-1},Yw=function(e,t,s,n){const i=e.length,o=new Int32Array(i);for(let p=0;p<i;p++)o[p]=e[p]<=n?1:0;for(let p=1;p<s-1;p++)o[p*t]=o[p*t+t-1]=0;for(let p=0;p<t;p++)o[p]=o[t*s-1-p]=0;let c=1,d;const f=[];for(let p=1;p<s-1;p++){d=1;for(let m=1;m<t-1;m++){const w=p*t+m,b=o[w];if(b===0)continue;let A=p,_=m;if(b===1&&o[w-1]===0)c+=1,_-=1;else if(b>=1&&o[w+1]===0)c+=1,_+=1,b>1&&(d=b);else{b!==1&&(d=Math.abs(b));continue}const E=[m,p],T=_===m+1,R={isHole:T,points:E,id:c,parent:0};f.push(R);let N;for(const Q of f)if(Q.id===d){N=Q;break}N?N.isHole?R.parent=T?N.parent:d:R.parent=T?d:N.parent:R.parent=T?d:0;const j=C(this,Ye,Jk).call(this,o,t,p,m,A,_,0);if(j===-1){o[w]=-c,o[w]!==1&&(d=Math.abs(o[w]));continue}let I=u(this,ur)[2*j],F=u(this,ur)[2*j+1];const B=p+I,W=m+F;A=B,_=W;let K=p,te=m;for(;;){const Q=C(this,Ye,Qk).call(this,o,t,K,te,A,_,1);I=u(this,ur)[2*Q],F=u(this,ur)[2*Q+1];const _e=K+I,we=te+F;E.push(we,_e);const pe=K*t+te;if(o[pe+1]===0?o[pe]=-c:o[pe]===1&&(o[pe]=c),_e===p&&we===m&&K===B&&te===W){o[w]!==1&&(d=Math.abs(o[w]));break}else A=K,_=te,K=_e,te=we}}}return f},bm=function(e,t,s,n){if(s-t<=4){for(let B=t;B<s-2;B+=2)n.push(e[B],e[B+1]);return}const i=e[t],o=e[t+1],c=e[s-4]-i,d=e[s-3]-o,f=Math.hypot(c,d),p=c/f,m=d/f,w=p*o-m*i,b=d/c,A=1/f,_=Math.atan(b),E=Math.cos(_),T=Math.sin(_),R=A*(Math.abs(E)+Math.abs(T)),N=A*(1-R+R**2),j=Math.max(Math.atan(Math.abs(T+E)*N),Math.atan(Math.abs(T-E)*N));let I=0,F=t;for(let B=t+2;B<s-2;B+=2){const W=Math.abs(w-p*e[B+1]+m*e[B]);W>I&&(F=B,I=W)}I>(f*j)**2?(C(this,Ye,bm).call(this,e,t,F+2,n),C(this,Ye,bm).call(this,e,F,s,n)):n.push(i,o)},Zk=function(e){const t=[],s=e.length;return C(this,Ye,bm).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},eC=function(e,t,s,n,i,o){const c=new Float32Array(o**2),d=-2*n**2,f=o>>1;for(let _=0;_<o;_++){const E=(_-f)**2;for(let T=0;T<o;T++)c[_*o+T]=Math.exp((E+(T-f)**2)/d)}const p=new Float32Array(256),m=-2*i**2;for(let _=0;_<256;_++)p[_]=Math.exp(_**2/m);const w=e.length,b=new Uint8Array(w),A=new Uint32Array(256);for(let _=0;_<s;_++)for(let E=0;E<t;E++){const T=_*t+E,R=e[T];let N=0,j=0;for(let F=0;F<o;F++){const B=_+F-f;if(!(B<0||B>=s))for(let W=0;W<o;W++){const K=E+W-f;if(K<0||K>=t)continue;const te=e[B*t+K],Q=c[F*o+W]*p[Math.abs(te-R)];N+=te*Q,j+=Q}}const I=b[T]=Math.round(N/j);A[I]++}return[b,A]},tC=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},Jw=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let n=-1/0,i=1/0;for(let c=0,d=s.length;c<d;c++){if(e[(c<<2)+3]===0){n=s[c]=255;continue}const p=s[c]=e[c<<2];p>n&&(n=p),p<i&&(i=p)}const o=255/(n-i);for(let c=0;c<t;c++)s[c]=(s[c]-i)*o;return s},Qw=function(e){let t,s=-1/0,n=-1/0;const i=e.findIndex(d=>d!==0);let o=i,c=i;for(t=i;t<256;t++){const d=e[t];d>s&&(t-o>n&&(n=t-o,c=t-1),s=d,o=t)}for(t=c-1;t>=0&&!(e[t]>e[t+1]);t--);return t},sC=function(e){const t=e,{width:s,height:n}=e,{maxDim:i}=u(this,Bl);let o=s,c=n;if(s>i||n>i){let w=s,b=n,A=Math.log2(Math.max(s,n)/i);const _=Math.floor(A);A=A===_?_-1:_;for(let T=0;T<A;T++){o=Math.ceil(w/2),c=Math.ceil(b/2);const R=new OffscreenCanvas(o,c);R.getContext("2d").drawImage(e,0,0,w,b,0,0,o,c),w=o,b=c,e!==t&&e.close(),e=R.transferToImageBitmap()}const E=Math.min(i/o,i/c);o=Math.round(o*E),c=Math.round(c*E)}const f=new OffscreenCanvas(o,c).getContext("2d",{willReadFrequently:!0});f.filter="grayscale(1)",f.drawImage(e,0,0,e.width,e.height,0,0,o,c);const p=f.getImageData(0,0,o,c).data;return[C(this,Ye,Jw).call(this,p),o,c]},k(Hr,Ye),k(Hr,Bl,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),k(Hr,ur,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Ix extends Wk{constructor(){super(),super.updateProperties({fill:ot._defaultLineColor,"stroke-width":0})}clone(){const e=new Ix;return e.updateAll(this),e}}class Mx extends g0{constructor(e){super(e),super.updateProperties({stroke:ot._defaultLineColor,"stroke-width":1})}clone(){const e=new Mx(this._viewParameters);return e.updateAll(this),e}}var Ka,gn,Xa,Ya;const sn=class sn extends Om{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});k(this,Ka,!1);k(this,gn,null);k(this,Xa,null);k(this,Ya,null);this._willKeepAspectRatio=!0,S(this,Xa,t.signatureData||null),S(this,gn,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){ot.initialize(t,s),this._defaultDrawingOptions=new Ix,this._defaultDrawnSignatureOptions=new Mx(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return $e(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,gn)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(u(this,Xa)){const{lines:i,mustSmooth:o,areContours:c,description:d,uuid:f,heightInPage:p}=u(this,Xa),{rawDims:{pageWidth:m,pageHeight:w},rotation:b}=this.parent.viewport,A=Hr.processDrawnLines({lines:i,pageWidth:m,pageHeight:w,rotation:b,innerMargin:sn._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(A,p,d,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){S(this,Ya,t),this.addEditToolbar()}getUuid(){return u(this,Ya)}get description(){return u(this,gn)}set description(t){S(this,gn,t),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:n,width:i,height:o}=u(this,Xa),c=Math.max(i,o),d=Hr.processDrawnLines({lines:{curves:t.map(f=>({points:f})),thickness:n,width:i,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:d.outline}}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.signatureManager&&u(this,gn)!==null&&(await t.addEditSignatureButton(this._uiManager.signatureManager,u(this,Ya),u(this,gn)),t.show()),t):null}addSignature(t,s,n,i){const{x:o,y:c}=this,{outline:d}=S(this,Xa,t);S(this,Ka,d instanceof Kw),S(this,gn,n),this.div.setAttribute("data-l10n-args",JSON.stringify({description:n}));let f;u(this,Ka)?f=sn.getDefaultDrawingOptions():(f=sn._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:f});const[p,m]=this.parentDimensions,[,w]=this.pageDimensions;let b=s/w;b=b>=1?.5:b,this.width*=b/this.height,this.width>=1&&(b*=.9/this.width,this.width=.9),this.height=b,this.setDims(p*this.width,m*this.height),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:n},rotation:i}=this.parent.viewport;return Hr.process(t,s,n,i,sn._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:n,pageHeight:i},rotation:o}=this.parent.viewport;return Hr.extractContoursFromText(t,s,n,i,o,sn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:n},rotation:i}=this.parent.viewport;return Hr.processDrawnLines({lines:t,pageWidth:s,pageHeight:n,rotation:i,innerMargin:sn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=sn.getDefaultDrawingOptions():(this._drawingOptions=sn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:n,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,c={annotationType:Te.SIGNATURE,isSignature:!0,areContours:u(this,Ka),color:[0,0,0],thickness:u(this,Ka)?0:o,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(c.paths={lines:s,points:n},c.uuid=u(this,Ya),c.isCopy=!0):c.lines=s,u(this,gn)&&(c.accessibilityData={type:"Figure",alt:u(this,gn)}),c}static deserializeDraw(t,s,n,i,o,c){return c.areContours?Kw.deserialize(t,s,n,i,o,c):Sp.deserialize(t,s,n,i,o,c)}static async deserialize(t,s,n){var o;const i=await super.deserialize(t,s,n);return S(i,Ka,t.areContours),S(i,gn,((o=t.accessibilityData)==null?void 0:o.alt)||""),S(i,Ya,t.uuid),i}};Ka=new WeakMap,gn=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,ee(sn,"_type","signature"),ee(sn,"_editorType",Te.SIGNATURE),ee(sn,"_defaultDrawingOptions",null);let Zw=sn;var pt,Zt,Ja,Mi,Qa,eh,Di,Ul,Br,mn,th,Ge,xd,bd,_m,Sm,Am,tx,Em,nC;class ex extends ot{constructor(t){super({...t,name:"stampEditor"});k(this,Ge);k(this,pt,null);k(this,Zt,null);k(this,Ja,null);k(this,Mi,null);k(this,Qa,null);k(this,eh,"");k(this,Di,null);k(this,Ul,!1);k(this,Br,null);k(this,mn,!1);k(this,th,!1);S(this,Mi,t.bitmapUrl),S(this,Qa,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){ot.initialize(t,s)}static isHandlingMimeForPasting(t){return Lm.includes(t)}static paste(t,s){s.pasteEditor({mode:Te.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,d=await n.guess({name:"altText",request:{data:i,width:o,height:c,channels:i.length/(o*c)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const f=d.output;return await this.setGuessedAltText(f),s&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var t;u(this,Zt)&&(S(this,pt,null),this._uiManager.imageManager.deleteId(u(this,Zt)),(t=u(this,Di))==null||t.remove(),S(this,Di,null),u(this,Br)&&(clearTimeout(u(this,Br)),S(this,Br,null))),super.remove()}rebuild(){if(!this.parent){u(this,Zt)&&C(this,Ge,_m).call(this);return}super.rebuild(),this.div!==null&&(u(this,Zt)&&u(this,Di)===null&&C(this,Ge,_m).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,Ja)||u(this,pt)||u(this,Mi)||u(this,Qa)||u(this,Zt)||u(this,Ul))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),u(this,Ul)||(u(this,pt)?C(this,Ge,Sm).call(this):C(this,Ge,_m).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(S(this,Zt,n),i&&S(this,pt,i),S(this,Ul,!1),C(this,Ge,Sm).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Br)!==null&&clearTimeout(u(this,Br)),S(this,Br,setTimeout(()=>{S(this,Br,null),C(this,Ge,tx).call(this)},200))}copyCanvas(t,s,n=!1){var b;t||(t=224);const{width:i,height:o}=u(this,pt),c=new gr;let d=u(this,pt),f=i,p=o,m=null;if(s){if(i>s||o>s){const W=Math.min(s/i,s/o);f=Math.floor(i*W),p=Math.floor(o*W)}m=document.createElement("canvas");const A=m.width=Math.ceil(f*c.sx),_=m.height=Math.ceil(p*c.sy);u(this,mn)||(d=C(this,Ge,Am).call(this,A,_));const E=m.getContext("2d");E.filter=this._uiManager.hcmFilter;let T="white",R="#cfcfd8";this._uiManager.hcmFilter!=="none"?R="black":(b=window.matchMedia)!=null&&b.call(window,"(prefers-color-scheme: dark)").matches&&(T="#8f8f9d",R="#42414d");const N=15,j=N*c.sx,I=N*c.sy,F=new OffscreenCanvas(j*2,I*2),B=F.getContext("2d");B.fillStyle=T,B.fillRect(0,0,j*2,I*2),B.fillStyle=R,B.fillRect(0,0,j,I),B.fillRect(j,I,j,I),E.fillStyle=E.createPattern(F,"repeat"),E.fillRect(0,0,A,_),E.drawImage(d,0,0,d.width,d.height,0,0,A,_)}let w=null;if(n){let A,_;if(c.symmetric&&d.width<t&&d.height<t)A=d.width,_=d.height;else if(d=u(this,pt),i>t||o>t){const R=Math.min(t/i,t/o);A=Math.floor(i*R),_=Math.floor(o*R),u(this,mn)||(d=C(this,Ge,Am).call(this,A,_))}const T=new OffscreenCanvas(A,_).getContext("2d",{willReadFrequently:!0});T.drawImage(d,0,0,d.width,d.height,0,0,A,_),w={width:A,height:_,data:T.getImageData(0,0,A,_).data}}return{canvas:m,width:f,height:p,imageData:w}}static async deserialize(t,s,n){var E;let i=null,o=!1;if(t instanceof yk){const{data:{rect:T,rotation:R,id:N,structParent:j,popupRef:I},container:F,parent:{page:{pageNumber:B}},canvas:W}=t;let K,te;W?(delete t.canvas,{id:K,bitmap:te}=n.imageManager.getFromCanvas(F.id,W),W.remove()):(o=!0,t._hasNoCanvas=!0);const Q=((E=await s._structTree.getAriaAttributes(`${Ax}${N}`))==null?void 0:E.get("aria-label"))||"";i=t={annotationType:Te.STAMP,bitmapId:K,bitmap:te,pageIndex:B-1,rect:T.slice(0),rotation:R,id:N,deleted:!1,accessibilityData:{decorative:!1,altText:Q},isSvg:!1,structParent:j,popupRef:I}}const c=await super.deserialize(t,s,n),{rect:d,bitmap:f,bitmapUrl:p,bitmapId:m,isSvg:w,accessibilityData:b}=t;o?(n.addMissingCanvas(t.id,c),S(c,Ul,!0)):m&&n.imageManager.isValidId(m)?(S(c,Zt,m),f&&S(c,pt,f)):S(c,Mi,p),S(c,mn,w);const[A,_]=c.pageDimensions;return c.width=(d[2]-d[0])/A,c.height=(d[3]-d[1])/_,c.annotationElementId=t.id||null,b&&(c.altTextData=b),c._initialData=i,S(c,th,!!i),c}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Te.STAMP,bitmapId:u(this,Zt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,mn),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=C(this,Ge,Em).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const d=C(this,Ge,nC).call(this,n);if(d.isSame)return null;d.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,s===null)return n;s.stamps||(s.stamps=new Map);const c=u(this,mn)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!s.stamps.has(u(this,Zt)))s.stamps.set(u(this,Zt),{area:c,serialized:n}),n.bitmap=C(this,Ge,Em).call(this,!1);else if(u(this,mn)){const d=s.stamps.get(u(this,Zt));c>d.area&&(d.area=c,d.serialized.bitmap.close(),d.serialized.bitmap=C(this,Ge,Em).call(this,!1))}return n}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}pt=new WeakMap,Zt=new WeakMap,Ja=new WeakMap,Mi=new WeakMap,Qa=new WeakMap,eh=new WeakMap,Di=new WeakMap,Ul=new WeakMap,Br=new WeakMap,mn=new WeakMap,th=new WeakMap,Ge=new WeakSet,xd=function(t,s=!1){if(!t){this.remove();return}S(this,pt,t.bitmap),s||(S(this,Zt,t.id),S(this,mn,t.isSvg)),t.file&&S(this,eh,t.file.name),C(this,Ge,Sm).call(this)},bd=function(){if(S(this,Ja,null),this._uiManager.enableWaiting(!1),!!u(this,Di)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,pt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,pt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},_m=function(){if(u(this,Zt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,Zt)).then(n=>C(this,Ge,xd).call(this,n,!0)).finally(()=>C(this,Ge,bd).call(this));return}if(u(this,Mi)){const n=u(this,Mi);S(this,Mi,null),this._uiManager.enableWaiting(!0),S(this,Ja,this._uiManager.imageManager.getFromUrl(n).then(i=>C(this,Ge,xd).call(this,i)).finally(()=>C(this,Ge,bd).call(this)));return}if(u(this,Qa)){const n=u(this,Qa);S(this,Qa,null),this._uiManager.enableWaiting(!0),S(this,Ja,this._uiManager.imageManager.getFromFile(n).then(i=>C(this,Ge,xd).call(this,i)).finally(()=>C(this,Ge,bd).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Lm.join(",");const s=this._uiManager._signal;S(this,Ja,new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,Ge,xd).call(this,i)}n()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:s})}).finally(()=>C(this,Ge,bd).call(this))),t.click()},Sm=function(){var m;const{div:t}=this;let{width:s,height:n}=u(this,pt);const[i,o]=this.pageDimensions,c=.75;if(this.width)s=this.width*i,n=this.height*o;else if(s>c*i||n>c*o){const w=Math.min(c*i/s,c*o/n);s*=w,n*=w}const[d,f]=this.parentDimensions;this.setDims(s*d/i,n*f/o),this._uiManager.enableWaiting(!1);const p=S(this,Di,document.createElement("canvas"));p.setAttribute("role","img"),this.addContainer(p),this.width=s/i,this.height=n/o,(m=this._initialOptions)!=null&&m.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),C(this,Ge,tx).call(this),u(this,th)||(this.parent.addUndoableEditor(this),S(this,th,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,eh)&&this.div.setAttribute("aria-description",u(this,eh))},Am=function(t,s){const{width:n,height:i}=u(this,pt);let o=n,c=i,d=u(this,pt);for(;o>2*t||c>2*s;){const f=o,p=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*s&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const m=new OffscreenCanvas(o,c);m.getContext("2d").drawImage(d,0,0,f,p,0,0,o,c),d=m.transferToImageBitmap()}return d},tx=function(){const[t,s]=this.parentDimensions,{width:n,height:i}=this,o=new gr,c=Math.ceil(n*t*o.sx),d=Math.ceil(i*s*o.sy),f=u(this,Di);if(!f||f.width===c&&f.height===d)return;f.width=c,f.height=d;const p=u(this,mn)?u(this,pt):C(this,Ge,Am).call(this,c,d),m=f.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(p,0,0,p.width,p.height,0,0,c,d)},Em=function(t){if(t){if(u(this,mn)){const i=this._uiManager.imageManager.getSvgUrl(u(this,Zt));if(i)return i}const s=document.createElement("canvas");return{width:s.width,height:s.height}=u(this,pt),s.getContext("2d").drawImage(u(this,pt),0,0),s.toDataURL()}if(u(this,mn)){const[s,n]=this.pageDimensions,i=Math.round(this.width*s*Vi.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*Vi.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(i,o);return c.getContext("2d").drawImage(u(this,pt),0,0,u(this,pt).width,u(this,pt).height,0,0,i,o),c.transferToImageBitmap()}return structuredClone(u(this,pt))},nC=function(t){var c;const{pageIndex:s,accessibilityData:{altText:n}}=this._initialData,i=t.pageIndex===s,o=(((c=t.accessibilityData)==null?void 0:c.alt)||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},ee(ex,"_type","stamp"),ee(ex,"_editorType",Te.STAMP);var zl,sh,Ur,Za,Oi,On,eo,nh,Hl,hr,Fi,_s,$i,me,to,gt,rC,Er,sx,nx,km;const Zn=class Zn{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:n,accessibilityManager:i,annotationLayer:o,drawLayer:c,textLayer:d,viewport:f,l10n:p}){k(this,gt);k(this,zl);k(this,sh,!1);k(this,Ur,null);k(this,Za,null);k(this,Oi,null);k(this,On,new Map);k(this,eo,!1);k(this,nh,!1);k(this,Hl,!1);k(this,hr,null);k(this,Fi,null);k(this,_s,null);k(this,$i,null);k(this,me);const m=[...u(Zn,to).values()];if(!Zn._initialized){Zn._initialized=!0;for(const w of m)w.initialize(p,e)}e.registerEditorTypes(m),S(this,me,e),this.pageIndex=t,this.div=s,S(this,zl,i),S(this,Ur,o),this.viewport=f,S(this,_s,d),this.drawLayer=c,this._structTree=n,u(this,me).addLayer(this)}get isEmpty(){return u(this,On).size===0}get isInvisible(){return this.isEmpty&&u(this,me).getMode()===Te.NONE}updateToolbar(e){u(this,me).updateToolbar(e)}updateMode(e=u(this,me).getMode()){switch(C(this,gt,km).call(this),e){case Te.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Te.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Te.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of u(Zn,to).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,_s))==null?void 0:t.div)}setEditingState(e){u(this,me).setEditingState(e)}addCommands(e){u(this,me).addCommands(e)}cleanUndoStack(e){u(this,me).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,Ur))==null||t.div.classList.toggle("disabled",!e)}async enable(){S(this,Hl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const s of u(this,On).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(u(this,me).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!u(this,Ur)){S(this,Hl,!1);return}const t=u(this,Ur).getEditableAnnotations();for(const s of t){if(s.hide(),u(this,me).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const n=await this.deserialize(s);n&&(this.addOrRebuild(n),n.enableEditing())}S(this,Hl,!1)}disable(){var n;S(this,nh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of u(this,On).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(n=this.getEditableAnnotation(i.annotationElementId))==null||n.show(),i.remove()}if(u(this,Ur)){const i=u(this,Ur).getEditableAnnotations();for(const o of i){const{id:c}=o.data;if(u(this,me).isDeletedAnnotationElement(c))continue;let d=t.get(c);if(d){d.resetAnnotationElement(o),d.show(!1),o.show();continue}d=e.get(c),d&&(u(this,me).addChangedExistingAnnotation(d),d.renderAnnotationElement(o)&&d.show(!1)),o.show()}}C(this,gt,km).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const i of u(Zn,to).values())s.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,nh,!1)}getEditableAnnotation(e){var t;return((t=u(this,Ur))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,me).getActive()!==e&&u(this,me).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,_s))!=null&&e.div&&!u(this,$i)){S(this,$i,new AbortController);const t=u(this,me).combinedSignal(u(this,$i));u(this,_s).div.addEventListener("pointerdown",C(this,gt,rC).bind(this),{signal:t}),u(this,_s).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,_s))!=null&&e.div&&u(this,$i)&&(u(this,$i).abort(),S(this,$i,null),u(this,_s).div.classList.remove("highlighting"))}enableClick(){if(u(this,Za))return;S(this,Za,new AbortController);const e=u(this,me).combinedSignal(u(this,Za));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,Za))==null||e.abort(),S(this,Za,null)}attach(e){u(this,On).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,me).isDeletedAnnotationElement(t)&&u(this,me).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,On).delete(e.id),(t=u(this,zl))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,nh)&&e.annotationElementId&&u(this,me).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,me).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,me).addDeletedAnnotationElement(e.annotationElementId),ot.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,me).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,Hl)),u(this,me).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,Oi)&&(e._focusEventsAllowed=!1,S(this,Oi,setTimeout(()=>{S(this,Oi,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,me)._signal}),t.focus())},0))),e._structTreeParentId=(s=u(this,zl))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return u(this,me).getId()}combinedSignal(e){return u(this,me).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,gt,Er))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await u(this,me).updateMode(e.mode);const{offsetX:s,offsetY:n}=C(this,gt,nx).call(this),i=this.getNextId(),o=C(this,gt,sx).call(this,{parent:this,id:i,x:s,y:n,uiManager:u(this,me),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=u(Zn,to).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,me)))||null}createAndAddNewEditor(e,t,s={}){const n=this.getNextId(),i=C(this,gt,sx).call(this,{parent:this,id:n,x:e.offsetX,y:e.offsetY,uiManager:u(this,me),isCentered:t,...s});return i&&this.add(i),i}addNewEditor(e={}){this.createAndAddNewEditor(C(this,gt,nx).call(this),!0,e)}setSelected(e){u(this,me).setSelected(e)}toggleSelected(e){u(this,me).toggleSelected(e)}unselect(e){u(this,me).unselect(e)}pointerup(e){var n;const{isMac:t}=ts.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!u(this,eo)||(S(this,eo,!1),(n=u(this,gt,Er))!=null&&n.isDrawer&&u(this,gt,Er).supportMultipleDrawings))return;if(!u(this,sh)){S(this,sh,!0);return}const s=u(this,me).getMode();if(s===Te.STAMP||s===Te.SIGNATURE){u(this,me).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var n;if(u(this,me).getMode()===Te.HIGHLIGHT&&this.enableTextSelection(),u(this,eo)){S(this,eo,!1);return}const{isMac:t}=ts.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(S(this,eo,!0),(n=u(this,gt,Er))!=null&&n.isDrawer){this.startDrawingSession(e);return}const s=u(this,me).getActive();S(this,sh,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,hr)){u(this,gt,Er).startDrawing(this,u(this,me),!1,e);return}u(this,me).setCurrentDrawingSession(this),S(this,hr,new AbortController);const t=u(this,me).combinedSignal(u(this,hr));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(S(this,Fi,null),this.commitOrRemove())},{signal:t}),u(this,gt,Er).startDrawing(this,u(this,me),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&S(this,Fi,t);return}u(this,Fi)&&setTimeout(()=>{var t;(t=u(this,Fi))==null||t.focus(),S(this,Fi,null)},0)}endDrawingSession(e=!1){return u(this,hr)?(u(this,me).setCurrentDrawingSession(null),u(this,hr).abort(),S(this,hr,null),S(this,Fi,null),u(this,gt,Er).endDrawing(e)):null}findNewParent(e,t,s){const n=u(this,me).findParent(t,s);return n===null||n===this?!1:(n.changeParent(e),!0)}commitOrRemove(){return u(this,hr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,hr)&&u(this,gt,Er).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,me).getActive())==null?void 0:e.parent)===this&&(u(this,me).commitOrRemove(),u(this,me).setActiveEditor(null)),u(this,Oi)&&(clearTimeout(u(this,Oi)),S(this,Oi,null));for(const s of u(this,On).values())(t=u(this,zl))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,u(this,On).clear(),u(this,me).removeLayer(this)}render({viewport:e}){this.viewport=e,ro(this.div,e);for(const t of u(this,me).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,me).commitOrRemove(),C(this,gt,km).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,ro(this.div,{rotation:s}),t!==s)for(const n of u(this,On).values())n.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,me).viewParameters.realScale}};zl=new WeakMap,sh=new WeakMap,Ur=new WeakMap,Za=new WeakMap,Oi=new WeakMap,On=new WeakMap,eo=new WeakMap,nh=new WeakMap,Hl=new WeakMap,hr=new WeakMap,Fi=new WeakMap,_s=new WeakMap,$i=new WeakMap,me=new WeakMap,to=new WeakMap,gt=new WeakSet,rC=function(e){u(this,me).unselectAll();const{target:t}=e;if(t===u(this,_s).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,_s).div.contains(t)){const{isMac:s}=ts.platform;if(e.button!==0||e.ctrlKey&&s)return;u(this,me).showAllEditors("highlight",!0,!0),u(this,_s).div.classList.add("free"),this.toggleDrawing(),Dm.startHighlighting(this,u(this,me).direction==="ltr",{target:u(this,_s).div,x:e.x,y:e.y}),u(this,_s).div.addEventListener("pointerup",()=>{u(this,_s).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,me)._signal}),e.preventDefault()}},Er=function(){return u(Zn,to).get(u(this,me).getMode())},sx=function(e){const t=u(this,gt,Er);return t?new t.prototype.constructor(e):null},nx=function(){const{x:e,y:t,width:s,height:n}=this.div.getBoundingClientRect(),i=Math.max(0,e),o=Math.max(0,t),c=Math.min(window.innerWidth,e+s),d=Math.min(window.innerHeight,t+n),f=(i+c)/2-e,p=(o+d)/2-t,[m,w]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:m,offsetY:w}},km=function(){for(const e of u(this,On).values())e.isEmpty()&&e.remove()},ee(Zn,"_initialized",!1),k(Zn,to,new Map([Iw,qw,ex,Dm,Zw].map(e=>[e._editorType,e])));let Fm=Zn;var dr,js,Vl,hp,r0,iC,Vr,rx,aC,ix;const $t=class $t{constructor({pageIndex:e}){k(this,Vr);k(this,dr,null);k(this,js,new Map);k(this,Vl,new Map);this.pageIndex=e}setParent(e){if(!u(this,dr)){S(this,dr,e);return}if(u(this,dr)!==e){if(u(this,js).size>0)for(const t of u(this,js).values())t.remove(),e.append(t);S(this,dr,e)}}static get _svgFactory(){return $e(this,"_svgFactory",new Dd)}draw(e,t=!1,s=!1){const n=Cs($t,hp)._++,i=C(this,Vr,rx).call(this),o=$t._svgFactory.createElement("defs");i.append(o);const c=$t._svgFactory.createElement("path");o.append(c);const d=`path_p${this.pageIndex}_${n}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,Vl).set(n,c);const f=s?C(this,Vr,aC).call(this,o,d):null,p=$t._svgFactory.createElement("use");return i.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(i,e),u(this,js).set(n,i),{id:n,clipPathId:`url(#${f})`}}drawOutline(e,t){const s=Cs($t,hp)._++,n=C(this,Vr,rx).call(this),i=$t._svgFactory.createElement("defs");n.append(i);const o=$t._svgFactory.createElement("path");i.append(o);const c=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const m=$t._svgFactory.createElement("mask");i.append(m),d=`mask_p${this.pageIndex}_${s}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");const w=$t._svgFactory.createElement("rect");m.append(w),w.setAttribute("width","1"),w.setAttribute("height","1"),w.setAttribute("fill","white");const b=$t._svgFactory.createElement("use");m.append(b),b.setAttribute("href",`#${c}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const f=$t._svgFactory.createElement("use");n.append(f),f.setAttribute("href",`#${c}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return n.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(n,e),u(this,js).set(s,n),s}finalizeDraw(e,t){u(this,Vl).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var d;if(!t)return;const{root:s,bbox:n,rootClass:i,path:o}=t,c=typeof e=="number"?u(this,js).get(e):e;if(c){if(s&&C(this,Vr,ix).call(this,c,s),n&&C(d=$t,r0,iC).call(d,c,n),i){const{classList:f}=c;for(const[p,m]of Object.entries(i))f.toggle(p,m)}if(o){const p=c.firstChild.firstChild;C(this,Vr,ix).call(this,p,o)}}}updateParent(e,t){if(t===this)return;const s=u(this,js).get(e);s&&(u(t,dr).append(s),u(this,js).delete(e),u(t,js).set(e,s))}remove(e){u(this,Vl).delete(e),u(this,dr)!==null&&(u(this,js).get(e).remove(),u(this,js).delete(e))}destroy(){S(this,dr,null);for(const e of u(this,js).values())e.remove();u(this,js).clear(),u(this,Vl).clear()}};dr=new WeakMap,js=new WeakMap,Vl=new WeakMap,hp=new WeakMap,r0=new WeakSet,iC=function(e,[t,s,n,i]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*n}%`,o.height=`${100*i}%`},Vr=new WeakSet,rx=function(){const e=$t._svgFactory.create(1,1,!0);return u(this,dr).append(e),e.setAttribute("aria-hidden",!0),e},aC=function(e,t){const s=$t._svgFactory.createElement("clipPath");e.append(s);const n=`clip_${t}`;s.setAttribute("id",n),s.setAttribute("clipPathUnits","objectBoundingBox");const i=$t._svgFactory.createElement("use");return s.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),n},ix=function(e,t){for(const[s,n]of Object.entries(t))n===null?e.removeAttribute(s):e.setAttribute(s,n)},k($t,r0),k($t,hp,0);let $m=$t;globalThis._pdfjsTestingUtils={HighlightOutliner:Dw};globalThis.pdfjsLib={AbortException:Hi,AnnotationEditorLayer:Fm,AnnotationEditorParamsType:Ue,AnnotationEditorType:Te,AnnotationEditorUIManager:io,AnnotationLayer:Lx,AnnotationMode:zr,AnnotationType:kt,build:ak,ColorPicker:Od,createValidAbsoluteUrl:bx,DOMSVGFactory:Dd,DrawLayer:$m,FeatureTest:ts,fetchData:uh,getDocument:Tx,getFilenameFromUrl:ZA,getPdfFilenameFromUrl:eE,getUuid:Sx,getXfaPageViewport:tE,GlobalWorkerOptions:Fn,ImageKind:Ed,InvalidPDFException:jm,isDataScheme:wp,isPdfFile:d0,isValidExplicitDest:DE,MathClamp:Ss,noContextMenu:Hn,normalizeUnicode:JA,OPS:Rd,OutputScale:gr,PasswordResponses:XA,PDFDataRangeTransport:Nx,PDFDateString:f0,PDFWorker:ih,PermissionFlag:KA,PixelsPerInch:Vi,RenderingCancelledException:h0,ResponseException:jd,setLayerDimensions:ro,shadow:$e,SignatureExtractor:Hr,stopEvent:Tt,SupportedImageMimeTypes:Lm,TextLayer:Id,TouchManager:Ld,updateUrlHash:_x,Util:ve,VerbosityLevel:mp,version:ik,XfaLayer:Rx};const II=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Hi,AnnotationEditorLayer:Fm,AnnotationEditorParamsType:Ue,AnnotationEditorType:Te,AnnotationEditorUIManager:io,AnnotationLayer:Lx,AnnotationMode:zr,AnnotationType:kt,ColorPicker:Od,DOMSVGFactory:Dd,DrawLayer:$m,FeatureTest:ts,GlobalWorkerOptions:Fn,ImageKind:Ed,InvalidPDFException:jm,MathClamp:Ss,OPS:Rd,OutputScale:gr,PDFDataRangeTransport:Nx,PDFDateString:f0,PDFWorker:ih,PasswordResponses:XA,PermissionFlag:KA,PixelsPerInch:Vi,RenderingCancelledException:h0,ResponseException:jd,SignatureExtractor:Hr,SupportedImageMimeTypes:Lm,TextLayer:Id,TouchManager:Ld,Util:ve,VerbosityLevel:mp,XfaLayer:Rx,build:ak,createValidAbsoluteUrl:bx,fetchData:uh,getDocument:Tx,getFilenameFromUrl:ZA,getPdfFilenameFromUrl:eE,getUuid:Sx,getXfaPageViewport:tE,isDataScheme:wp,isPdfFile:d0,isValidExplicitDest:DE,noContextMenu:Hn,normalizeUnicode:JA,setLayerDimensions:ro,shadow:$e,stopEvent:Tt,updateUrlHash:_x,version:ik},Symbol.toStringTag,{value:"Module"})),MI=["onCopy","onCut","onPaste"],DI=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],OI=["onFocus","onBlur"],FI=["onInput","onInvalid","onReset","onSubmit"],$I=["onLoad","onError"],BI=["onKeyDown","onKeyPress","onKeyUp"],UI=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],zI=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],HI=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],VI=["onSelect"],WI=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],GI=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],qI=["onScroll"],KI=["onWheel"],XI=["onAnimationStart","onAnimationEnd","onAnimationIteration"],YI=["onTransitionEnd"],JI=["onToggle"],QI=["onChange"],ZI=[...MI,...DI,...OI,...FI,...$I,...BI,...UI,...zI,...HI,...VI,...WI,...GI,...qI,...KI,...XI,...YI,...QI,...JI];function oC(l,e){const t={};for(const s of ZI){const n=l[s];n&&(e?t[s]=i=>n(i,e(s)):t[s]=n)}return t}function Ap(l){let e=!1;return{promise:new Promise((s,n)=>{l.then(i=>!e&&s(i)).catch(i=>!e&&n(i))}),cancel(){e=!0}}}function lC(l){var e,t,s="";if(typeof l=="string"||typeof l=="number")s+=l;else if(typeof l=="object")if(Array.isArray(l)){var n=l.length;for(e=0;e<n;e++)l[e]&&(t=lC(l[e]))&&(s&&(s+=" "),s+=t)}else for(t in l)l[t]&&(s&&(s+=" "),s+=t);return s}function m0(){for(var l,e,t=0,s="",n=arguments.length;t<n;t++)(l=arguments[t])&&(e=lC(l))&&(s&&(s+=" "),s+=e);return s}var eM="Invariant failed";function nt(l,e){if(!l)throw new Error(eM)}var Ry,HS;function tM(){if(HS)return Ry;HS=1;var l=function(){};return Ry=l,Ry}var sM=tM();const As=lx(sM);var VS=Object.prototype.hasOwnProperty;function WS(l,e,t){for(t of l.keys())if(Xc(t,e))return t}function Xc(l,e){var t,s,n;if(l===e)return!0;if(l&&e&&(t=l.constructor)===e.constructor){if(t===Date)return l.getTime()===e.getTime();if(t===RegExp)return l.toString()===e.toString();if(t===Array){if((s=l.length)===e.length)for(;s--&&Xc(l[s],e[s]););return s===-1}if(t===Set){if(l.size!==e.size)return!1;for(s of l)if(n=s,n&&typeof n=="object"&&(n=WS(e,n),!n)||!e.has(n))return!1;return!0}if(t===Map){if(l.size!==e.size)return!1;for(s of l)if(n=s[0],n&&typeof n=="object"&&(n=WS(e,n),!n)||!Xc(s[1],e.get(n)))return!1;return!0}if(t===ArrayBuffer)l=new Uint8Array(l),e=new Uint8Array(e);else if(t===DataView){if((s=l.byteLength)===e.byteLength)for(;s--&&l.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(l)){if((s=l.byteLength)===e.byteLength)for(;s--&&l[s]===e[s];);return s===-1}if(!t||typeof l=="object"){s=0;for(t in l)if(VS.call(l,t)&&++s&&!VS.call(e,t)||!(t in e)||!Xc(l[t],e[t]))return!1;return Object.keys(e).length===s}}return l!==l&&e!==e}const cC=D.createContext(null);function Yc({children:l,type:e}){return y.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:l})}const nM="noopener noreferrer nofollow";class rM{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return nt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){nt(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{nt(this.pdfDocument),nt(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{nt(Array.isArray(t));const s=t[0];new Promise(n=>{nt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(i=>{n(i)}).catch(()=>{nt(!1)}):typeof s=="number"?n(s):nt(!1)}).then(n=>{const i=n+1;nt(this.pdfViewer),nt(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:n,pageNumber:i})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;nt(this.pdfViewer),nt(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||nM,e.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const GS={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},v0=typeof window<"u",uC=v0&&window.location.protocol==="file:";function iM(l){return typeof l<"u"}function No(l){return iM(l)&&l!==null}function aM(l){return typeof l=="string"}function oM(l){return l instanceof ArrayBuffer}function lM(l){return nt(v0),l instanceof Blob}function ax(l){return aM(l)&&/^data:/.test(l)}function qS(l){nt(ax(l));const[e="",t=""]=l.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function cM(){return v0&&window.devicePixelRatio||1}const hC="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function KS(){As(!uC,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${hC}`)}function uM(){As(!uC,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${hC}`)}function Kl(l){l!=null&&l.cancel&&l.cancel()}function ox(l,e){return Object.defineProperty(l,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(l,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(l,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(l,"originalHeight",{get(){return this.view[3]},configurable:!0}),l}function hM(l){return l.name==="RenderingCancelledException"}function dM(l){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=n=>{if(!n.target)return t(new Error("Error while reading a file."));const{error:i}=n.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(l)})}function fM(l,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return l}}function ah(){return D.useReducer(fM,{value:void 0,error:void 0})}var XS=function(l,e){var t={};for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&e.indexOf(s)<0&&(t[s]=l[s]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(l);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(l,s[n])&&(t[s[n]]=l[s[n]]);return t};const{PDFDataRangeTransport:pM}=II,gM=(l,e)=>{switch(e){case GS.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");l(t);break}case GS.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");l(t);break}}};function YS(l){return typeof l=="object"&&l!==null&&("data"in l||"range"in l||"url"in l)}const mM=D.forwardRef(function(e,t){var{children:s,className:n,error:i="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:c,file:d,inputRef:f,imageResourcesPath:p,loading:m="Loading PDF",noData:w="No PDF file specified.",onItemClick:b,onLoadError:A,onLoadProgress:_,onLoadSuccess:E,onPassword:T=gM,onSourceError:R,onSourceSuccess:N,options:j,renderMode:I,rotate:F,scale:B}=e,W=XS(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate","scale"]);const[K,te]=ah(),{value:Q,error:_e}=K,[we,pe]=ah(),{value:Ee,error:Z}=we,X=D.useRef(new rM),Y=D.useRef([]),oe=D.useRef(void 0),ne=D.useRef(void 0);d&&d!==oe.current&&YS(d)&&(As(!Xc(d,oe.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),oe.current=d),j&&j!==ne.current&&(As(!Xc(j,ne.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ne.current=j);const $=D.useRef({scrollPageIntoView:Xe=>{const{dest:St,pageNumber:ht,pageIndex:_n=ht-1}=Xe;if(b){b({dest:St,pageIndex:_n,pageNumber:ht});return}const Wr=Y.current[_n];if(Wr){Wr.scrollIntoView();return}As(!1,`An internal link leading to page ${ht} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});D.useImperativeHandle(t,()=>({linkService:X,pages:Y,viewer:$}),[]);function V(){N&&N()}function le(){_e&&(As(!1,_e.toString()),R&&R(_e))}function Se(){te({type:"RESET"})}D.useEffect(Se,[d,te]);const ke=D.useCallback(async()=>{if(!d)return null;if(typeof d=="string")return ax(d)?{data:qS(d)}:(KS(),{url:d});if(d instanceof pM)return{range:d};if(oM(d))return{data:d};if(v0&&lM(d))return{data:await dM(d)};if(nt(typeof d=="object"),nt(YS(d)),"url"in d&&typeof d.url=="string"){if(ax(d.url)){const{url:Xe}=d,St=XS(d,["url"]),ht=qS(Xe);return Object.assign({data:ht},St)}KS()}return d},[d]);D.useEffect(()=>{const Xe=Ap(ke());return Xe.promise.then(St=>{te({type:"RESOLVE",value:St})}).catch(St=>{te({type:"REJECT",error:St})}),()=>{Kl(Xe)}},[ke,te]),D.useEffect(()=>{if(!(typeof Q>"u")){if(Q===!1){le();return}V()}},[Q]);function Ce(){Ee&&(E&&E(Ee),Y.current=new Array(Ee.numPages),X.current.setDocument(Ee))}function ye(){Z&&(As(!1,Z.toString()),A&&A(Z))}D.useEffect(function(){pe({type:"RESET"})},[pe,Q]),D.useEffect(function(){if(!Q)return;const St=j?Object.assign(Object.assign({},Q),j):Q,ht=Tx(St);_&&(ht.onProgress=_),T&&(ht.onPassword=T);const _n=ht,Wr=_n.promise.then(Gr=>{pe({type:"RESOLVE",value:Gr})}).catch(Gr=>{_n.destroyed||pe({type:"REJECT",error:Gr})});return()=>{Wr.finally(()=>_n.destroy())}},[j,pe,Q]),D.useEffect(()=>{if(!(typeof Ee>"u")){if(Ee===!1){ye();return}Ce()}},[Ee]),D.useEffect(function(){X.current.setViewer($.current),X.current.setExternalLinkRel(o),X.current.setExternalLinkTarget(c)},[o,c]);const Le=D.useCallback((Xe,St)=>{Y.current[Xe]=St},[]),ze=D.useCallback(Xe=>{delete Y.current[Xe]},[]),Me=D.useMemo(()=>({imageResourcesPath:p,linkService:X.current,onItemClick:b,pdf:Ee,registerPage:Le,renderMode:I,rotate:F,scale:B,unregisterPage:ze}),[p,b,Ee,Le,I,F,B,ze]),Fs=D.useMemo(()=>oC(W,()=>Ee),[W,Ee]);function bn(){return y.jsx(cC.Provider,{value:Me,children:s})}function jt(){return d?Ee==null?y.jsx(Yc,{type:"loading",children:typeof m=="function"?m():m}):Ee===!1?y.jsx(Yc,{type:"error",children:typeof i=="function"?i():i}):bn():y.jsx(Yc,{type:"no-data",children:typeof w=="function"?w():w})}return y.jsx("div",Object.assign({className:m0("react-pdf__Document",n),ref:f},Fs,{children:jt()}))});function dC(){return D.useContext(cC)}function fC(){for(var l=[],e=0;e<arguments.length;e++)l[e]=arguments[e];var t=l.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(i){for(var o=0,c=t;o<c.length;o++){var d=c[o];typeof d=="function"?d(i):d&&(d.current=i)}}}const pC=D.createContext(null),gC={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},vM=/^H(\d+)$/;function yM(l){return l in gC}function y0(l){return"children"in l}function mC(l){return y0(l)?l.children.length===1&&0 in l.children&&"id"in l.children[0]:!1}function wM(l){const e={};if(y0(l)){const{role:t}=l,s=t.match(vM);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(yM(t)){const n=gC[t];n&&(e.role=n)}}return e}function vC(l){const e={};if(y0(l)){if(l.alt!==void 0&&(e["aria-label"]=l.alt),l.lang!==void 0&&(e.lang=l.lang),mC(l)){const[t]=l.children;if(t){const s=vC(t);return Object.assign(Object.assign({},e),s)}}}else"id"in l&&(e["aria-owns"]=l.id);return e}function xM(l){return l?Object.assign(Object.assign({},wM(l)),vC(l)):null}function yC({className:l,node:e}){const t=D.useMemo(()=>xM(e),[e]),s=D.useMemo(()=>!y0(e)||mC(e)?null:e.children.map((n,i)=>y.jsx(yC,{node:n},i)),[e]);return y.jsx("span",Object.assign({className:l},t,{children:s}))}function w0(){return D.useContext(pC)}function bM(){const l=w0();nt(l);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=l,[s,n]=ah(),{value:i,error:o}=s,{customTextRenderer:c,page:d}=l;function f(){i&&t&&t(i)}function p(){o&&(As(!1,o.toString()),e&&e(o))}return D.useEffect(function(){n({type:"RESET"})},[n,d]),D.useEffect(function(){if(c||!d)return;const w=Ap(d.getStructTree()),b=w;return w.promise.then(A=>{n({type:"RESOLVE",value:A})}).catch(A=>{n({type:"REJECT",error:A})}),()=>Kl(b)},[c,d,n]),D.useEffect(()=>{if(i!==void 0){if(i===!1){p();return}f()}},[i]),i?y.jsx(yC,{className:"react-pdf__Page__structTree structTree",node:i}):null}const JS=zr;function _M(l){const e=w0();nt(e);const t=Object.assign(Object.assign({},e),l),{_className:s,canvasBackground:n,devicePixelRatio:i=cM(),onRenderError:o,onRenderSuccess:c,page:d,renderForms:f,renderTextLayer:p,rotate:m,scale:w}=t,{canvasRef:b}=l;nt(d);const A=D.useRef(null);function _(){d&&c&&c(ox(d,w))}function E(j){hM(j)||(As(!1,j.toString()),o&&o(j))}const T=D.useMemo(()=>d.getViewport({scale:w*i,rotation:m}),[i,d,m,w]),R=D.useMemo(()=>d.getViewport({scale:w,rotation:m}),[d,m,w]);D.useEffect(function(){if(!d)return;d.cleanup();const{current:I}=A;if(!I)return;I.width=T.width,I.height=T.height,I.style.width=`${Math.floor(R.width)}px`,I.style.height=`${Math.floor(R.height)}px`,I.style.visibility="hidden";const F={annotationMode:f?JS.ENABLE_FORMS:JS.ENABLE,canvasContext:I.getContext("2d",{alpha:!1}),viewport:T};n&&(F.background=n);const B=d.render(F),W=B;return B.promise.then(()=>{I.style.visibility="",_()}).catch(E),()=>Kl(W)},[n,d,f,T,R]);const N=D.useCallback(()=>{const{current:j}=A;j&&(j.width=0,j.height=0)},[]);return D.useEffect(()=>N,[N]),y.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:fC(b,A),style:{display:"block",userSelect:"none"},children:p?y.jsx(bM,{}):null})}function SM(l){return"str"in l}function AM(){const l=w0();nt(l);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:n,onRenderTextLayerSuccess:i,page:o,pageIndex:c,pageNumber:d,rotate:f,scale:p}=l;nt(o);const[m,w]=ah(),{value:b,error:A}=m,_=D.useRef(null);As(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){b&&s&&s(b)}function T(){A&&(As(!1,A.toString()),t&&t(A))}D.useEffect(function(){w({type:"RESET"})},[o,w]),D.useEffect(function(){if(!o)return;const W=Ap(o.getTextContent()),K=W;return W.promise.then(te=>{w({type:"RESOLVE",value:te})}).catch(te=>{w({type:"REJECT",error:te})}),()=>Kl(K)},[o,w]),D.useEffect(()=>{if(b!==void 0){if(b===!1){T();return}E()}},[b]);const R=D.useCallback(()=>{i&&i()},[i]),N=D.useCallback(B=>{As(!1,B.toString()),n&&n(B)},[n]);function j(){const B=_.current;B&&B.classList.add("selecting")}function I(){const B=_.current;B&&B.classList.remove("selecting")}const F=D.useMemo(()=>o.getViewport({scale:p,rotation:f}),[o,f,p]);return D.useLayoutEffect(function(){if(!o||!b)return;const{current:W}=_;if(!W)return;W.innerHTML="";const K=o.streamTextContent({includeMarkedContent:!0}),te={container:W,textContentSource:K,viewport:F},Q=new Id(te),_e=Q;return Q.render().then(()=>{const we=document.createElement("div");we.className="endOfContent",W.append(we);const pe=W.querySelectorAll('[role="presentation"]');if(e){let Ee=0;b.items.forEach((Z,X)=>{if(!SM(Z))return;const Y=pe[Ee];if(!Y)return;const oe=e(Object.assign({pageIndex:c,pageNumber:d,itemIndex:X},Z));Y.innerHTML=oe,Ee+=Z.str&&Z.hasEOL?2:1})}R()}).catch(N),()=>Kl(_e)},[e,N,R,o,c,d,b,F]),y.jsx("div",{className:m0("react-pdf__Page__textContent","textLayer"),onMouseUp:I,onMouseDown:j,ref:_})}function EM(){const l=dC(),e=w0();nt(e);const t=Object.assign(Object.assign({},l),e),{imageResourcesPath:s,linkService:n,onGetAnnotationsError:i,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:d,page:f,pdf:p,renderForms:m,rotate:w,scale:b=1}=t;nt(p),nt(f),nt(n);const[A,_]=ah(),{value:E,error:T}=A,R=D.useRef(null);As(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function N(){E&&o&&o(E)}function j(){T&&(As(!1,T.toString()),i&&i(T))}D.useEffect(function(){_({type:"RESET"})},[_,f]),D.useEffect(function(){if(!f)return;const K=Ap(f.getAnnotations()),te=K;return K.promise.then(Q=>{_({type:"RESOLVE",value:Q})}).catch(Q=>{_({type:"REJECT",error:Q})}),()=>{Kl(te)}},[_,f]),D.useEffect(()=>{if(E!==void 0){if(E===!1){j();return}N()}},[E]);function I(){d&&d()}function F(W){As(!1,`${W}`),c&&c(W)}const B=D.useMemo(()=>f.getViewport({scale:b,rotation:w}),[f,w,b]);return D.useEffect(function(){if(!p||!f||!n||!E)return;const{current:K}=R;if(!K)return;const te=B.clone({dontFlip:!0}),Q={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:K,l10n:null,page:f,structTreeLayer:null,viewport:te},_e={annotations:E,annotationStorage:p.annotationStorage,div:K,imageResourcesPath:s,linkService:n,page:f,renderForms:m,viewport:te};K.innerHTML="";try{new Lx(Q).render(_e),I()}catch(we){F(we)}return()=>{}},[E,s,n,f,p,m,B]),y.jsx("div",{className:m0("react-pdf__Page__annotations","annotationLayer"),ref:R})}var kM=function(l,e){var t={};for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&e.indexOf(s)<0&&(t[s]=l[s]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(l);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(l,s[n])&&(t[s[n]]=l[s[n]]);return t};const QS=1;function CM(l){const e=dC(),t=Object.assign(Object.assign({},e),l),{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:n=!0,canvasBackground:i,canvasRef:o,children:c,className:d,customRenderer:f,customTextRenderer:p,devicePixelRatio:m,error:w="Failed to load the page.",height:b,inputRef:A,loading:_="Loading page",noData:E="No page specified.",onGetAnnotationsError:T,onGetAnnotationsSuccess:R,onGetStructTreeError:N,onGetStructTreeSuccess:j,onGetTextError:I,onGetTextSuccess:F,onLoadError:B,onLoadSuccess:W,onRenderAnnotationLayerError:K,onRenderAnnotationLayerSuccess:te,onRenderError:Q,onRenderSuccess:_e,onRenderTextLayerError:we,onRenderTextLayerSuccess:pe,pageIndex:Ee,pageNumber:Z,pdf:X,registerPage:Y,renderAnnotationLayer:oe=!0,renderForms:ne=!1,renderMode:$="canvas",renderTextLayer:V=!0,rotate:le,scale:Se=QS,unregisterPage:ke,width:Ce}=t,ye=kM(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Le,ze]=ah(),{value:Me,error:Fs}=Le,bn=D.useRef(null);nt(X);const jt=No(Z)?Z-1:Ee??null,Xe=Z??(No(Ee)?Ee+1:null),St=le??(Me?Me.rotate:null),ht=D.useMemo(()=>{if(!Me)return null;let vr=1;const qr=Se??QS;if(Ce||b){const po=Me.getViewport({scale:1,rotation:St});Ce?vr=Ce/po.width:b&&(vr=b/po.height)}return qr*vr},[b,Me,St,Se,Ce]);D.useEffect(function(){return()=>{No(jt)&&n&&ke&&ke(jt)}},[n,X,jt,ke]);function _n(){if(W){if(!Me||!ht)return;W(ox(Me,ht))}if(n&&Y){if(!No(jt)||!bn.current)return;Y(jt,bn.current)}}function Wr(){Fs&&(As(!1,Fs.toString()),B&&B(Fs))}D.useEffect(function(){ze({type:"RESET"})},[ze,X,jt]),D.useEffect(function(){if(!X||!Xe)return;const qr=Ap(X.getPage(Xe)),po=qr;return qr.promise.then(Kr=>{ze({type:"RESOLVE",value:Kr})}).catch(Kr=>{ze({type:"REJECT",error:Kr})}),()=>Kl(po)},[ze,X,Xe]),D.useEffect(()=>{if(Me!==void 0){if(Me===!1){Wr();return}_n()}},[Me,ht]);const Gr=D.useMemo(()=>Me&&No(jt)&&Xe&&No(St)&&No(ht)?{_className:s,canvasBackground:i,customTextRenderer:p,devicePixelRatio:m,onGetAnnotationsError:T,onGetAnnotationsSuccess:R,onGetStructTreeError:N,onGetStructTreeSuccess:j,onGetTextError:I,onGetTextSuccess:F,onRenderAnnotationLayerError:K,onRenderAnnotationLayerSuccess:te,onRenderError:Q,onRenderSuccess:_e,onRenderTextLayerError:we,onRenderTextLayerSuccess:pe,page:Me,pageIndex:jt,pageNumber:Xe,renderForms:ne,renderTextLayer:V,rotate:St,scale:ht}:null,[s,i,p,m,T,R,N,j,I,F,K,te,Q,_e,we,pe,Me,jt,Xe,ne,V,St,ht]),fo=D.useMemo(()=>oC(ye,()=>Me&&(ht?ox(Me,ht):void 0)),[ye,Me,ht]),Vn=`${jt}@${ht}/${St}`;function hh(){switch($){case"custom":return nt(f),y.jsx(f,{},`${Vn}_custom`);case"none":return null;case"canvas":default:return y.jsx(_M,{canvasRef:o},`${Vn}_canvas`)}}function Ep(){return V?y.jsx(AM,{},`${Vn}_text`):null}function kp(){return oe?y.jsx(EM,{},`${Vn}_annotations`):null}function Cp(){return y.jsxs(pC.Provider,{value:Gr,children:[hh(),Ep(),kp(),c]})}function Pp(){return Xe?X===null||Me===void 0||Me===null?y.jsx(Yc,{type:"loading",children:typeof _=="function"?_():_}):X===!1||Me===!1?y.jsx(Yc,{type:"error",children:typeof w=="function"?w():w}):Cp():y.jsx(Yc,{type:"no-data",children:typeof E=="function"?E():E})}return y.jsx("div",Object.assign({className:m0(s,d),"data-page-number":Xe,ref:fC(A,bn),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${ht}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},fo,{children:Pp()}))}uM();Fn.workerSrc="pdf.worker.mjs";Fn.workerSrc=new URL("/assets/pdf.worker.min-BHSKYoqd.js",import.meta.url).toString();function PM({pdfUrl:l}){const[e,t]=D.useState(0),[s,n]=D.useState(1),[i,o]=D.useState(1),[c,d]=D.useState(!0),[f,p]=D.useState("");function m({numPages:T}){t(T),d(!1),p("")}function w(T){console.error("PDF load error:",T),p("Failed to load PDF. The file might be corrupted or inaccessible."),d(!1)}const b=()=>{n(T=>Math.max(T-1,1))},A=()=>{n(T=>Math.min(T+1,e))},_=()=>{o(T=>Math.min(T+.2,2))},E=()=>{o(T=>Math.max(T-.2,.5))};return f?y.jsxs("div",{className:"p-8 text-center",children:[y.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:y.jsx(Rm,{className:"h-8 w-8 text-red-600"})}),y.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"PDF Loading Error"}),y.jsx("p",{className:"text-slate-600 mb-6",children:f}),y.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[y.jsx(Gy,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]}):y.jsxs("div",{className:"bg-slate-50",children:[y.jsx("div",{className:"bg-white border-b border-slate-200 px-6 py-4",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("div",{className:"flex items-center space-x-4",children:y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("button",{onClick:b,disabled:s<=1,className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y.jsx(Ij,{className:"h-5 w-5"})}),y.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Page ",s," of ",e]}),y.jsx("button",{onClick:A,disabled:s>=e,className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y.jsx(Mj,{className:"h-5 w-5"})})]})}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("button",{onClick:E,disabled:i<=.5,className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y.jsx(Wj,{className:"h-5 w-5"})}),y.jsxs("span",{className:"text-sm font-medium text-slate-700 min-w-[60px] text-center",children:[Math.round(i*100),"%"]}),y.jsx("button",{onClick:_,disabled:i>=2,className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y.jsx(Vj,{className:"h-5 w-5"})})]}),y.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-3 py-2 text-slate-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[y.jsx(Gy,{className:"h-4 w-4 mr-2"}),"Download"]})]})}),y.jsxs("div",{className:"p-6",children:[c&&y.jsxs("div",{className:"flex items-center justify-center py-12",children:[y.jsx(zn,{size:"lg"}),y.jsx("span",{className:"ml-3 text-slate-600",children:"Loading PDF..."})]}),y.jsx("div",{className:"flex justify-center",children:y.jsx("div",{className:"bg-white shadow-lg",children:y.jsx(mM,{file:l,onLoadSuccess:m,onLoadError:w,loading:null,children:y.jsx(CM,{pageNumber:s,scale:i,loading:null,error:y.jsx("div",{className:"p-8 text-center",children:y.jsxs("p",{className:"text-slate-600",children:["Failed to load page ",s]})})})})})})]})]})}function TM({paper:l}){const{ai_summary:e,ai_sections:t}=l;return y.jsx("div",{className:"p-8",children:y.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[y.jsxs("div",{className:"text-center border-b border-slate-200 pb-6",children:[y.jsx("div",{className:"flex items-center justify-center mb-4",children:y.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-100 to-blue-100 rounded-xl",children:y.jsx(Gl,{className:"h-8 w-8 text-purple-600"})})}),y.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"AI-Powered Analysis"}),y.jsx("p",{className:"text-slate-600",children:"Intelligent insights and section-by-section explanations generated by Google Gemini"})]}),e&&y.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6",children:[y.jsxs("div",{className:"flex items-center mb-4",children:[y.jsx(Wl,{className:"h-6 w-6 text-purple-600 mr-3"}),y.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Comprehensive Summary"})]}),y.jsx("div",{className:"prose prose-slate max-w-none",children:y.jsx("p",{className:"text-slate-700 leading-relaxed text-lg",children:e})})]}),t&&t.length>0&&y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx(jj,{className:"h-6 w-6 text-blue-600 mr-3"}),y.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Section-by-Section Analysis"})]}),y.jsx("div",{className:"space-y-4",children:t.map((s,n)=>y.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg overflow-hidden",children:[y.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-medium mr-3",children:n+1}),y.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:s.title})]})}),y.jsx("div",{className:"p-6",children:y.jsx("div",{className:"prose prose-slate max-w-none",children:y.jsx("p",{className:"text-slate-700 leading-relaxed",children:s.content})})})]},n))})]}),!e&&(!t||t.length===0)&&y.jsxs("div",{className:"text-center py-12",children:[y.jsx("div",{className:"mx-auto w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:y.jsx(yS,{className:"h-8 w-8 text-slate-400"})}),y.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"AI Analysis Coming Soon"}),y.jsx("p",{className:"text-slate-600",children:"AI-powered insights and analysis for this paper are being processed. Please check back later."})]}),y.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx(yS,{className:"h-5 w-5 text-amber-600 mr-3 mt-0.5 flex-shrink-0"}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-medium text-amber-800 mb-1",children:"AI-Generated Content"}),y.jsx("p",{className:"text-sm text-amber-700 leading-relaxed",children:"These insights are generated by AI and should be used as a supplementary tool for understanding the research. Always refer to the original paper for complete and authoritative information."})]})]})})]})})}function NM(){const{id:l}=cA(),e=Yl(),{user:t}=Zl(),[s,n]=D.useState(null),[i,o]=D.useState(null),[c,d]=D.useState(!0),[f,p]=D.useState("pdf"),[m,w]=D.useState(!1);D.useEffect(()=>{async function A(){if(l)try{d(!0);const[_,E]=await Promise.all([Ej(parseInt(l)),gp()]);if(!_){He.error("Paper not found"),e("/");return}n(_);const T=E.find(R=>R.id===_.category_id);o(T||null)}catch(_){console.error("Error loading paper:",_),He.error("Failed to load paper"),e("/")}finally{d(!1)}}A()},[l,e]),D.useEffect(()=>{s&&!m&&(kj(s.id,t==null?void 0:t.id),w(!0))},[s,t,m]);const b=A=>new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return c?y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsx(zn,{size:"lg"})}):s?y.jsxs("div",{className:"min-h-screen bg-slate-50",children:[y.jsx("div",{className:"bg-white border-b border-slate-200",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[y.jsxs("button",{onClick:()=>e("/"),className:"flex items-center text-slate-600 hover:text-slate-900 mb-6 transition-colors",children:[y.jsx($A,{className:"h-5 w-5 mr-2"}),"Back to Papers"]}),y.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[y.jsxs("div",{className:"lg:col-span-2",children:[i&&y.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full mb-4",children:i.name}),y.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-slate-900 mb-4 leading-tight",children:s.title}),y.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-slate-600 mb-6",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx(Nd,{className:"h-5 w-5 mr-2"}),y.jsx("span",{className:"font-medium",children:s.author})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(BA,{className:"h-5 w-5 mr-2"}),y.jsx("span",{children:b(s.created_at)})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(Td,{className:"h-5 w-5 mr-2"}),y.jsxs("span",{children:[s.views||0," views"]})]})]}),y.jsx("p",{className:"text-lg text-slate-700 leading-relaxed",children:s.description})]}),y.jsx("div",{className:"lg:col-span-1",children:y.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 space-y-4",children:[y.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Access Paper"}),y.jsxs("a",{href:s.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full px-4 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[y.jsx(Gy,{className:"h-5 w-5 mr-2"}),"Download PDF"]}),(s.presentation_url||s.audio_url)&&y.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[y.jsx("h4",{className:"font-medium text-slate-900 mb-3",children:"Additional Resources"}),y.jsxs("div",{className:"space-y-2",children:[s.presentation_url&&y.jsxs("a",{href:s.presentation_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center w-full px-3 py-2 text-slate-700 hover:bg-white hover:text-blue-600 rounded-lg transition-colors",children:[y.jsx(zA,{className:"h-4 w-4 mr-2"}),"Presentation Slides",y.jsx(Rm,{className:"h-4 w-4 ml-auto"})]}),s.audio_url&&y.jsxs("a",{href:s.audio_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center w-full px-3 py-2 text-slate-700 hover:bg-white hover:text-blue-600 rounded-lg transition-colors",children:[y.jsx(VA,{className:"h-4 w-4 mr-2"}),"Audio Summary",y.jsx(Rm,{className:"h-4 w-4 ml-auto"})]})]})]})]})})]})]})}),y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[y.jsx("div",{className:"mb-6",children:y.jsx("div",{className:"border-b border-slate-200",children:y.jsxs("nav",{className:"-mb-px flex space-x-8",children:[y.jsxs("button",{onClick:()=>p("pdf"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${f==="pdf"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[y.jsx(Bn,{className:"h-4 w-4 inline mr-2"}),"View PDF"]}),y.jsxs("button",{onClick:()=>p("ai-insights"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${f==="ai-insights"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[y.jsx(Wl,{className:"h-4 w-4 inline mr-2"}),"AI Insights"]})]})})}),y.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[f==="pdf"&&y.jsx(PM,{pdfUrl:s.pdf_url}),f==="ai-insights"&&y.jsx(TM,{paper:s})]})]})]}):y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Paper Not Found"}),y.jsx("p",{className:"text-slate-600 mb-4",children:"The paper you're looking for doesn't exist."}),y.jsx("button",{onClick:()=>e("/"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go Home"})]})})}function RM(){const{slug:l}=cA(),e=Yl(),[t,s]=D.useState(null),[n,i]=D.useState([]),[o,c]=D.useState([]),[d,f]=D.useState(""),[p,m]=D.useState(!0);return D.useEffect(()=>{async function w(){if(l)try{m(!0);const A=(await gp()).find(E=>E.slug===l);if(!A){He.error("Category not found"),e("/");return}s(A);const _=await wx(A.id);i(_),c(_)}catch(b){console.error("Error loading category data:",b),He.error("Failed to load category"),e("/")}finally{m(!1)}}w()},[l,e]),D.useEffect(()=>{if(!d)c(n);else{const w=d.toLowerCase(),b=n.filter(A=>A.title.toLowerCase().includes(w)||A.description.toLowerCase().includes(w)||A.author.toLowerCase().includes(w)||A.ai_summary.toLowerCase().includes(w));c(b)}},[n,d]),p?y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsx(zn,{size:"lg"})}):t?y.jsxs("div",{className:"min-h-screen bg-slate-50",children:[y.jsx("div",{className:"bg-white border-b border-slate-200",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[y.jsxs("button",{onClick:()=>e("/"),className:"flex items-center text-slate-600 hover:text-slate-900 mb-6 transition-colors",children:[y.jsx($A,{className:"h-5 w-5 mr-2"}),"Back to All Papers"]}),y.jsxs("div",{className:"mb-6",children:[y.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-slate-900 mb-4",children:t.name}),y.jsx("p",{className:"text-lg text-slate-600 max-w-3xl",children:t.description})]}),y.jsx("div",{className:"max-w-2xl",children:y.jsx(qA,{value:d,onChange:f,placeholder:`Search ${t.name} papers...`})})]})}),y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[y.jsx("div",{className:"mb-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("p",{className:"text-slate-600",children:[o.length," paper",o.length!==1?"s":""," found",d&&y.jsxs("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:['"',d,'"']})]}),d&&y.jsx("button",{onClick:()=>f(""),className:"text-sm text-slate-500 hover:text-slate-700 transition-colors",children:"Clear search"})]})}),o.length>0?y.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(w=>y.jsx(GA,{paper:w,category:t},w.id))}):y.jsxs("div",{className:"text-center py-12",children:[y.jsx("div",{className:"mx-auto w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:y.jsx(l0,{className:"h-8 w-8 text-slate-400"})}),y.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:d?"No papers found":"No papers in this category yet"}),y.jsx("p",{className:"text-slate-600 mb-6",children:d?"Try adjusting your search terms":`Be the first to submit a paper in ${t.name}`}),d?y.jsx("button",{onClick:()=>f(""),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Clear search"}):y.jsx("button",{onClick:()=>e("/submit"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Submit Paper"})]})]})]}):y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Category Not Found"}),y.jsx("p",{className:"text-slate-600 mb-4",children:"The category you're looking for doesn't exist."}),y.jsx("button",{onClick:()=>e("/"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go Home"})]})})}function jM(){const{user:l,signIn:e,signUp:t,loading:s}=Zl(),n=Yl(),i=Xl(),[o,c]=D.useState(!1),[d,f]=D.useState(!1),[p,m]=D.useState({email:"",password:"",fullName:"",confirmPassword:""}),[w,b]=D.useState(!1);D.useEffect(()=>{var T,R;if(l&&!s){const N=((R=(T=i.state)==null?void 0:T.from)==null?void 0:R.pathname)||"/";n(N,{replace:!0})}},[l,s,n,i]);const A=T=>{m({...p,[T.target.name]:T.target.value})},_=()=>{if(!p.email||!p.password)return He.error("Please fill in all required fields"),!1;if(o){if(!p.fullName)return He.error("Please enter your full name"),!1;if(p.password!==p.confirmPassword)return He.error("Passwords do not match"),!1;if(p.password.length<6)return He.error("Password must be at least 6 characters"),!1}return!0},E=async T=>{var R,N;if(T.preventDefault(),!!_()){b(!0);try{if(o)await t(p.email,p.password,p.fullName),He.success("Account created! Please check your email to verify your account.");else{await e(p.email,p.password),He.success("Signed in successfully!");const j=((N=(R=i.state)==null?void 0:R.from)==null?void 0:N.pathname)||"/";n(j,{replace:!0})}}catch(j){console.error("Auth error:",j),He.error(j.message||`${o?"Sign up":"Sign in"} failed`)}finally{b(!1)}}};return s?y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsx(zn,{size:"lg"})}):y.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-blue-50 to-slate-100",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"flex justify-center mb-6",children:y.jsxs("div",{className:"relative",children:[y.jsx(Gl,{className:"h-12 w-12 text-blue-600"}),y.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full blur opacity-25"})]})}),y.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:o?"Join AI Research Hub":"Welcome Back"}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:o?"Create your account to submit and discover cutting-edge AI research":"Sign in to your account to access premium features"})]}),y.jsx("form",{className:"mt-8 space-y-6",onSubmit:E,children:y.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[y.jsxs("div",{className:"space-y-4",children:[o&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name"}),y.jsxs("div",{className:"relative",children:[y.jsx(Nd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),y.jsx("input",{id:"fullName",name:"fullName",type:"text",value:p.fullName,onChange:A,className:"pl-10 block w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your full name"})]})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:"Email Address"}),y.jsxs("div",{className:"relative",children:[y.jsx(UA,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),y.jsx("input",{id:"email",name:"email",type:"email",value:p.email,onChange:A,className:"pl-10 block w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your email"})]})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),y.jsxs("div",{className:"relative",children:[y.jsx(wS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),y.jsx("input",{id:"password",name:"password",type:d?"text":"password",value:p.password,onChange:A,className:"pl-10 pr-10 block w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your password"}),y.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:d?y.jsx(Fj,{className:"h-5 w-5"}):y.jsx(Td,{className:"h-5 w-5"})})]})]}),o&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirm Password"}),y.jsxs("div",{className:"relative",children:[y.jsx(wS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),y.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:d?"text":"password",value:p.confirmPassword,onChange:A,className:"pl-10 block w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Confirm your password"})]})]})]}),y.jsxs("button",{type:"submit",disabled:w,className:"w-full mt-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:[w?y.jsx(zn,{size:"sm",className:"mr-2"}):null,o?"Create Account":"Sign In"]}),y.jsx("div",{className:"mt-6 text-center",children:y.jsx("button",{type:"button",onClick:()=>c(!o),className:"text-sm text-blue-600 hover:text-blue-700 transition-colors",children:o?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})}),y.jsx("div",{className:"text-center",children:y.jsx("p",{className:"text-xs text-slate-500",children:"For admin access, please contact the platform administrator after creating your account."})})]})})}function LM(){const l=Yl();return D.useEffect(()=>{async function e(){try{const t=window.location.hash;if(t&&t.length>0){const{data:s,error:n}=await zt.auth.exchangeCodeForSession(t);if(n){console.error("Error exchanging code for session:",n.message),He.error("Email verification failed"),l("/auth?error="+encodeURIComponent(n.message));return}if(s.session){He.success("Email verified successfully! Welcome to AI Research Hub."),l("/");return}}He.error("Email verification failed"),l("/auth?error=No session found")}catch(t){console.error("Auth callback error:",t),He.error("Email verification failed"),l("/auth?error="+encodeURIComponent(t.message))}}e()},[l]),y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-slate-100",children:y.jsxs("div",{className:"text-center",children:[y.jsx(zn,{size:"lg",className:"mb-4"}),y.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Verifying your email..."}),y.jsx("p",{className:"text-slate-600",children:"Please wait while we verify your account."})]})})}function IM(){const[l,e]=D.useState([]),[t,s]=D.useState([]),[n,i]=D.useState([]),[o,c]=D.useState(!0),[d,f]=D.useState("overview"),[p,m]=D.useState({totalPapers:0,pendingSubmissions:0,totalUsers:0});D.useEffect(()=>{w()},[]);const w=async()=>{try{c(!0);const[R,N,j]=await Promise.all([Cj(),wx(),gp()]);e(R),s(N),i(j);try{const{data:I}=await zt.functions.invoke("admin-actions",{body:{action:"get_stats"}});I!=null&&I.data&&m(I.data)}catch(I){console.error("Error loading stats:",I)}}catch(R){console.error("Error loading dashboard data:",R),He.error("Failed to load dashboard data")}finally{c(!1)}},b=async R=>{try{const{data:N,error:j}=await zt.functions.invoke("admin-actions",{body:{action:"approve_submission",data:{submissionId:R}}});if(j)throw j;He.success("Submission approved and published"),w()}catch(N){console.error("Error approving submission:",N),He.error(N.message||"Failed to approve submission")}},A=async R=>{if(confirm("Are you sure you want to reject this submission? This action cannot be undone."))try{const{data:N,error:j}=await zt.functions.invoke("admin-actions",{body:{action:"reject_submission",data:{submissionId:R}}});if(j)throw j;He.success("Submission rejected and removed"),w()}catch(N){console.error("Error rejecting submission:",N),He.error(N.message||"Failed to reject submission")}},_=async R=>{if(confirm("Are you sure you want to delete this paper? This action cannot be undone."))try{const{data:N,error:j}=await zt.functions.invoke("admin-actions",{body:{action:"delete_paper",data:{paperId:R}}});if(j)throw j;He.success("Paper deleted successfully"),w()}catch(N){console.error("Error deleting paper:",N),He.error(N.message||"Failed to delete paper")}},E=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=R=>{var N;return((N=n.find(j=>j.id===R))==null?void 0:N.name)||"Unknown"};return o?y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsx(zn,{size:"lg"})}):y.jsxs("div",{className:"min-h-screen bg-slate-50",children:[y.jsx("div",{className:"bg-white border-b border-slate-200",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:y.jsx("div",{className:"flex items-center justify-between",children:y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Admin Dashboard"}),y.jsx("p",{className:"text-slate-600 mt-1",children:"Manage papers, submissions, and platform content"})]})})})}),y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsx("div",{className:"border-b border-slate-200",children:y.jsxs("nav",{className:"-mb-px flex space-x-8",children:[y.jsxs("button",{onClick:()=>f("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${d==="overview"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[y.jsx(xx,{className:"h-4 w-4 inline mr-2"}),"Overview"]}),y.jsxs("button",{onClick:()=>f("submissions"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${d==="submissions"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[y.jsx(_y,{className:"h-4 w-4 inline mr-2"}),"Pending Submissions (",l.length,")"]}),y.jsxs("button",{onClick:()=>f("papers"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${d==="papers"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[y.jsx(Bn,{className:"h-4 w-4 inline mr-2"}),"Published Papers (",t.length,")"]})]})})}),y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d==="overview"&&y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:y.jsx(Bn,{className:"h-6 w-6 text-blue-600"})}),y.jsxs("div",{className:"ml-4",children:[y.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Papers"}),y.jsx("p",{className:"text-2xl font-bold text-slate-900",children:p.totalPapers})]})]})}),y.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:y.jsx(_y,{className:"h-6 w-6 text-orange-600"})}),y.jsxs("div",{className:"ml-4",children:[y.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Pending Submissions"}),y.jsx("p",{className:"text-2xl font-bold text-slate-900",children:p.pendingSubmissions})]})]})}),y.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:y.jsx(HA,{className:"h-6 w-6 text-green-600"})}),y.jsxs("div",{className:"ml-4",children:[y.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Users"}),y.jsx("p",{className:"text-2xl font-bold text-slate-900",children:p.totalUsers})]})]})})]}),y.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200",children:[y.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:y.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"Recent Activity"})}),y.jsx("div",{className:"p-6",children:y.jsxs("div",{className:"space-y-4",children:[l.slice(0,5).map(R=>y.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100 last:border-0",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-slate-900",children:R.title}),y.jsxs("p",{className:"text-sm text-slate-600",children:["Submitted by ",R.author,"  ",E(R.created_at)]})]}),y.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full",children:"Pending Review"})]},R.id)),l.length===0&&y.jsx("p",{className:"text-slate-500 text-center py-4",children:"No recent submissions"})]})})]})]}),d==="submissions"&&y.jsx("div",{className:"space-y-6",children:l.length>0?y.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[y.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:y.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"Pending Submissions"})}),y.jsx("div",{className:"divide-y divide-slate-200",children:l.map(R=>y.jsx("div",{className:"p-6",children:y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h4",{className:"text-lg font-medium text-slate-900 mb-2",children:R.title}),y.jsx("p",{className:"text-slate-600 mb-3",children:R.description}),y.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-500",children:[y.jsxs("span",{children:["By ",R.author]}),y.jsx("span",{children:""}),y.jsx("span",{children:T(R.category_id)}),y.jsx("span",{children:""}),y.jsx("span",{children:E(R.created_at)})]})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-6",children:[y.jsx("a",{href:R.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 text-slate-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:y.jsx(Td,{className:"h-4 w-4"})}),y.jsxs("button",{onClick:()=>b(R.id),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-1",children:[y.jsx(Yg,{className:"h-4 w-4"}),y.jsx("span",{children:"Approve"})]}),y.jsxs("button",{onClick:()=>A(R.id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-1",children:[y.jsx(Oj,{className:"h-4 w-4"}),y.jsx("span",{children:"Reject"})]})]})]})},R.id))})]}):y.jsxs("div",{className:"text-center py-12",children:[y.jsx(_y,{className:"mx-auto h-12 w-12 text-slate-400 mb-4"}),y.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No pending submissions"}),y.jsx("p",{className:"text-slate-600",children:"All submissions have been reviewed."})]})}),d==="papers"&&y.jsx("div",{className:"space-y-6",children:t.length>0?y.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[y.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:y.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"Published Papers"})}),y.jsx("div",{className:"divide-y divide-slate-200",children:t.map(R=>y.jsx("div",{className:"p-6",children:y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h4",{className:"text-lg font-medium text-slate-900 mb-2",children:R.title}),y.jsx("p",{className:"text-slate-600 mb-3",children:R.description}),y.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-500",children:[y.jsxs("span",{children:["By ",R.author]}),y.jsx("span",{children:""}),y.jsx("span",{children:T(R.category_id)}),y.jsx("span",{children:""}),y.jsxs("span",{children:[R.views||0," views"]}),y.jsx("span",{children:""}),y.jsx("span",{children:E(R.created_at)})]})]}),y.jsxs("div",{className:"flex items-center space-x-2 ml-6",children:[y.jsx("a",{href:`/paper/${R.id}`,className:"px-3 py-2 text-slate-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:y.jsx(Td,{className:"h-4 w-4"})}),y.jsx("button",{onClick:()=>_(R.id),className:"px-3 py-2 text-slate-700 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:y.jsx(zj,{className:"h-4 w-4"})})]})]})},R.id))})]}):y.jsxs("div",{className:"text-center py-12",children:[y.jsx(Bn,{className:"mx-auto h-12 w-12 text-slate-400 mb-4"}),y.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No papers published yet"}),y.jsx("p",{className:"text-slate-600",children:"Start by approving submissions or publishing new papers."})]})})]})]})}function MM(){const{user:l,isAdmin:e}=Zl(),t=Yl(),[s,n]=D.useState([]),[i,o]=D.useState({title:"",description:"",author:"",categoryId:"",pdfFile:null,presentationFile:null,audioFile:null}),[c,d]=D.useState(!1),[f,p]=D.useState(!0);D.useEffect(()=>{async function E(){try{const T=await gp();n(T)}catch(T){console.error("Error loading categories:",T),He.error("Failed to load categories")}finally{p(!1)}}E()},[]);const m=E=>{o({...i,[E.target.name]:E.target.value})},w=(E,T)=>{var N;const R=((N=E.target.files)==null?void 0:N[0])||null;o({...i,[`${T}File`]:R})},b=E=>new Promise((T,R)=>{const N=new FileReader;N.onloadend=()=>T(N.result),N.onerror=R,N.readAsDataURL(E)}),A=()=>i.title.trim()?i.description.trim()?i.author.trim()?i.categoryId?i.pdfFile?i.pdfFile&&i.pdfFile.type!=="application/pdf"?(He.error("Please upload a valid PDF file"),!1):i.pdfFile&&i.pdfFile.size>50*1024*1024?(He.error("PDF file size must be less than 50MB"),!1):!0:(He.error("Please upload a PDF file"),!1):(He.error("Please select a category"),!1):(He.error("Please enter the author name"),!1):(He.error("Please enter a description"),!1):(He.error("Please enter a title"),!1),_=async E=>{if(E.preventDefault(),!!A()){d(!0);try{const T=await b(i.pdfFile);let R=null,N=null;i.presentationFile&&(R=await b(i.presentationFile)),i.audioFile&&(N=await b(i.audioFile));const{data:j,error:I}=await zt.functions.invoke("upload-paper",{body:{title:i.title,description:i.description,author:i.author,categoryId:parseInt(i.categoryId),pdfData:T,presentationData:R,audioData:N,isSubmission:!e}});if(I)throw I;He.success(j.data.message||"Paper submitted successfully!"),e?t("/"):(o({title:"",description:"",author:"",categoryId:"",pdfFile:null,presentationFile:null,audioFile:null}),document.querySelectorAll('input[type="file"]').forEach(B=>B.value=""))}catch(T){console.error("Submission error:",T),He.error(T.message||"Failed to submit paper")}finally{d(!1)}}};return f?y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsx(zn,{size:"lg"})}):y.jsx("div",{className:"min-h-screen bg-slate-50 py-8",children:y.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("div",{className:"flex items-center justify-center mb-4",children:y.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-100 to-purple-100 rounded-xl",children:y.jsx(bS,{className:"h-8 w-8 text-blue-600"})})}),y.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:e?"Publish New Paper":"Submit Research Paper"}),y.jsx("p",{className:"text-slate-600",children:e?"Add a new research paper to the platform with AI-powered analysis":"Share your research with the AI community and get intelligent insights"})]}),y.jsxs("form",{onSubmit:_,className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[y.jsxs("div",{className:"p-8 space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-slate-700 mb-2",children:"Paper Title *"}),y.jsx("input",{type:"text",id:"title",name:"title",value:i.title,onChange:m,className:"block w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter the title of your research paper",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"author",className:"block text-sm font-medium text-slate-700 mb-2",children:"Author(s) *"}),y.jsx("input",{type:"text",id:"author",name:"author",value:i.author,onChange:m,className:"block w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter author name(s)",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"categoryId",className:"block text-sm font-medium text-slate-700 mb-2",children:"Research Category *"}),y.jsxs("select",{id:"categoryId",name:"categoryId",value:i.categoryId,onChange:m,className:"block w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",required:!0,children:[y.jsx("option",{value:"",children:"Select a category"}),s.map(E=>y.jsx("option",{value:E.id,children:E.name},E.id))]})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 mb-2",children:"Description *"}),y.jsx("textarea",{id:"description",name:"description",value:i.description,onChange:m,rows:4,className:"block w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Provide a detailed description of your research, methodology, and key findings",required:!0})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"Files"}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Research Paper (PDF) *"}),y.jsx("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6",children:y.jsxs("div",{className:"text-center",children:[y.jsx(Bn,{className:"mx-auto h-12 w-12 text-slate-400 mb-4"}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsxs("label",{htmlFor:"pdfFile",className:"cursor-pointer",children:[y.jsx("span",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Choose PDF File"}),y.jsx("input",{type:"file",id:"pdfFile",accept:".pdf",onChange:E=>w(E,"pdf"),className:"sr-only",required:!0})]}),y.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Maximum file size: 50MB"})]}),i.pdfFile&&y.jsxs("div",{className:"mt-3 flex items-center justify-center text-sm text-green-600",children:[y.jsx(Yg,{className:"h-4 w-4 mr-1"}),i.pdfFile.name]})]})})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Presentation Slides (Optional)"}),y.jsx("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6",children:y.jsxs("div",{className:"text-center",children:[y.jsx(zA,{className:"mx-auto h-12 w-12 text-slate-400 mb-4"}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsxs("label",{htmlFor:"presentationFile",className:"cursor-pointer",children:[y.jsx("span",{className:"bg-slate-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-slate-700 transition-colors",children:"Choose Presentation"}),y.jsx("input",{type:"file",id:"presentationFile",accept:".pdf,.ppt,.pptx",onChange:E=>w(E,"presentation"),className:"sr-only"})]}),y.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"PDF, PPT, or PPTX format"})]}),i.presentationFile&&y.jsxs("div",{className:"mt-3 flex items-center justify-center text-sm text-green-600",children:[y.jsx(Yg,{className:"h-4 w-4 mr-1"}),i.presentationFile.name]})]})})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Audio Summary/Podcast (Optional)"}),y.jsx("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6",children:y.jsxs("div",{className:"text-center",children:[y.jsx(VA,{className:"mx-auto h-12 w-12 text-slate-400 mb-4"}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsxs("label",{htmlFor:"audioFile",className:"cursor-pointer",children:[y.jsx("span",{className:"bg-slate-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-slate-700 transition-colors",children:"Choose Audio File"}),y.jsx("input",{type:"file",id:"audioFile",accept:".mp3,.wav,.m4a",onChange:E=>w(E,"audio"),className:"sr-only"})]}),y.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"MP3, WAV, or M4A format"})]}),i.audioFile&&y.jsxs("div",{className:"mt-3 flex items-center justify-center text-sm text-green-600",children:[y.jsx(Yg,{className:"h-4 w-4 mr-1"}),i.audioFile.name]})]})})]})]}),y.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-4",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx(Wl,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5 flex-shrink-0"}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-medium text-purple-800 mb-1",children:"AI-Powered Analysis"}),y.jsx("p",{className:"text-sm text-purple-700 leading-relaxed",children:"Your paper will be automatically processed by Google Gemini AI to generate intelligent summaries and section-by-section explanations to help readers understand your research better."})]})]})})]}),y.jsx("div",{className:"bg-slate-50 px-8 py-6 border-t border-slate-200",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[y.jsx(Dj,{className:"h-4 w-4 mr-2"}),e?"Paper will be published immediately":"Submission will be reviewed by administrators"]}),y.jsxs("button",{type:"submit",disabled:c,className:"flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium rounded-lg hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[c?y.jsx(zn,{size:"sm",className:"mr-2"}):y.jsx(bS,{className:"h-5 w-5 mr-2"}),c?"Processing...":e?"Publish Paper":"Submit for Review"]})]})})]})]})})}function DM({children:l}){const{user:e,loading:t}=Zl();return t?y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsx(zn,{size:"lg"})}):e?y.jsx(y.Fragment,{children:l}):y.jsx(pA,{to:"/auth",replace:!0})}function OM({children:l}){const{user:e,isAdmin:t,loading:s}=Zl();return s?y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsx(zn,{size:"lg"})}):e?t?y.jsx(y.Fragment,{children:l}):y.jsx("div",{className:"min-h-screen flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Access Denied"}),y.jsx("p",{className:"text-slate-600",children:"You don't have admin privileges to view this page."}),y.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go Back"})]})}):y.jsx(pA,{to:"/auth",replace:!0})}function FM(){return y.jsx(Pj,{children:y.jsx(CN,{children:y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[y.jsx(Kj,{children:y.jsxs(xN,{children:[y.jsx(fa,{path:"/",element:y.jsx(Qj,{})}),y.jsx(fa,{path:"/paper/:id",element:y.jsx(NM,{})}),y.jsx(fa,{path:"/category/:slug",element:y.jsx(RM,{})}),y.jsx(fa,{path:"/auth",element:y.jsx(jM,{})}),y.jsx(fa,{path:"/auth/callback",element:y.jsx(LM,{})}),y.jsx(fa,{path:"/submit",element:y.jsx(DM,{children:y.jsx(MM,{})})}),y.jsx(fa,{path:"/admin",element:y.jsx(OM,{children:y.jsx(IM,{})})})]})}),y.jsx(x2,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})})})}CT.createRoot(document.getElementById("root")).render(y.jsx(D.StrictMode,{children:y.jsx(TT,{children:y.jsx(FM,{})})}));
